<!DOCTYPE html>
<html lang="en" style="" class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms no-csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- META DATA -->
    <meta charset="utf-8">
    <!-- STYLESHEETS -->
    <link href="/statics/blueu/styles/bootstrap.css" rel="stylesheet">
    <link href="/statics/blueu/styles/fonts.css" rel="stylesheet">
    <link href="/statics/blueu/styles/api_style.css" rel="stylesheet">
    <link href="/statics/blueu/styles/prism.css" rel="stylesheet">
    <!-- JAVASCRIPT -->
    <script type="text/javascript" async="" src="/statics/blueu/js/ga.js"></script>
    <script type="text/javascript" src="/statics/blueu/js/jquery.min.js"></script>
    <script type="text/javascript" src="/statics/blueu/js/modernizr-latest.js"></script>
    <script type="text/javascript" src="/statics/blueu/js/bootstrap.js"></script>
  </head>

  <body id="tutorials" class="api" style="">
    <div id="wrapper">
      <header id="nav" class="navbar" role="navigation">
        <div id="branding" class="pull-left">
        <a href="http://estimote.com/api/" title="Real world context for your apps">Estimote Beacons</a>
        </div>
        <div class="container">
             <ul class="nav navbar-nav text-center">
               <li><a href="/html/home.html"  >首页</a></li>
              <li><a href="/html/for-retail.html"  >零售</a></li>
              <li><a href="/html/api.html" class="active">API</a></li>
              <!-- <li><a href="/html/community.html" >社区</a></li> -->
              <li><a href="/html/contact_us.html"  >联系我们</a></li>
              <li><a href="/html/join_us.html" >加入我们</a></li>
            </ul>
        </div>

      </header> <!-- #nav -->

      <section id="breadcrumb" class="jumbotron">
        <div class="container">
          <div class="col-md-11 col-md-offset-1">
            <h1>如何重新创建该应用程序的通知</h1>
          </div>
        </div>
      </section> <!-- #breadcrumb -->

      <section id="api" class="row">
        <div class="container">
          <div class="col-md-2 col-md-offset-1">
            <div id="sticky-anchor"></div>
            <ul class="nav nav-pills nav-stacked">
              <li><a href="/html/about.html">关于我们</a></li>
              <li><a href="/html/for-retail.html">零售应用</a></li>
              <li><a href="#">API文档</a></li>
                <li class="submenu"><a href="#" >入门</a></li>
                <li class="submenu"><a href="/html/api-Tutorials.html">教程</a></li>
                  <li class="submenu-2"><a href="/html/api-Distance.html"  >距离</a></li>
                  <li class="submenu-2"><a href="/html/api-Proximity.html" >接近</a></li>
                  <li class="submenu-2"><a href="/html/api-Notification.html" class="active">通知</a></li>
                <li class="submenu"><a href="#">iOS的SDK</a></li>
                <li class="submenu"><a href="#">Android 的 SDK</a></li>
                <li class="submenu"><a href="#">API参考</a></li>
            </ul>
          </div>
          <div class="col-md-8 content">
            <h2>介绍</h2>
              <p>
               该通知演示应用程序采用不同的方法，当涉及到利用Estimote信标。    </p>
              <p>
               而另一个演示应用程序（距离和接近）要求用户的一心一意，该通知演示应用程序是建立在非常情境，只是在时间的通知，这并不需要用户不断的审视自己的手机。   </p>
              <div class="row screens">
                <div class="col-md-4">
                  <img src="/statics/blueu/images/notification1.png" class="img-responsive" alt="">
                </div>
                <div class="col-md-4">
                  <img src="/statics/blueu/images/notification2.png" class="img-responsive" alt="">
                </div>
              </div>
            <h2>它是如何工作的</h2>
              <p>在这个演示程序，通知用户（通过iOS的通知），当他们离开一个预定义的周边，因为如果他们离开了一家鞋店中，他们曾试图在鞋。</p>
              <h2>该怎么办呢</h2>
              <p>重塑通知演示非常简单。 让我们通过这个演示应用程序的一些关键要素。</p>
              <p>首先，请确保您添加的CoreBluetooth.framework和CoreLocation.framework到您的项目，以及libEstimoteSDK7.a，它包含在演示项目。</p>
              <pre class=" line-numbers language-clike"><code class=" language-clike">
<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>viewDidLoad
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span>super viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> /////////////////////////////////////////////////////////////
</span>   <span class="token comment" spellcheck="true"> // setup Estimote beacon manager
</span>
   <span class="token comment" spellcheck="true"> // create manager instance
</span>    self<span class="token punctuation">.</span>beaconManager <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ESTBeaconManager alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    self<span class="token punctuation">.</span>beaconManager<span class="token punctuation">.</span>delegate <span class="token operator">=</span> self<span class="token punctuation">;</span>
    self<span class="token punctuation">.</span>beaconManager<span class="token punctuation">.</span>avoidUnknownStateBeacons <span class="token operator">=</span> YES<span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> // create sample region with major value defined
</span>    ESTBeaconRegion<span class="token operator">*</span> region <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ESTBeaconRegion alloc<span class="token punctuation">]</span> initRegionWithIdentifier<span class="token punctuation">:</span>@<span class="token string">"EstimoteSampleRegion"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> // start looking for estimote beacons in region
</span>   <span class="token comment" spellcheck="true"> // when beacon ranged beaconManager:didEnterRegion:
</span>   <span class="token comment" spellcheck="true"> // and beaconManager:didExitRegion: invoked
</span>    <span class="token punctuation">[</span>self<span class="token punctuation">.</span>beaconManager startMonitoringForRegion<span class="token punctuation">:</span>region<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span>self<span class="token punctuation">.</span>beaconManager requestStateForRegion<span class="token punctuation">:</span>region<span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> /////////////////////////////////////////////////////////////
</span>   <span class="token comment" spellcheck="true"> // setup view
</span>
   <span class="token comment" spellcheck="true"> // background
</span>
    self<span class="token punctuation">.</span>productImage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UIImageView alloc<span class="token punctuation">]</span> initWithFrame<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>UIScreen mainScreen<span class="token punctuation">]</span> bounds<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>self setProductImage<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>self<span class="token punctuation">.</span>view addSubview<span class="token punctuation">:</span>self<span class="token punctuation">.</span>productImage<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code>
              </pre>
              <p class="tut">
             第一步是使用 <span class="syntax italic">ESTBeaconManager</span>类来创建Estimote灯塔管理器对象并设置委托对象。 在反对<span class="syntax italic">startRangingBeaconsInRegion:</span>方法与一般的区域对象传递：在远程演示利用这个时间我们用startMonitoringForRegion方法。 由于这种方法每个用户的十字架注册区域边界的应用程序时得到通知。 我们还使用 <span class="syntax italic">requestStateForRegion:</span>方法来验证什么是我们的初始状态（In或Out定义的区域）。
              </p>

              <pre class=" line-numbers language-clike"><code class=" language-clike">
<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span>beaconManager<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconManager <span class="token operator">*</span><span class="token punctuation">)</span>manager
   didDetermineState<span class="token punctuation">:</span><span class="token punctuation">(</span>CLRegionState<span class="token punctuation">)</span>state
           forRegion<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconRegion <span class="token operator">*</span><span class="token punctuation">)</span>region
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>state <span class="token operator">==</span> CLRegionStateInside<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>self setProductImage<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>self setDiscountImage<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code>
              </pre>
              <p>当国家确定 <span class="syntax italic">beaconManager:didDetermineState:forRegion:</span>委托方法被调用，这样我们就可以决定什么类型的内容应显示。 我们用辅助方法setProductImage和setDiscountImage更新UI。</p>
              <pre class=" line-numbers language-clike"><code class=" language-clike">
<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span>beaconManager<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconManager <span class="token operator">*</span><span class="token punctuation">)</span>manager
      didEnterRegion<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconRegion <span class="token operator">*</span><span class="token punctuation">)</span>region
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true"> // iPhone/iPad entered beacon zone
</span>    <span class="token punctuation">[</span>self setProductImage<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span>beaconManager<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconManager <span class="token operator">*</span><span class="token punctuation">)</span>manager
       didExitRegion<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconRegion <span class="token operator">*</span><span class="token punctuation">)</span>region
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true"> // iPhone/iPad left beacon zone
</span>    <span class="token punctuation">[</span>self setDiscountImage<span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> // present local notification
</span>    UILocalNotification <span class="token operator">*</span>notification <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UILocalNotification alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    notification<span class="token punctuation">.</span>alertBody <span class="token operator">=</span> @<span class="token string">"The shoes you'd tried on are now 20%% off for you with this coupon"</span><span class="token punctuation">;</span>
    notification<span class="token punctuation">.</span>soundName <span class="token operator">=</span> UILocalNotificationDefaultSoundName<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token punctuation">[</span>UIApplication sharedApplication<span class="token punctuation">]</span> presentLocalNotificationNow<span class="token punctuation">:</span>notification<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code>
              </pre>

              <p>
           <span class="syntax italic">beaconManager:didEnterRegion:</span> 和 <span class="syntax italic">beaconManager:didExitRegion:</span>当区域的边界被跨越的委托方法被调用。 在我们的演示应用程序中展示基本的产品信息时，区域内（使用setProductImage helper方法）。 当我们离开区域基础上的产品信息被替换打折信息（使用setDiscountImage helper方法）和本地通知是发送给用户。
              </p>

              <p>
                您可以从GitHub上下载完整的项目
              </p>

              <a href="https://github.com/Estimote/iOS-SDK" class="btn btn-primary btn-lg btn-api">下载源代码</a>
           <div class="row apps">
               <div class="col-md-4 apps-tut">
                <img src="/statics/blueu/images/icon1.png" alt="">
                <h3><a href="#">距离演示应用程序</a></h3>
                <p>可视化的灯塔和电话之间的距离</p>
              </div>
         
               <div class="col-md-4 apps-tut">
                <img src="/statics/blueu/images/icon2.png" alt="">
                <h3><a href="#">感应演示应用程序</a></h3>
                <p>显示在交叉区域的消息</p>
              </div>

            </div>
          </div>
        </div>
      </section> <!-- #api -->
   <object type="text/x-scriptlet" width="100%" height="333px"  data="footer.html"></object>
  <!-- #footer -->
    </div> <!-- #wrapper -->
  
  <!-- sticky sidebar navigation -->
  <script type="text/javascript">
    function sticky_relocate() {
      var window_top = $(window).scrollTop();
      var div_top = $('#sticky-anchor').offset().top;

      if (window_top > div_top) {
          $('#api .nav').addClass('stick');
      } else {
          $('#api .nav').removeClass('stick');
      }
    }

    $(function () {
        $(window).scroll(sticky_relocate);
        sticky_relocate();
    });
  </script>

</body></html>