<!DOCTYPE html>
<html lang="en" style="" class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms no-csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <!-- STYLESHEETS -->
    <link href="/statics/blueu/styles/bootstrap.css" rel="stylesheet">
    <link href="/statics/blueu/styles/fonts.css" rel="stylesheet">
    <link href="/statics/blueu/styles/api_style.css" rel="stylesheet">
    <link href="/statics/blueu/styles/prism.css" rel="stylesheet">
    <!-- JAVASCRIPT -->
    <script type="text/javascript" async="" src="/statics/blueu/js/ga.js"></script>
    <script type="text/javascript" src="/statics/blueu/js/jquery.min.js"></script>
    <script type="text/javascript" src="/statics/blueu/js/modernizr-latest.js"></script>
    <script type="text/javascript" src="/statics/blueu/js/bootstrap.js"></script>
  </head>

  <body id="tutorials" class="api" style="">
    <div id="wrapper">
      <header id="nav" class="navbar" role="navigation">
        <div id="branding" class="pull-left"><a href="http://estimote.com/api/" title="Real world context for your apps">Estimote Beacons</a></div>
        <div class="container">
            <ul class="nav navbar-nav text-center">
              <li><a href="/html/home.html"  >首页</a></li>
              <li><a href="/html/for-retail.html"  >零售</a></li>
              <li><a href="/html/api.html" class="active">Api</a></li>
              <!-- <li><a href="/html/community.html" >社区</a></li> -->
              <li><a href="/html/contact_us.html"  >联系我们</a></li>
              <li><a href="/html/join_us.html" >加入我们</a></li>
            </ul>
        </div>
      </header> <!-- #nav -->
      <section id="breadcrumb" class="jumbotron">
        <div class="container">
          <div class="col-md-11 col-md-offset-1">
            <h1>如何重新创建接近应用程序</h1>
          </div>
        </div>
      </section> <!-- #breadcrumb -->

      <section id="api" class="row">
        <div class="container">
          <div class="col-md-2 col-md-offset-1">
            <div id="sticky-anchor"></div>
            <ul class="nav nav-pills nav-stacked">
              <li><a href="/html/about.html">关于我们</a></li>
              <li><a href="/html/for-retail.html">零售应用</a></li>
              <li><a href="#">API文档</a></li>
                <li class="submenu"><a href="#" >入门</a></li>
                <li class="submenu"><a href="/html/api-Tutorials.html">教程</a></li>
                  <li class="submenu-2"><a href="/html/api-Distance.html"  >距离</a></li>
                  <li class="submenu-2"><a href="/html/api-Proximity.html" class="active">接近</a></li>
                  <li class="submenu-2"><a href="/html/api-Notification.html">通知</a></li>
                 <li class="submenu"><a href="#">iOS的SDK</a></li>
                <li class="submenu"><a href="#">Android 的 SDK</a></li>
                <li class="submenu"><a href="#">API参考</a></li>
            </ul>
          </div>
          <div class="col-md-8 content">
            <h2>介绍</h2>
              <p>
                邻近的演示应用程序需要的距离演示的功能到一个新的水平，不仅能够监控距离，但也使用这方面的知识，为他们提供高度相关的上下文信息，从而丰富用户的体验。
                 </p>
              <p>
              具体而言，在接近的演示应用程序的用户显示有关一个人参观一家鞋店，有一个值得欢迎的消息，介绍了一个特定的鞋子收藏，和特定双鞋的细节开始的消息。  
            </p>
              <div class="row screens">
                <div class="col-md-4">
                  <img src="/statics/blueu/images/proximity1.png" class="img-responsive" alt="">
                </div>
                <div class="col-md-4">
                  <img src="/statics/blueu/images/proximity2.png" class="img-responsive" alt="">
                </div>
                <div class="col-md-4">
                  <img src="/statics/blueu/images/proximity3.png" class="img-responsive" alt="">
                </div>
              </div>
            <h2>它是如何工作的</h2>
              <p>
                这是可能的，因为周围的信标中的区域被逻辑地划分为3“区”：“直接”，“近”和“远”，同样地它们在远处的应用程序可视化的屏幕上。 每当用户跨越它们之间的边界，它们的上下文改变和有意义的信息是合适的。   </p>
              <p>
                类似于其他演示应用程序，信标广播其ID和接收手机连续监测RSSI（接收信号强度指示），但不是显示它在一个连续的信号的强度，或者，手机检查其范围的信号属于。 该应用程序，这要归功于其内部设置，解决了哪个区（直接，或近或远）特定的RSSI电平属于。
                  </p>
              <p>
                每当用户进入或离开一个区域中的事件被触发时，它是用来在屏幕上显示一个消息。 另外，请记住，这是完全有可能的“进入”和“离开”事件进行区分。  </p>
              <p>
                得益于区域和事件，它很容易让开发人员开始使用Estimote信标，使他们的应用程序的详细背景和相关的最终用户。    </p>
            <h2>该怎么办呢</h2>
              <p>重新接近的演示是很简单的。 让我们通过这个演示应用程序的一些关键要素。</p>
              <p>首先，请确保您添加的CoreBluetooth.framework和CoreLocation.framework到您的项目，以及libEstimoteSDK7.a，它包含在演示项目。</p>
              <pre class=" line-numbers language-clike"><code class=" language-clike">
<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>viewDidLoad
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span>super viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true"> // Do any additional setup after loading the view, typically from a nib.
</span>
   <span class="token comment" spellcheck="true"> /////////////////////////////////////////////////////////////
</span>   <span class="token comment" spellcheck="true"> // setup Estimote beacon manager
</span>
   <span class="token comment" spellcheck="true"> // craete manager instance
</span>    self<span class="token punctuation">.</span>beaconManager <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ESTBeaconManager alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    self<span class="token punctuation">.</span>beaconManager<span class="token punctuation">.</span>delegate <span class="token operator">=</span> self<span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> // create sample region object (you can additionaly pass major / minor values)
</span>    ESTBeaconRegion<span class="token operator">*</span> region <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ESTBeaconRegion alloc<span class="token punctuation">]</span> initRegionWithIdentifier<span class="token punctuation">:</span>@<span class="token string">"EstimoteSampleRegion"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true"> // start looking for estimtoe beacons in region
</span>   <span class="token comment" spellcheck="true"> // when beacon ranged beaconManager:didRangeBeacons:inRegion: invoked
</span>    <span class="token punctuation">[</span>self<span class="token punctuation">.</span>beaconManager startRangingBeaconsInRegion<span class="token punctuation">:</span>region<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code>
              </pre>
              <p> 
              第一步是使用<span class="syntax italic">ESTBeaconManager</span>类来创建Estimote灯塔管理器对象并设置委托对象。 我们还调用<span class="syntax italic">startRangingBeaconsInRegion:</span> 方法来开始寻找那些与基本 <span class="syntax italic">ESTBeaconRegion</span>对象所描述的Estimote信标。
              </p>
              <pre class=" line-numbers language-clike"><code class=" language-clike">
<span class="token operator">-</span><span class="token punctuation">(</span>void<span class="token punctuation">)</span>beaconManager<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconManager <span class="token operator">*</span><span class="token punctuation">)</span>manager
     didRangeBeacons<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray <span class="token operator">*</span><span class="token punctuation">)</span>beacons
            inRegion<span class="token punctuation">:</span><span class="token punctuation">(</span>ESTBeaconRegion <span class="token operator">*</span><span class="token punctuation">)</span>region
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span>beacons count<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
       <span class="token comment" spellcheck="true"> // beacon array is sorted based on distance
</span>       <span class="token comment" spellcheck="true"> // closest beacon is the first one
</span>        ESTBeacon<span class="token operator">*</span> closestBeacon <span class="token operator">=</span> <span class="token punctuation">[</span>beacons objectAtIndex<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

       <span class="token comment" spellcheck="true"> // calculate and set new y position
</span>        switch <span class="token punctuation">(</span>closestBeacon<span class="token punctuation">.</span>ibeacon<span class="token punctuation">.</span>proximity<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            case CLProximityUnknown<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>distanceLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"Unknown region"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            case CLProximityImmediate<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>distanceLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"Immediate region"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            case CLProximityNear<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>distanceLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"Near region"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            case CLProximityFar<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>distanceLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"Far region"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>

            default<span class="token punctuation">:</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code>
              </pre>
              <p> 
             每一次信标是由<span class="syntax italic">ESTBeaconManager</span>对象范围，我们选择第一个<span class="syntax italic">ESTBeacon</span>对象（所以一个是最近的），并从它验证的距离。 每 <span class="syntax italic">ESBeacon</span>对象包含引用与定义的距离财产原<span class="syntax italic">CLBeacon</span> 对象。 使用CoreLocation框架常数，我们可以验证的4个区的航标能够英寸之一

              </p>

              <p>
                您可以从GitHub上下载完整的项目
              </p>

              <a href="https://github.com/Estimote/iOS-SDK" class="btn btn-primary btn-lg btn-api">下载源代码</a>
            <div class="row apps">
              <div class="col-md-4 apps-tut">
                <img src="/statics/blueu/images/icon1.png" alt="">
                <h3><a href="#">距离演示应用程序</a></h3>
                <p>可视化的灯塔和电话之间的距离</p>
              </div>
         
              <div class="col-md-4 apps-tut">
                <img src="/statics/blueu/images/icon3.png" alt="">
                <h3><a href="#">通知演示应用程序</a></h3>
                <p>在离开一个区域发送推送通知</p>
              </div>
            </div>
          </div>
        </div>
      </section> <!-- #api -->

     <object type="text/x-scriptlet" width="100%" height="333px"  data="footer.html"></object>
      <!-- #footer -->
    </div> <!-- #wrapper -->
  <!-- sticky sidebar navigation -->
  <script type="text/javascript">
    function sticky_relocate() {
      var window_top = $(window).scrollTop();
      var div_top = $('#sticky-anchor').offset().top;

      if (window_top > div_top) {
          $('#api .nav').addClass('stick');
      } else {
          $('#api .nav').removeClass('stick');
      }
    }
    $(function () {
        $(window).scroll(sticky_relocate);
        sticky_relocate();
    });
  </script>
</body></html>