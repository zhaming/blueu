YUI.add("squarespace-cart-utils",function(a){var e,b,c;a.namespace("Squarespace.CartUtils");a.Squarespace.CartUtils={initializeAddToCartButtons:function(){var d=a.Squarespace.Commerce.isExpressCheckout(),b=!1;a.all(".sqs-add-to-cart-button").each(function(c){var h=c.one(".sqs-add-to-cart-button-inner");h.plug(a.Squarespace.Animations.Scalable,{duration:0.2});d&&"Add To Cart"===c.getData("original-label")&&(h.setContent("Purchase"),c.setData("original-label","Purchase"));c.hasClass("use-form")&&(b=
!0)},this);b&&!c&&a.Squarespace.CartUtils._getAdditionalFieldsFormTemplateSchema(function(a){c=a},this);e||(e=a.one("body").delegate("click",a.Squarespace.CartUtils._addCartEntry,".sqs-add-to-cart-button",this))},_addCartEntry:function(d){var b=d.currentTarget;if(!b.get("parentNode").hasClass("cart-added")){var c=function(d){(new a.Squarespace.Widgets.ResponsiveAlert).show("Unable to "+(a.Squarespace.Commerce.isExpressCheckout()?"Purchase":"Add")+" Item",d)};d=function(a){var d="Please select the ",
b=a.length;if(1==b)d+=a[0]+" option.";else if(2==b)d+=a[0]+" and "+a[1]+" options.";else for(var c=0;c<b;c++)d=c==b-1?d+("and "+a[c]+" options."):d+(a[c]+", ");return d};var h=b.getAttribute("data-item-id"),e=b.getAttribute("data-collection-id"),m,u,n=a.one(b.get("parentNode").siblings(".product-variants").item(0));if(a.Lang.isValue(n)){var r=JSON.parse(n.getAttribute("data-unselected-options")),s=r.length,l=n.getAttribute("data-selected-variant"),n=n.getAttribute("data-variant-in-stock"),l=l?JSON.parse(l):
null,n=n?!0:!1;if(0<s){c(d(r));return}if(l)if(n)m=l;else{c("Sorry, we do not have enough of that item available.");return}else{c("Sorry, that item variant is unavailable. Please select another variant.");return}}if(d=b.get("parentNode").siblings(".product-quantity-input").item(0))if(u=a.one(d).one("input").get("value"),!a.Lang.isNumber(Number(u))){c("Quantity must be a number.");return}b.hasClass("use-form")?a.Squarespace.CartUtils._openAdditionalFieldsForm(b,function(d){a.Squarespace.CartUtils._goToCheckoutOrAddToCart(b,
h,e,m,u,d,c)},this):a.Squarespace.CartUtils._goToCheckoutOrAddToCart(b,h,e,m,u,null,c)}},_goToCheckoutOrAddToCart:function(d,b,c,h,e,m,u){a.Squarespace.CartUtils._setButtonStateAdding(d);a.Squarespace.Commerce.isExpressCheckout()&&a.Squarespace.Singletons.ShoppingCart.hasEntry(b,h)?a.Squarespace.Commerce.goToCheckoutPage():a.Squarespace.Singletons.ShoppingCart.addEntry(b,c,h,e,m,function(b){d.one(".sqs-add-to-cart-button-inner");b?(u(b),a.later(1E3,this,function(){a.Squarespace.CartUtils._setButtonStateIdle(d)})):
a.Squarespace.Commerce.isExpressCheckout()?a.Squarespace.Commerce.goToCheckoutPage():a.later(1E3,this,function(){a.Squarespace.CartUtils._setButtonStateAdded(d);a.later(2E3,this,function(){a.Squarespace.CartUtils._setButtonStateIdle(d)})})},this)},_setButtonStateAdding:function(d){var b=d.one(".sqs-add-to-cart-button-inner");b.once("hidden",function(){b.empty();d.addClass("cart-adding");(new a.Squarespace.Spinner({size:20,color:"light",render:b})).spin();b.append('<div class="status-text">Adding...</div>');
b.show()},this);b.hide()},_setButtonStateAdded:function(a){var b=a.one(".sqs-add-to-cart-button-inner");b.empty();a.addClass("cart-added");b.append('<div class="status-text">Added!</div>')},_setButtonStateIdle:function(a){var b=a.one(".sqs-add-to-cart-button-inner");b.once("hidden",function(){b.empty();a.removeClass("cart-adding");a.removeClass("cart-added");b.setContent(a.getData("original-label"));b.show()},this);b.hide()},_openAdditionalFieldsForm:function(d,g,f){b||(b=new a.Squarespace.Widgets.FormLightbox({render:a.one("body")}));
var h=new a.Squarespace.Widgets.AsyncForm({form:a.JSON.parse(d.getData("form")),formTemplate:c,formSubmitButtonText:d.getData("original-label"),formName:"Product Details",showTitle:!0});h.on("submission",function(a){g&&g.call(f||this,a.data);b.close()},this);b.set("content",h);b.once("close",function(){h.destroy()},this);b.open()},_getAdditionalFieldsFormTemplateSchema:function(b,c){a.Data.get({url:"/api/template/GetTemplateSchema",data:{componentType:"widget",type:a.Squarespace.WidgetTypes.FORM},
success:function(a){b.call(c||this,a)}},this)}}},"1.0",{requires:"base node json squarespace-enum squarespace-commerce-utils squarespace-responsive-confirmation-dialog squarespace-form-lightbox squarespace-async-form squarespace-animations squarespace-spinner".split(" ")});
YUI.add("squarespace-commerce",function(a){Squarespace.onInitialize(a,function(){a.Squarespace.ProductUtils.initializeVariantDropdowns();a.Squarespace.CartUtils.initializeAddToCartButtons();if(!Static.SQUARESPACE_CONTEXT.hideShoppingCart&&!a.Squarespace.Commerce.isExpressCheckout()&&!a.Lang.isValue(a.one(".sqs-custom-cart"))){var e=a.one(".sqs-cart-dropzone");a.Lang.isNull(e)&&(e=a.Node.create('<div class="absolute-cart-box"></div>'),a.one("body").append(e));new a.Squarespace.Widgets.PillShoppingCart({model:a.Squarespace.Singletons.ShoppingCart,
useLightCart:Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.useLightCart,render:e})}a.Lang.isValue(a.one(".sqs-custom-cart"))&&(new a.Squarespace.Widgets.TemplateIntegratedShoppingCart({model:a.Squarespace.Singletons.ShoppingCart,srcNode:a.one(".sqs-custom-cart")})).render();a.Lang.isNull(a.Cookie.get("CART"))?a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible"):a.Squarespace.Singletons.ShoppingCart.load(function(){a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility",
"visible")},this)})},"1.0",{requires:"event-base-ie squarespace-pill-shopping-cart squarespace-template-integrated-shopping-cart squarespace-full-page-shopping-cart squarespace-product-utils squarespace-cart-utils squarespace-donate-form-billing squarespace-donate-form".split(" ")});
YUI.add("squarespace-full-page-shopping-cart-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["full-page-shopping-cart.html"]=a(function(a,b,g,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(g,a.helpers);return'<div class="loading-spinner"></div>\n\n<h2>Shopping Cart</h2>\n\n<div class="cart-container">\n\n  <table>\n\n    <thead> \n      <tr>\n        <td class="item">Item</td>\n        <td></td>\n        <td class="quantity">Quantity</td>\n        <td class="price">Price</td>\n        <td></td>\n      </tr>\n    </thead>\n\n    <tbody></tbody>\n\n  </table>\n\n  <div class="subtotal">\n    <span class="label">Subtotal</span>\n    <span class="price"></span>\n  </div>\n\n  <div class="checkout">\n    <div class="checkout-button sqs-system-button sqs-editable-button">CHECKOUT</div>\n  </div>\n\n</div>\n\n<div class="empty-message">\n  You have nothing in your shopping cart.&nbsp;\n  <a href="/">Continue Shopping</a>\n</div>\n'})})();
a.Handlebars.registerPartial("full-page-shopping-cart.html".replace("/","."),e.templates["full-page-shopping-cart.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("widget-parent",function(a,e){function b(b){this.publish("addChild",{defaultTargetOnly:!0,defaultFn:this._defAddChildFn});this.publish("removeChild",{defaultTargetOnly:!0,defaultFn:this._defRemoveChildFn});this._items=[];var c,f;b&&b.children&&(c=b.children,f=this.after("initializedChange",function(a){this._add(c);f.detach()}));a.after(this._renderChildren,this,"renderUI");a.after(this._bindUIParent,this,"bindUI");this.after("selectionChange",this._afterSelectionChange);this.after("selectedChange",
this._afterParentSelectedChange);this.after("activeDescendantChange",this._afterActiveDescendantChange);this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild);this.after("*:focusedChange",this._updateActiveDescendant)}var c=a.Lang;b.ATTRS={defaultChildType:{setter:function(b){var g=a.Attribute.INVALID_VALUE;b=c.isString(b)?a[b]:b;c.isFunction(b)&&(g=b);return g}},activeDescendant:{readOnly:!0},multiple:{value:!1,validator:c.isBoolean,writeOnce:!0,getter:function(a){var b=this.get("root");
return b&&b!=this?b.get("multiple"):a}},selection:{readOnly:!0,setter:"_setSelection",getter:function(b){return c.isArray(b)?new a.ArrayList(b):b}},selected:{setter:function(b){var c=b;1===b&&!this.get("multiple")&&(c=a.Attribute.INVALID_VALUE);return c}}};b.prototype={destructor:function(){this._destroyChildren()},_afterDestroyChild:function(a){a=a.target;a.get("parent")==this&&a.remove()},_afterSelectionChange:function(b){if(b.target==this&&b.src!=this){b=b.newVal;var c=0;b&&(c=2,a.instanceOf(b,
a.ArrayList)&&b.size()===this.size()&&(c=1));this.set("selected",c,{src:this})}},_afterActiveDescendantChange:function(a){var b=this.get("parent");b&&b._set("activeDescendant",a.newVal)},_afterParentSelectedChange:function(a){var b=a.newVal;this==a.target&&(a.src!=this&&(0===b||1===b))&&this.each(function(a){a.set("selected",b,{src:this})},this)},_setSelection:function(a){var b=null,c;this.get("multiple")&&!this.isEmpty()?(c=[],this.each(function(a){0<a.get("selected")&&c.push(a)}),0<c.length&&(b=
c)):0<a.get("selected")&&(b=a);return b},_updateSelection:function(a){var b=a.target,c;b.get("parent")==this&&("_updateSelection"!=a.src&&(c=this.get("selection"),!this.get("multiple")&&(c&&0<a.newVal)&&c.set("selected",0,{src:"_updateSelection"}),this._set("selection",b)),a.src==this&&this._set("selection",b,{src:this}))},_updateActiveDescendant:function(a){this._set("activeDescendant",!0===a.newVal?a.target:null)},_createChild:function(b){var g=this.get("defaultChildType"),f=b.childType||b.type,
h,e,m;f&&(e=c.isString(f)?a[f]:f);c.isFunction(e)?m=e:g&&(m=g);m?h=new m(b):a.error("Could not create a child instance because its constructor is either undefined or invalid.");return h},_defAddChildFn:function(b){var g=b.child,f=b.index,h=this._items;g.get("parent")&&g.remove();c.isNumber(f)?h.splice(f,0,g):h.push(g);g._set("parent",this);g.addTarget(this);b.index=g.get("index");g.after("selectedChange",a.bind(this._updateSelection,this))},_defRemoveChildFn:function(a){var b=a.child;a=a.index;var c=
this._items;b.get("focused")&&b.blur();b.get("selected")&&b.set("selected",0);c.splice(a,1);b.removeTarget(this);b._oldParent=b.get("parent");b._set("parent",null)},_add:function(b,g){var f,h,e;c.isArray(b)?(f=[],a.each(b,function(a,b){(h=this._add(a,g+b))&&f.push(h)},this),0<f.length&&(e=f)):(h=a.instanceOf(b,a.Widget)?b:this._createChild(b))&&this.fire("addChild",{child:h,index:g})&&(e=h);return e},add:function(){var b=this._add.apply(this,arguments),b=b?c.isArray(b)?b:[b]:[];return new a.ArrayList(b)},
remove:function(a){var b=this._items[a],c;b&&this.fire("removeChild",{child:b,index:a})&&(c=b);return c},removeAll:function(){var b=[],c;a.each(this._items.concat(),function(){(c=this.remove(0))&&b.push(c)},this);return new a.ArrayList(b)},selectChild:function(a){this.item(a).set("selected",1)},selectAll:function(){this.set("selected",1)},deselectAll:function(){this.set("selected",0)},_uiAddChild:function(a,b){a.render(b);var c=a.get("boundingBox"),h;(h=a.next(!1))&&h.get("rendered")?(h=h.get("boundingBox"),
h.insert(c,"before")):(h=a.previous(!1))&&h.get("rendered")?(h=h.get("boundingBox"),h.insert(c,"after")):b.contains(c)||b.appendChild(c)},_uiRemoveChild:function(a){a.get("boundingBox").remove()},_afterAddChild:function(a){a=a.child;a.get("parent")==this&&this._uiAddChild(a,this._childrenContainer)},_afterRemoveChild:function(a){a=a.child;a._oldParent==this&&this._uiRemoveChild(a)},_bindUIParent:function(){this.after("addChild",this._afterAddChild);this.after("removeChild",this._afterRemoveChild)},
_renderChildren:function(){var a=this._childrenContainer||this.get("contentBox");this._childrenContainer=a;this.each(function(b){b.render(a)})},_destroyChildren:function(){this._hDestroyChild.detach();this.each(function(a){a.destroy()})}};a.augment(b,a.ArrayList);a.WidgetParent=b},"3.10.1",{requires:["arraylist","base-build","widget"]});
YUI.add("squarespace-async-form",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.AsyncForm=a.Base.create("AsyncForm",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._typeGetterMap={date:this._getMultiFieldVal,name:this._getMultiFieldVal,time:this._getMultiFieldVal,address:this._getMultiFieldVal,checkbox:this._getOptionFieldVal,likert:this._getOptionFieldVal,radio:this._getRadioFieldVal,select:this._getSelectVal,phone:this._getPhoneFieldVal};this._typeSetterMap=
{date:this._setMultiFieldVal,name:this._setMultiFieldVal,time:this._setMultiFieldVal,address:this._setMultiFieldVal,checkbox:this._setOptionFieldVal,likert:this._setOptionFieldVal,radio:this._setRadioFieldVal,select:this._setSelectVal,phone:this._setPhoneFieldVal};this._defaultGetter=this._getSingleFieldVal;this._defaultSetter=this._setSingleFieldVal},renderUI:function(){e.superclass.renderUI.call(this);var b={showTitle:this.get("showTitle"),preventSubmit:!0,hideSubmitButton:this.get("hideSubmitButton"),
formName:this.get("formName"),formFields:a.Array.map(this.get("form").fields,a.JSON.parse),formSubmitButtonText:this.get("formSubmitButtonText")},c=this.get("contentBox"),d=this.get("formTemplate").html,b=a.JSONTemplate.evaluateJsonTemplate(d,b);c.append(b);this._formEl=c.one("form");this._setFormData()},bindUI:function(){this._formEl.on("submit",function(a){this._clearErrors();var c=this._validateForm(),d=c.errors;0<d.length?this._renderErrors(d):this.fire("submission",{data:c.data});a.halt()},this);
this.after("formDataChange",this._setFormData,this)},setStateSaving:function(){var a=this.get("contentBox");a.addClass("saving");a.one('input[type="submit"]').set("value","Saving...")},setStateEditing:function(){var a=this.get("contentBox"),c=this.get("formSubmitButtonText");a.one('input[type="submit"]').set("value",c);a.removeClass("saving")},getLocalValidationErrors:function(){return this._validateForm().errors},fetchValidatedFormSubmission:function(b,c,d){a.Data.get({url:"/api/rest/forms/validate/"+
b,data:{form:JSON.stringify(this.getFormData())},success:c,failure:d})},getFormData:function(){return this._validateForm().data},_renderErrors:function(b){a.Array.each(b,function(a){this.get("contentBox").one("#"+a.fieldId).one(".title").insert('<div class="field-error">'+a.message+"</div>","before")},this)},_clearErrors:function(){this.get("contentBox").all(".field-error").remove(!0)},_validateForm:function(){var a={},c=[];this._formEl.all(".form-item").each(function(d){var g=d.getAttribute("id");
if(d=this._getFieldData(d)){var f=d.error;f&&c.push({fieldId:g,message:f});a[g]=d.data}},this);return{data:a,errors:c}},_getFieldData:function(b){var c=b.get("className").split(" "),d=null,g,f=!1;a.Array.each(c,function(b){a.Object.hasKey(this._typeGetterMap,b)?(d=b,g=this._typeGetterMap[d]):"section"===b&&(f=!0)},this);if(!f)return null===d&&(g=this._defaultGetter),g.call(this,b)},_getSingleFieldVal:function(b){var c=b.one(".field-element");if(c){var d=c.get("value"),g,d=!a.Lang.isValue(d)||""===
d;b.hasClass("required")&&d&&(g="Required");return{data:c.get("value"),error:g}}return null},_getMultiFieldVal:function(b){var c=[],d,g=!1;b.all(".field-element").each(function(b){var d=b.get("value");a.Lang.isValue(d)&&""!==d&&(g=!0);c.push(b.get("value"))});b.hasClass("required")&&!g&&(d="Required");return{data:c,error:d}},_getOptionFieldVal:function(a){var c=[],d;a.all("input").each(function(a){a.get("checked")&&c.push(a.get("value"))},this);a.hasClass("required")&&0===c.length&&(d="Required");
return{data:c,error:d}},_getRadioFieldVal:function(b){var c,d;b.all("input").each(function(a){a.get("checked")&&(c=a.get("value"))},this);b.hasClass("required")&&!a.Lang.isValue(c)&&(d="Required");return{data:c,error:d}},_getSelectVal:function(b){var c=b.one("select").get("value"),d,g=!a.Lang.isValue(c)||""===c;b.hasClass("required")&&g&&(d="Required");return{data:c,error:d}},_getPhoneFieldVal:function(a){a=this._getMultiFieldVal(a);var c=a.data;c&&3===c.length&&c.unshift("");return a},_setFormData:function(){var b=
this.get("formData");null!==b&&this._formEl.all(".form-item").each(function(c){var d=b[c.getAttribute("id")];if(d){var g=d.value,d=a.Lang.isValue(g)?g:d.values||[];this._setFieldData(c,d)}},this)},_setFieldData:function(b,c){var d=b.get("className").split(" "),g=null,f,h;a.Array.each(d,function(d){a.Object.hasKey(this._typeSetterMap,d)?(g=d,f=this._typeSetterMap[g]):"section"===d&&(h=!0);if(!h)return null===g&&(f=this._defaultSetter),f.call(this,b,c)},this)},_setSingleFieldVal:function(a,c){var d=
a.one(".field-element");if(d)return d.set("value",c)},_setMultiFieldVal:function(a,c){a.all(".field-element").each(function(a){a.set("value",c[a.getData("title")])})},_setOptionFieldVal:function(a,c){a.all("input").each(function(a){-1!==c.indexOf(a.get("value"))&&a.setAttribute("checked","checked")},this)},_setRadioFieldVal:function(a,c){a.all("input").each(function(a){a.get("value")===c&&a.setAttribute("checked","checked")},this)},_setSelectVal:function(a,c){a.one("select").set("value",c)},_setPhoneFieldVal:function(a,
c){3===a.all(".field").size()&&4===c.length&&c.shift();this._setMultiFieldVal(a,c)}},{CSS_PREFIX:"sqs-async-form",ATTRS:{form:{value:{fields:[]},validator:a.Lang.isValue},formTemplate:{value:null},hideSubmitButton:{value:!1},formSubmitButtonText:{value:"Add to Cart"},formName:{value:"My Form Name"},formData:{value:null},showTitle:{value:!0}}})},"1.0",{requires:["base","node","json","squarespace-ss-widget","squarespace-json-template"]});
YUI.add("squarespace-full-page-shopping-cart-item-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["full-page-shopping-cart-item.html"]=a(function(a,b,g,f,h){this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);h=h||{};a='<tr>\n\n  <td class="item">\n    <div class="item-image"></div>\n  </td>\n\n  <td class="item-desc"></td>\n\n  <td class="quantity">\n    ';if((b=g["if"].call(b,b.isPhysicalProduct,{hash:{},inverse:this.program(3,function(a,
b){return'\n      <div class="not-applicable">N/A</div>\n    '},h),fn:this.program(1,function(a,b){return'\n      <input />\n      <div class="cooldown">&bull;</div>\n    '},h),data:h}))||0===b)a+=b;return a+'\n  </td>\n\n  <td class="price"></td>\n\n  <td class="remove">\n    <div class="remove-item"></div>\n  </td>\n\n</tr>\n'})})();a.Handlebars.registerPartial("full-page-shopping-cart-item.html".replace("/","."),e.templates["full-page-shopping-cart-item.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-hb-date-options",function(a){a.Handlebars.registerHelper("month-options",function(e){var b="";a.Array.each("January February March April May June July August September October November December".split(" "),function(c,d){var g=d+1,f=g.toString();1===f.length&&(f="0"+f);a.Lang.isUndefined(e.hash["short"])&&(f+=" "+c);b+='<option value="'+g+'">'+f+"</option>"});return new a.Handlebars.SafeString(b)});a.Handlebars.registerHelper("year-options",function(e){e=(new Date).getFullYear();
for(var b="",c=e;c<e+10;c++)b+='<option value="'+c+'">'+c+"</option>";return new a.Handlebars.SafeString(b)},this)},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-checkout-form-billing",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutFormBilling=a.Base.create("checkoutFormBilling",a.Squarespace.Widgets.CheckoutFormAddress,[],{bindUI:function(){e.superclass.bindUI.call(this);if(this.get("optionalFields.showMailingList"))this.get("contentBox").one("#join-mailing-list").on("click",this._toggleJoinMailingList,this)},getValues:function(){var a=e.superclass.getValues.call(this);this.get("optionalFields.showMailingList")&&
(a.joinMailingList="true"===this.get("contentBox").one('input[name="joinMailingList"]').get("value"));return a},setValues:function(b){e.superclass.setValues.call(this,b);if(this.get("optionalFields.showMailingList")&&a.Object.hasKey(b,"joinMailingList")){var c=this.get("contentBox"),d=c.one("#join-mailing-list");d.toggleClass("active",b.joinMailingList);c.one('input[name="joinMailingList"]').set("value",d.hasClass("active"))}},getLocationForShipping:function(){var a=this.getValues();return{country:a.billingCountry,
state:a.billingState,zip:a.billingZip}},_shouldValidateAddress:function(){return!0},_toggleJoinMailingList:function(){var a=this.get("contentBox"),c=a.one("#join-mailing-list");c.toggleClass("active");a.one('input[name="joinMailingList"]').set("value",c.hasClass("active"))}},{CSS_PREFIX:"sqs-checkout-form-billing",HANDLEBARS_TEMPLATE:"checkout-form-billing.html",HANDLEBARS_SAVED_FIELDSET_TEMPLATE:"checkout-saved-billing.html",ATTRS:{strings:{noteFieldLabel:{value:"Note / Special Instructions"}},optionalFields:{value:{showMailingList:!0,
showNoteField:!0}},shouldValidateAddress:{value:!0}}})},"1.0",{requires:"base node squarespace-localities squarespace-checkout-form-address squarespace-models-shopping-cart squarespace-checkout-form-billing-template squarespace-checkout-saved-billing-template".split(" ")});
YUI.add("squarespace-checkout-form-payment-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-form-payment.html"]=a(function(a,b,g,f,h){this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);h=h||{};var e,m=this.escapeExpression;f=g.helperMissing;a={hash:{"short":"true"},data:h};a='<div class="title">\n  <a class="edit-button">edit</a>\n\n  <div class="cards">\n    <img src="/universal/images-v6/checkout/discover.png" />\n    <img src="/universal/images-v6/checkout/mastercard.png" />\n    <img src="/universal/images-v6/checkout/visa.png" />\n    <img src="/universal/images-v6/checkout/americanexpress.png" />\n  </div>\n\n  Secure Payment\n</div>\n\n<fieldset>\n\n\n  \x3c!-- Credit Card --\x3e\n  <div id="credit-card">\n\n\n    \x3c!-- Name --\x3e\n    <input name="cardHolderName" type="hidden" />\n\n\n    \x3c!-- Card Number --\x3e\n    <div id="card-number" data-label="Card Number" class="field required">\n      <label>Card Number</label>\n      <input class="field-element" type="text" size="20"\n          autocomplete="off" placeholder="Credit Card Number" value="" type="number" />\n    </div>\n\n\n    \x3c!-- Expiry/CVC --\x3e\n    <div id="expiry-cvc">\n\n      \x3c!-- Expiry Month --\x3e\n      <div id="card-expiry-month" data-label="Exp. Mo." class="field required">\n        <label>Exp. Mo.</label>\n        <select class="field-element" value="04" >\n          '+
(m((e=g["month-options"]||b["month-options"],e?e.call(b,a):f.call(b,"month-options",a)))+'\n        </select>\n      </div>\n\n      \x3c!-- Expiry Year --\x3e\n      <div id="card-expiry-year" data-label="Exp. Yr." class="field required">\n        <label>Exp. Yr.</label>\n        <select class="field-element" value="2015" >\n          ');(f=g["year-options"])?f=f.call(b,{hash:{},data:h}):(f=b["year-options"],f="function"===typeof f?f.apply(b):f);a+=m(f)+'\n        </select>\n      </div>\n\n      \x3c!-- CVC --\x3e\n      <div id="cvc" data-label="CVC" class="field required">\n        <label>CVC</label>\n        <input class="field-element" type="text" size="4" autocomplete="off"\n            placeholder="CVC" value="" />\n      </div>\n\n    </div>\n\n  </div> \x3c!-- end #credit-card --\x3e\n\n\n  \x3c!-- Secure payment conditions --\x3e\n  <div id="comfort">\n    All transactions are secure and encrypted, and we never store your credit card information. Payments are\n    processed through Stripe. Payment information is also governed by\n    <a target="_blank" href="https://stripe.com/privacy">Stripe\'s privacy policy</a>.\n  </div>\n\n\n  \x3c!-- Place Order --\x3e\n  <div id="place-order">\n    <div id="place-order-button" class="button continue-button" value="Place Order" >'+
m((e=(e=b.strings,null==e||!1===e?e:e.submitText),"function"===typeof e?e.apply(b):e))+'</div>\n    <div class="trust"><img src="/universal/images-v6/checkout/truste.png" /></div>\n\n    \x3c!-- hidden field to convey the Stripe Token so we may submit the charge --\x3e\n    <input name="stripeToken" type="hidden" />\n\n    \x3c!-- optional hidden fields --\x3e\n    ';if((f=g.each.call(b,b.optionalHiddenFields,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c;return c=""+('\n      <input name="'+
m("function"===typeof a?a.apply(a):a)+'" type="hidden" />\n    ')},h),data:h}))||0===f)a+=f;return a+="\n\n  </div>\n\n</fieldset>\n"})})();a.Handlebars.registerPartial("checkout-form-payment.html".replace("/","."),e.templates["checkout-form-payment.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-full-page-shopping-cart",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.FullPageShoppingCart=a.Base.create("fullPageShoppingCart",a.Squarespace.Widgets.TableShoppingCart,[],{renderUI:function(){e.superclass.renderUI.call(this);this._spinner=new a.Squarespace.Spinner({render:this.get("contentBox").one(".loading-spinner"),size:50,color:"dark"})},bindUI:function(){e.superclass.bindUI.call(this);var b=this.get("model");this.get("contentBox").one(".checkout-button").on("click",
a.Squarespace.Commerce.goToCheckoutPage,this);b.on("recalculate-start",this._setLoadingState,this);b.on("recalculate-end",this._setLoadedState,this)},_setLoadingState:function(){var a=this.get("contentBox");a.all("input").setAttribute("disabled",!0);a.addClass("loading-cart")},_setLoadedState:function(){var b=this.get("contentBox");a.later(350,this,function(){b.all("input").removeAttribute("disabled");b.removeClass("loading-cart")})}},{CSS_PREFIX:"sqs-fullpage-shopping-cart",HANDLEBARS_TEMPLATE:"full-page-shopping-cart.html",
HANDLEBARS_ITEM_TEMPLATE:"full-page-shopping-cart-item.html"})},"1.0",{requires:"base node cookie squarespace-commerce-utils squarespace-table-shopping-cart squarespace-full-page-shopping-cart-template squarespace-full-page-shopping-cart-item-template squarespace-spinner".split(" ")});
YUI.add("button-core",function(a,e){function b(a){this.initializer(a)}var c=a.ClassNameManager.getClassName;b.prototype={TEMPLATE:"<button/>",constructor:b,initializer:function(a){this._initNode(a);this._initAttributes(a);this._renderUI(a)},_initNode:function(b){this._host=b.host?a.one(b.host):a.Node.create(this.TEMPLATE)},_initAttributes:function(c){var g=this._host,g=g.one("."+b.CLASS_NAMES.LABEL)||g;c.label=c.label||this._getLabel(g);a.AttributeCore.call(this,b.ATTRS,c)},_renderUI:function(){var a=
this.getNode(),c=a.get("tagName").toLowerCase();a.addClass(b.CLASS_NAMES.BUTTON);"button"!==c&&"input"!==c&&a.set("role","button")},enable:function(){this.set("disabled",!1)},disable:function(){this.set("disabled",!0)},getNode:function(){return this._host},_getLabel:function(){var a=this.getNode();return"input"===a.get("tagName").toLowerCase()?a.get("value"):(a.one("."+b.CLASS_NAMES.LABEL)||a).get("text")},_uiSetLabel:function(a){var c=this.getNode();"input"===c.get("tagName").toLowerCase()?c.set("value",
a):(c.one("."+b.CLASS_NAMES.LABEL)||c).set("text",a);return a},_uiSetDisabled:function(a){var c=this.getNode();c.getDOMNode().disabled=a;c.toggleClass(b.CLASS_NAMES.DISABLED,a);return a}};a.mix(b.prototype,a.AttributeCore.prototype);b.ATTRS={label:{setter:"_uiSetLabel",getter:"_getLabel",lazyAdd:!1},disabled:{value:!1,setter:"_uiSetDisabled",lazyAdd:!1}};b.NAME="button";b.CLASS_NAMES={BUTTON:c("button"),DISABLED:c("button","disabled"),SELECTED:c("button","selected"),LABEL:c("button","label")};b.ARIA_STATES=
{PRESSED:"aria-pressed",CHECKED:"aria-checked"};b.ARIA_ROLES={BUTTON:"button",CHECKBOX:"checkbox",TOGGLE:"toggle"};a.ButtonCore=b},"3.10.1",{requires:["attribute-core","classnamemanager","node-base"]});
YUI.add("squarespace-models-shopping-cart",function(a){a.namespace("Squarespace.Models");a.namespace("Squarespace.Singletons");var e=a.Squarespace.Models.ShoppingCart=a.Base.create("shoppingCart",a.Model,[],{initializer:function(){this.publish("item-added",{emitFacade:!0});this.publish("loaded",{emitFacade:!0});this.publish("recalculate-start",{emitFacade:!0});this.publish("recalculate-end",{emitFacade:!0});this._isRecalculating=this._readInProgress=!1;this.on("recalculate-start",function(){this._isRecalculating=
!0},this);this.on("recalculate-end",function(){this._isRecalculating=!1},this)},toJSON:function(){var b=e.superclass.toJSON.call(this),c=b.created;a.Lang.isNull(c)||(b.created=c.getTime());return b},sync:function(a,c,d){switch(a){case "read":this._read(c,d)}},load:function(b,c,d){"function"===typeof b&&(c=b,b={});this._readinProgress?this.after("load",c,d):a.Model.prototype.load.call(this,b,c?a.bind(c,d||this):null)},isRecalculating:function(){return this._isRecalculating},hasEntry:function(b,c){return a.Array.reduce(this.get("entries"),
!1,function(d,g){return a.Lang.isValue(c)?d||g.itemId==b&&c.sku==g.chosenVariant.sku:d||g.itemId==b})},addEntry:function(b,c,d,g,f,e,k){a.Data.post({url:"/api/open/AddToCart",data:{itemId:b,collectionId:c,variantSku:a.Lang.isValue(d)?d.sku:null,quantity:g,additionalFields:f},success:function(b){a.Squarespace.CommerceAnalytics.itemAdded(b);this.setAttrs(b.shoppingCart);this.fire("item-added");e&&e.call(k||this,null,b.newlyAdded)},failure:function(b){b.crumbFail&&(a.Squarespace.Utils.areCookiesEnabled()?
b.error="Your session has expired. Please reload the page and try again.":b.error="Please enable cookies in your browser, reload the page, and try again.");e&&e.call(k||this,b.error,null)}},this)},update:function(b,c,d,g,f){var e=b.chosenVariant;this.fire("recalculate-start");a.Data.post({url:"/api/open/UpdateCart",data:{entryId:b.id,itemId:b.itemId,chosenVariantSku:a.Lang.isValue(e)?e.sku:null,quantity:c,additionalFields:d},success:function(b){this.fire("recalculate-end");0===c?a.Squarespace.CommerceAnalytics.itemRemoved(b):
a.Squarespace.CommerceAnalytics.itemModified(b);this.setAttrs(b.shoppingCart);g&&g.call(f||this,null,b.updatedEntry)},failure:function(a){this.fire("recalculate-end");g&&g.call(f||this,a.error,null)}},this)},updateShippingLocation:function(b,c,d){this.fire("recalculate-start");a.Data.post({url:"/api/open/UpdateCartShippingLocation",data:b,success:function(a){this.fire("recalculate-end");this.setAttrs(a.shoppingCart);c&&c.call(d||this,null)},failure:function(a){this.fire("recalculate-end");c&&c.call(d||
this,a.error,null)}},this)},updateShippingMethod:function(b,c,d){this.fire("recalculate-start");a.Data.post({url:"/api/open/UpdateCartShippingMethod",data:{chosenShippingOption:b},success:function(a){this.fire("recalculate-end");this.setAttrs(a.shoppingCart);c&&c.call(d||this,null)},failure:function(a){this.fire("recalculate-end");c&&c.call(d||this,a.error,null)}},this)},addCoupon:function(b,c,d){a.Data.post({url:"/api/open/AddCouponToCart",data:{promoCode:b},success:function(a){this.setAttrs(a.shoppingCart);
c&&c.call(d||this,null)},failure:function(a){c&&c.call(d||this,a.error,null)}},this)},removeCoupon:function(b,c,d){a.Data.post({url:"/api/open/RemoveCouponFromCart",data:{id:b},success:function(a){this.setAttrs(a.shoppingCart);c&&c.call(d||this,null)},failure:function(a){c&&c.call(d||this,a.error,null)}},this)},_read:function(b,c){this._readInProgress=!0;this.fire("loading");a.Data.get({url:"/api/open/GetShoppingCart",success:function(a){this.fire("loaded");this._readInProgress=!1;c(null,a.shoppingCart)},
failure:function(a){this.fire("loaded");this._readInProgress=!1;c(a.error,null)}},this)}},{ATTRS:{id:{validator:a.Lang.isString},websiteId:{validator:a.Lang.isString},orderId:{validator:a.Lang.isString},created:{getter:function(b){return a.Lang.isValue(b)?new Date(b):null},setter:function(b){return a.Lang.isDate(b)?b.getTime():b},validator:a.Lang.isNumber},isPurchased:{value:!1,validator:a.Lang.isBoolean},entries:{value:[],validator:a.Lang.isArray},shippingOptions:{value:[],validator:a.Lang.isArray},
selectedShippingOption:{validator:a.Lang.isObject},shippingLocation:{validator:a.Lang.isObject},applicableTaxRules:{value:[],validator:a.Lang.isArray},coupons:{value:[],validator:a.Lang.isArray},validCoupons:{value:[],validator:a.Lang.isArray},invalidCoupons:{value:[],validator:a.Lang.isArray},subtotalCents:{validator:a.Lang.isNumber},taxCents:{validator:a.Lang.isNumber},shippingCostCents:{validator:a.Lang.isNumber},discountCents:{validator:a.Lang.isNumber},grandTotalCents:{validator:a.Lang.isNumber},
totalQuantity:{validator:a.Lang.isNumber},hasDigital:{validator:a.Lang.isBoolean},purelyDigital:{validator:a.Lang.isBoolean},requiresShipping:{validator:a.Lang.isBoolean}}});a.Squarespace.Singletons.ShoppingCart=new e},"1.0",{requires:["base","model","squarespace-commerce-utils","squarespace-commerce-analytics"]});
YUI.add("squarespace-checkout-form-shipping",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutFormShipping=a.Base.create("checkoutFormShipping",a.Squarespace.Widgets.CheckoutFormAddress,[],{initializer:function(){this._shippingOptionsWidget=new a.Squarespace.Widgets.CheckoutFormShippingOptions({model:this.get("model")})},destructor:function(){this._shippingOptionsWidget.destroy()},renderUI:function(){e.superclass.renderUI.call(this);this._shippingOptionsWidget.render(this.get("contentBox").one("#shipping-options"))},
bindUI:function(){e.superclass.bindUI.call(this);this.get("contentBox").one("#ship-to-billing").on("click",this._toggleShipToBilling,this)},syncUI:function(){e.superclass.syncUI.call(this);var a=this.get("boundingBox");this.get("contentBox");var c=this.get("model");0===c.get("shippingOptions").length?this._setEmptyShippingOptionsState():this._setNotEmptyShippingOptionsState();a.toggleClass("no-shipping",!c.get("requiresShipping"))},_onContinue:function(){if(this.get("model").isRecalculating())return!1;
e.superclass._onContinue.call(this)},getValues:function(){var a=e.superclass.getValues.call(this),c=this._shippingOptionsWidget.getSelectedOption();c&&(a.selectedShippingOption=c.value,a.shippingMethodTitle=c.title,a.shippingMethodCost=c.cost);a.shipToBilling="true"===this.get("contentBox").one('input[name="shipToBilling"]').get("value");a.requiresShipping=this.get("model").get("requiresShipping");return a},setValues:function(b){e.superclass.setValues.call(this,b);a.Object.hasKey(b,"selectedShippingOption")&&
this._shippingOptionsWidget.setSelectedOption(b.selectedShippingOption);if(a.Object.hasKey(b,"shipToBilling")){var c=this.get("contentBox"),d=c.one("#ship-to-billing"),g=c.one("#shipping-address-wrapper");b=b.shipToBilling;d.toggleClass("active",b);c.one('input[name="shipToBilling"]').set("value",b);g.toggleClass("hidden",b);this.set("useAddressForShipping",!b)}},_getLocalErrors:function(){if(!this.get("model").get("requiresShipping"))return[];var b=this._shippingOptionsWidget.getSelectedOption();
return!a.Lang.isValue(b)?[{type:this.getProperty("FIELD_ERROR_TYPES").CUSTOM,message:"You must select a valid shipping option."}]:this.get("useAddressForShipping")?e.superclass._getLocalErrors.call(this):[]},getLocationForShipping:function(){var a=this.getValues();return{country:a.shippingCountry,state:a.shippingState,zip:a.shippingZip}},_toggleShipToBilling:function(a){var c=this.get("contentBox"),d=a.target;a=c.one("#shipping-address-wrapper");d.toggleClass("active");c.one('input[name="shipToBilling"]').set("value",
d.hasClass("active"));c=d.hasClass("active");a.toggleClass("hidden",c);this.set("useAddressForShipping",!c)},_shouldValidateAddress:function(){return this.get("useAddressForShipping")},_setEmptyShippingOptionsState:function(){var a=this.get("contentBox");a.addClass("empty-shipping-options");a.one(".continue-button").setContent("Configure Shipping Options");this._configureShippingOptionsHandler&&this._configureShippingOptionsHandler.detach();this._configureShippingOptionsHandler=this.before("continue-clicked",
function(a){a.preventDefault();window.location=Static.SQUARESPACE_CONTEXT.website.authenticUrl+"/config#module=commerce&commerce-subpanelName=shipping"})},_setNotEmptyShippingOptionsState:function(){var a=this.get("contentBox");a.removeClass("empty-shipping-options");a.one(".continue-button").setContent("Continue");this._configureShippingOptionsHandler&&this._configureShippingOptionsHandler.detach()}},{CSS_PREFIX:"sqs-checkout-form-shipping",HANDLEBARS_TEMPLATE:"checkout-form-shipping.html",HANDLEBARS_SAVED_FIELDSET_TEMPLATE:"checkout-saved-shipping.html"})},
"1.0",{requires:"base node squarespace-checkout-form-address squarespace-models-shopping-cart squarespace-hb-money-string squarespace-checkout-form-shipping-options squarespace-checkout-form-shipping-template squarespace-checkout-saved-shipping-template".split(" ")});
YUI.add("squarespace-contribution-summary",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.ContributionSummary=a.Base.create("ContributionSummary",a.Squarespace.Widgets.CheckoutFormSection,[],{_getHBTemplateContext:function(){var b=e.superclass._getHBTemplateContext.call(this);a.Array.each(b.donatePage.suggestedContributions,function(b){b.amountDollars=a.Squarespace.Commerce.moneyFormat(b.amountCents)});return b},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("contentBox");
a.delegate("click",function(c){"other"==c.target.get("value")&&a.one('input[name="contributionAmount"]').select()},'input[type="radio"]')},renderUI:function(){e.superclass.renderUI.call(this);var b=this.get("contentBox");b.one('input[name="contributionAmount"]').plug(a.Squarespace.Plugin.MoneyFormatter);var c=this.get("donatePage").suggestedContributions;a.Lang.isValue(c)&&0<c.length?b.one(".prompt").setContent("Select an amount:"):b.one(".prompt").setContent("Enter an amount:")},_getLocalErrors:function(){var a=
e.superclass._getLocalErrors.call(this);return 50>this.getDonationAmountCents()?[{type:this.getProperty("FIELD_ERROR_TYPES").CUSTOM,message:"You must donate at least 0.50"}]:a},getDonationAmountCents:function(){var b=this.get("contentBox"),c=this.get("donatePage").suggestedContributions;return a.Lang.isValue(c)&&0<c.length?(c=this._getCheckedRadio(),!a.Lang.isValue(c)?0:"other"==c.get("value")?b.one('input[name="contributionAmount"]').moneyFormatterPlugin.get("data"):c.get("value")):b.one('input[name="contributionAmount"]').moneyFormatterPlugin.get("data")},
_getCheckedRadio:function(){var a;this.get("contentBox").one(".contribution-option-list").all('input[type="radio"]').each(function(c){c.get("checked")&&(a=c)});return a},getValues:function(){return{donationAmount:a.Squarespace.Commerce.moneyString(this.getDonationAmountCents()),title:this.get("donatePage").title}}},{CSS_PREFIX:"sqs-contribution-summary",HANDLEBARS_TEMPLATE:"contribution-summary.html",HANDLEBARS_SAVED_FIELDSET_TEMPLATE:"checkout-saved-contribution.html",ATTRS:{strings:{value:{prompt:null}},
donatePage:{value:null}}})},"1.0",{requires:"base node squarespace-commerce-utils squarespace-ui-templates squarespace-hb-money-string squarespace-checkout-form-section squarespace-contribution-summary-template squarespace-panel squarespace-plugin-money-formatter squarespace-async-form squarespace-checkout-saved-contribution-template".split(" ")});
YUI.add("squarespace-donate-form",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.DonateForm=a.Base.create("DonateForm",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.get("countriesAllowed");this._contributionSection=new a.Squarespace.Widgets.ContributionSummary({donatePage:this.get("donatePage"),state:"editing"});this._customFormSection=new a.Squarespace.Widgets.CheckoutCustomForm({state:"incomplete",customForm:this.get("donatePage").customForm,formId:this.get("donatePage").customFormId});
this._billingSection=new a.Squarespace.Widgets.DonateFormBilling({state:"incomplete",optionalFields:{showNoteField:!1,showMailingList:this.get("optionalFields").showMailingList}});this._paymentSection=new a.Squarespace.Widgets.CheckoutFormPayment({strings:{submitText:"Donate",pendingText:"Submitting ..."},state:"incomplete",optionalHiddenFields:["donationAmountCents","donatePageId"]})},destructor:function(){this._contributionSection.destroy();this._customFormSection.destroy();this._billingSection.destroy();
this._paymentSection.destroy()},renderUI:function(){e.superclass.renderUI.call(this);var b;b=a.Data.addCrumb("/api/rest/commerce/contributions");b=a.Node.create('<form action="'+b+'" method="POST"></form>');b.append(a.Node.create('<input type="hidden" name="customFormSubmission" />'));this._contributionSection.render(a.one("#summary-wrapper"));this._customFormSection.render(a.one("#summary-wrapper"));this._billingSection.render(b);this._paymentSection.render(b);this._customFormSection.setStateIncomplete();
this._billingSection.setStateIncomplete();this._paymentSection.setStateIncomplete();this.get("contentBox").append(b)},bindUI:function(){e.superclass.bindUI.call(this);var a=this._contributionSection,c=this._customFormSection,d=this._billingSection,g=this._paymentSection;a.on("continue",function(){a.setStateComplete();this._hasCustomForm()?c.setStateEditing():d.setStateEditing()},this);a.on("edit",function(){a.setStateEditing();c.setStateIncomplete();d.setStateIncomplete();g.setStateIncomplete()},
this);c.on("continue",function(){c.setStateComplete();d.setStateEditing()},this);c.on("edit",function(){c.setStateEditing();d.setStateIncomplete();g.setStateIncomplete()},this);d.on("continue",function(){d.setStateComplete();var a=d.getValues();g.setValues({cardHolderName:a.billingFirstName+" "+a.billingLastName});g.setStateEditing()},this);d.on("edit",function(){d.setStateEditing();g.setStateIncomplete()},this);g.on("continue",this._submit,this)},lock:function(){var a=this.get("contentBox");this.fire("lock");
a.addClass("submitting");this._paymentSection.lock()},unlock:function(){var a=this.get("contentBox");this.fire("unlock");a.removeClass("submitting");this._paymentSection.unlock()},_hasCustomForm:function(){return a.Lang.isValue(this.get("donatePage").customForm)},_submit:function(){if(this._validateSubmit()){this.lock();this.get("contentBox");this._contributionSection.getDonationAmountCents();var b=this._billingSection.getValues(),c=this._paymentSection.getValues();Stripe.createToken({name:c.cardHolderName,
number:c.cardNumber,cvc:c.cvc,exp_month:c.cardExpiryMonth,exp_year:c.cardExpiryYear,address_line1:b.billingAddress1,address_line2:b.billingAddress2,address_state:b.billingState,address_country:b.billingCountry,address_zip:b.billingZip},a.bind(this._stripeResponseHandler,this))}},_validateSubmit:function(){if(!this._contributionSection.validate())return!1;var b=this._paymentSection.validate();return 0<b.length?(this._paymentSection.renderErrors(b),!1):50>this._contributionSection.getDonationAmountCents()?
((new a.Squarespace.Alert).show("Cannot Complete Donation","Your contribution must be at least "+a.Squarespace.Commerce.currencySymbol()+"0.50 to continue."),!1):Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.storeState===a.Squarespace.StoreStates.NOT_CONNECTED?((new a.Squarespace.Alert).show("Payments Not Connected","This site has not connected a payment gateway. Transactions are disabled and you cannot complete this donation."),!1):!0},_stripeResponseHandler:function(a,c){var d=c.error,
g=this.get("contentBox").one("form"),f=this._contributionSection;d?(this.unlock(),g=this._paymentSection,g.renderErrors([{type:g.getProperty("FIELD_ERROR_TYPES").STRIPE,message:d.message}])):(this._paymentSection.setValues({stripeToken:c.id,donationAmountCents:f.getDonationAmountCents(),donatePageId:this.get("donatePage").id}),d=this._customFormSection.getCustomFormSubmission(),g.one('input[name="customFormSubmission"]').set("value",JSON.stringify(d)),g.submit())}},{CSS_PREFIX:"sqs-checkout-form",
ATTRS:{countriesAllowed:{value:[]},optionalFields:{value:null},donatePage:{value:null}}})},"1.0",{requires:"base node squarespace-ss-widget squarespace-util squarespace-commerce-utils squarespace-ui-base squarespace-checkout-form-custom-form squarespace-checkout-form-billing squarespace-checkout-form-shipping squarespace-checkout-form-payment squarespace-contribution-summary".split(" ")});
YUI.add("squarespace-donate-form-billing",function(a){a.namespace("Squarespace.Widgets");a.Squarespace.Widgets.DonateFormBilling=a.Base.create("DonateFormBilling",a.Squarespace.Widgets.CheckoutFormBilling,[],{_populateCountrySelect:function(){var e="",b=this.get("contentBox").one(".country select"),c=b.get("value"),d;a.Object.each(a.Squarespace.Localities.COUNTRY_OPTIONS,function(a){a=a.title;"Not Specified"!==a&&(a===c&&(d=c),e+=this._createOptionString(a))},this);b.setHTML(e);d?b.set("value",d):
b.set("value","United States");this._updateStateFieldForCountry()}},{ATTRS:{strings:{noteFieldLabel:"Message"},optionalFields:{value:null}}})},"1.0",{requires:["base","node","squarespace-localities","squarespace-checkout-form-billing"]});
YUI.add("squarespace-checkout-saved-contribution-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-saved-contribution.html"]=a(function(a,b,g,f,e){this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);e=e||{};var k=this.escapeExpression;a='<div class="saved-fieldset">\n\n  You will donate ';(f=g.donationAmount)?f=f.call(b,{hash:{},data:e}):(f=b.donationAmount,f="function"===typeof f?f.apply(b):f);if(f||0===f)a+=f;a+=" to ";(f=g.title)?
f=f.call(b,{hash:{},data:e}):(f=b.title,f="function"===typeof f?f.apply(b):f);return a+=k(f)+"\n\n</div>\n"})})();a.Handlebars.registerPartial("checkout-saved-contribution.html".replace("/","."),e.templates["checkout-saved-contribution.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-checkout-form-custom-form-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-form-custom-form.html"]=a(function(a,b,g,f,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(g,a.helpers);return'<div class="title">More<a class="edit-button">edit</a></div>\n\n<fieldset>\n\n  <div class="custom-form">\n  </div>\n\n  \x3c!-- Continue --\x3e\n  <div class="btn-container">\n    <div class="button continue-button">Continue</div>\n  </div>\n\n</fieldset>\n'})})();
a.Handlebars.registerPartial("checkout-form-custom-form.html".replace("/","."),e.templates["checkout-form-custom-form.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("widget-modality",function(a,e){function b(a){}var c=a.Lang.isBoolean,d=a.ClassNameManager.getClassName,g=function(){var b=a.config.doc,c=null,d;if(b.createElement&&(d=b.createElement("div"))&&d.style)if(d.style.position="fixed",d.style.top="10px",(b=b.body)&&b.appendChild&&b.removeChild)b.appendChild(d),c=10===d.offsetTop,b.removeChild(d);return c}(),f={modal:d("widget","modal"),mask:d("widget","mask")};b.ATTRS={maskNode:{getter:"_getMaskNode",readOnly:!0},modal:{value:!1,validator:c},focusOn:{valueFn:function(){return[{eventName:"clickoutside"},
{eventName:"focusoutside"}]},validator:a.Lang.isArray}};b.CLASSES=f;b._GET_MASK=function(){var b=a.one("."+f.mask),c=a.one("win");if(b)return b;b=a.Node.create("<div></div>").addClass(f.mask);g?b.setStyles({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",display:"block"}):b.setStyles({position:"absolute",width:c.get("winWidth")+"px",height:c.get("winHeight")+"px",top:"0",left:"0",display:"block"});return b};b.STACK=[];b.prototype={initializer:function(){a.after(this._renderUIModal,this,
"renderUI");a.after(this._syncUIModal,this,"syncUI");a.after(this._bindUIModal,this,"bindUI")},destructor:function(){this._uiSetHostVisibleModal(!1)},_uiHandlesModal:null,_renderUIModal:function(){var a=this.get("boundingBox");this._repositionMask(this);a.addClass(f.modal)},_bindUIModal:function(){this.after("visibleChange",this._afterHostVisibleChangeModal);this.after("zIndexChange",this._afterHostZIndexChangeModal);this.after("focusOnChange",this._afterFocusOnChange);if(!g||a.UA.ios&&5>a.UA.ios||
a.UA.android&&3>a.UA.android)a.one("win").on("scroll",this._resyncMask,this)},_syncUIModal:function(){this._uiSetHostVisibleModal(this.get("visible"));this._uiSetHostZIndexModal(this.get("zIndex"))},_focus:function(a){a=this.get("boundingBox");var b=a.get("tabIndex");a.set("tabIndex",0<=b?b:0);this.focus()},_blur:function(){this.blur()},_getMaskNode:function(){return b._GET_MASK()},_uiSetHostVisibleModal:function(c){var d=b.STACK,f=this.get("maskNode"),g=this.get("modal");c?(a.Array.each(d,function(a){a._detachUIHandlesModal();
a._blur()}),d.unshift(this),this._repositionMask(this),this._uiSetHostZIndexModal(this.get("zIndex")),g&&(f.show(),a.later(1,this,"_attachUIHandlesModal"),this._focus())):(c=a.Array.indexOf(d,this),0<=c&&d.splice(c,1),this._detachUIHandlesModal(),this._blur(),d.length?(d=d[0],this._repositionMask(d),d._uiSetHostZIndexModal(d.get("zIndex")),d.get("modal")&&(a.later(1,d,"_attachUIHandlesModal"),d._focus())):"block"===f.getStyle("display")&&f.hide())},_uiSetHostZIndexModal:function(a){this.get("modal")&&
this.get("maskNode").setStyle("zIndex",a||0)},_attachUIHandlesModal:function(){var c,d,f;if(!(this._uiHandlesModal||b.STACK[0]!==this)){var e=this.get("boundingBox"),n=this.get("maskNode"),r=this.get("focusOn"),s=a.bind(this._focus,this),l=[],p,t;p=0;for(t=r.length;p<t;p++)f=d=c=void 0,c=r[p].node,d=r[p].eventName,f=r[p].keyCode,!c&&!f&&d?l.push(e.on(d,s)):c&&!f&&d?l.push(c.on(d,s)):c&&f&&d?l.push(c.on(d,s,f)):a.Log('focusOn ATTR Error: The event with name "'+d+'" could not be attached.');g||l.push(a.one("win").on("scroll",
a.bind(function(a){n.setStyle("top",n.get("docScrollY"))},this)));this._uiHandlesModal=l}},_detachUIHandlesModal:function(){a.each(this._uiHandlesModal,function(a){a.detach()});this._uiHandlesModal=null},_afterHostVisibleChangeModal:function(a){this._uiSetHostVisibleModal(a.newVal)},_afterHostZIndexChangeModal:function(a){this._uiSetHostZIndexModal(a.newVal)},isNested:function(){return 1<b.STACK.length?!0:!1},_repositionMask:function(b){var c=this.get("modal"),d=b.get("modal"),f=this.get("maskNode");
if(c&&!d)f.remove(),this.fire("maskHide");else if(!c&&d||c&&d)f.remove(),this.fire("maskHide"),b=b.get("boundingBox"),b=b.get("parentNode")||a.one("body"),b.insert(f,b.get("firstChild")),this.fire("maskShow")},_resyncMask:function(a){var b=a.currentTarget;a=b.get("docScrollX");var c=b.get("docScrollY"),d=b.get("innerWidth")||b.get("winWidth"),b=b.get("innerHeight")||b.get("winHeight");this.get("maskNode").setStyles({top:c+"px",left:a+"px",width:d+"px",height:b+"px"})},_afterFocusOnChange:function(a){this._detachUIHandlesModal();
this.get("visible")&&this._attachUIHandlesModal()}};a.WidgetModality=b},"3.10.1",{requires:["base-build","event-outside","widget"],skinnable:!0});
YUI.add("squarespace-checkout-form-custom-form",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutCustomForm=a.Base.create("CheckoutCustomForm",a.Squarespace.Widgets.CheckoutFormSection,[],{renderUI:function(){e.superclass.renderUI.call(this);var b=this.get("contentBox");a.Data.get({url:"/api/template/GetTemplateSchema",data:{componentType:"widget",type:a.Squarespace.WidgetTypes.FORM},success:function(c){this._formWidget=new a.Squarespace.Widgets.AsyncForm({form:this.get("customForm"),
formTemplate:c,formSubmitButtonText:"Yeah",hideSubmitButton:!0,showTitle:!1});this._formWidget.render(b.one(".custom-form"))}},this)},syncUI:function(){e.superclass.syncUI.call(this);this.get("boundingBox").toggleClass("no-form",0===this.get("customForm").fields.length)},_renderSavedFieldset:function(){var b=this.getProperty("HANDLEBARS_SAVED_FIELDSET_TEMPLATE"),c=this.get("formId");this._formWidget.fetchValidatedFormSubmission(c,a.bind(function(c){var g=[];a.Object.each(c,function(b,c){g.push(a.Squarespace.Commerce.summaryFormFieldString(b))});
this.get("contentBox").append(a.Squarespace.UITemplates.render(b,{fields:g}))},this))},_getLocalErrors:function(){var b=this._formWidget.getLocalValidationErrors();return a.Lang.isValue(b)&&0<b.length?[{type:this.getProperty("FIELD_ERROR_TYPES").CUSTOM,message:"Required fields are missing. Please fill them in to continue."}]:[]},_fetchAsyncValidatedErrors:function(){return new a.Promise(a.bind(function(b){this._formWidget.fetchValidatedFormSubmission(this.get("formId"),function(){b([])},function(c){c=
a.Array.map(a.Object.values(c.errors),function(a){return{type:this.getProperty("FIELD_ERROR_TYPES").CUSTOM,message:a}},this);b(c)})},this))},getCustomFormSubmission:function(){return a.Lang.isValue(this._formWidget)?this._formWidget.getFormData():null}},{CSS_PREFIX:"sqs-checkout-form-custom-form",HANDLEBARS_TEMPLATE:"checkout-form-custom-form.html",HANDLEBARS_SAVED_FIELDSET_TEMPLATE:"checkout-saved-custom-form.html",ATTRS:{strings:{value:null},customForm:{value:{fields:[]},validator:a.Lang.isValue},
formId:{value:null}}})},"1.0",{requires:"base node squarespace-localities squarespace-util squarespace-checkout-form-section squarespace-checkout-saved-custom-form-template squarespace-checkout-form-custom-form-template".split(" ")});
YUI.add("squarespace-checkout-form-shipping-options-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-form-shipping-options.html"]=a(function(a,b,g,f,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(g,a.helpers);return'<div class="empty-message">\n  You cannot continue checkout because this store has not configured any\n  shipping options for your country.\n</div>\n\n<div class="warning-message zip-warning-message">\n  <img src="/universal/images-v6/dialog/tiny-alert.png" />Shipping methods require your zip/postal code to estimate.\n</div>\n\n<div class="warning-message zip-invalid-warning-message">\n  <img src="/universal/images-v6/dialog/tiny-alert.png" />The zip code you entered is not valid.\n</div>\n\n<div class="warning-message weight-missing-warning-message">\n  <img src="/universal/images-v6/dialog/tiny-alert.png" />All products in this cart are missing weight information.\n</div>\n\n<div class="warning-message service-unavailable-warning-message">\n  <img src="/universal/images-v6/dialog/tiny-alert.png" />A method is unavailable for some items due to size restrictions.\n</div>\n\n<div class="warning-message carrier-warning-message">\n  <img src="/universal/images-v6/dialog/tiny-alert.png" />Something went wrong reaching the shipping carrier for estimates.\n</div>\n\n<div class="loading-spinner"></div>\n<div class="options-container"></div>'})})();
a.Handlebars.registerPartial("checkout-form-shipping-options.html".replace("/","."),e.templates["checkout-form-shipping-options.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("widget-position-constrain",function(a,e){function b(b){this._posNode||a.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");a.after(this._bindUIPosConstrained,this,c)}var c="bindUI",d=a.Node,g;b.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}};g=b._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}};b.prototype={getConstrainedXY:function(a,b){b=b||this.get("constrain");var c=this._getRegion(!0===
b?null:b),d=this._posNode.get("region");return[this._constrain(a[0],"x",d,c),this._constrain(a[1],"y",d,c)]},constrain:function(a,b){var c,d;if(d=b||this.get("constrain"))c=a||this.get("xy"),d=this.getConstrainedXY(c,d),(d[0]!==c[0]||d[1]!==c[1])&&this.set("xy",d,{constrained:!0})},_setConstrain:function(a){return!0===a?a:d.one(a)},_constrain:function(a,b,c,d){if(d){this.get("preventOverlap")&&(a=this._preventOverlap(a,b,c,d));var g="x"==b;b=g?d.width:d.height;c=g?c.width:c.height;var e=g?d.left:
d.top;d=g?d.right-c:d.bottom-c;if(a<e||a>d)c<b?a<e?a=e:a>d&&(a=d):a=e}return a},_preventOverlap:function(a,b,c,d){var e=this.get("align"),n="x"===b,r,s,l,p,t;if(e&&e.points&&g[b][e.points.join("")]){if(b=this._getRegion(e.node))r=n?c.width:c.height,s=n?b.left:b.top,l=n?b.right:b.bottom,p=n?b.left-d.left:b.top-d.top,t=n?d.right-b.right:d.bottom-b.bottom;a>s?t<r&&p>r&&(a=s-r):p<r&&t>r&&(a=l)}return a},_bindUIPosConstrained:function(){this.after("constrainChange",this._afterConstrainChange);this._enableConstraints(this.get("constrain"))},
_afterConstrainChange:function(a){this._enableConstraints(a.newVal)},_enableConstraints:function(a){a?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on("constrain|xyChange",this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(a){a.constrained||(a.newVal=this.getConstrainedXY(a.newVal))},_getRegion:function(a){var b;a?(a=d.one(a))&&(b=a.get("region")):b=this._posNode.get("viewportRegion");return b}};a.WidgetPositionConstrain=
b},"3.10.1",{requires:["widget-position"]});
YUI.add("squarespace-responsive-confirmation-dialog",function(a){a.namespace("Squarespace.Widgets");a.Squarespace.Widgets.ResponsiveConfirmationDialog=a.Base.create("responsiveConfirmationDialog",a.Squarespace.Widgets.SSWidget,[],{isMobile:function(){return a.one(document).get("width")<=this.get("maxWidth")}},{ATTRS:{maxWidth:{value:700}}});a.Squarespace.Widgets.ResponsiveAlert=a.Base.create("responsiveAlert",a.Squarespace.Widgets.ResponsiveConfirmationDialog,[],{initializer:function(e){this._normalDialog=
new a.Squarespace.Alert(e)},renderUI:function(){a.Squarespace.Widgets.ResponsiveAlert.superclass.renderUI.call(this)},show:function(a,b,c){this.isMobile()?alert(a+". "+b):this._normalDialog.show(a,b,c)}},{CSS_PREFIX:"sqs-responsive-alert",HANDLEBARS_TEMPLATE:"responsive-alert.html"})},"1.0",{requires:["node","base","anim","squarespace-ui-base","squarespace-ss-widget"]});
YUI.add("button-plugin",function(a,e){function b(){b.superclass.constructor.apply(this,arguments)}a.extend(b,a.ButtonCore,{_afterNodeGet:function(b){var d=this.constructor.ATTRS;if(d=d[b]&&d[b].getter&&this[d[b].getter])return new a.Do.AlterReturn("get "+b,d.call(this))},_afterNodeSet:function(a,b){var g=this.constructor.ATTRS;(g=g[a]&&g[a].setter&&this[g[a].setter])&&g.call(this,b)},_initNode:function(b){this._host=b=b.host;a.Do.after(this._afterNodeGet,b,"get",this);a.Do.after(this._afterNodeSet,
b,"set",this)},destroy:function(){}},{ATTRS:a.merge(a.ButtonCore.ATTRS),NAME:"buttonPlugin",NS:"button"});b.createNode=function(b,d){var g;if(b&&!d&&!b.nodeType&&!(b.getDOMNode||"string"===typeof b))d=b,b=d.srcNode;d=d||{};g=d.template||a.Plugin.Button.prototype.TEMPLATE;b=b||d.srcNode||a.DOM.create(g);return a.one(b).plug(a.Plugin.Button,d)};a.namespace("Plugin").Button=b},"3.10.1",{requires:["button-core","cssbutton","node-pluginhost"]});
YUI.add("squarespace-checkout-form-address",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutFormAddress=a.Base.create("checkoutFormAddress",a.Squarespace.Widgets.CheckoutFormSection,[],{renderUI:function(){e.superclass.renderUI.call(this);this._populateCountrySelect();this._populateStateSelect();this.get("useAddressForShipping")&&this.fire("shippingLocationChange")},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("contentBox");this.get("model");this.after("useAddressForShippingChange",
function(a){!0===a.newVal&&this.fire("shippingLocationChange")},this);a.one(".zip input").after("change",function(){this.get("useAddressForShipping")&&this.fire("shippingLocationChange")},this);a.one(".country select").after("change",function(){this.syncUI();this.get("useAddressForShipping")&&this.fire("shippingLocationChange")},this);a.one(".state .field-element").after("change",function(c){a.one("input");this.get("useAddressForShipping")&&this.fire("shippingLocationChange")},this)},syncUI:function(){e.superclass.syncUI.call(this);
var a=this.get("contentBox"),c=a.one(".country select").get("value");a.one(".state");a.one(".zip");a.all(".state, .zip").toggleClass("required","United States"===c||"Canada"===c);this._populateCountrySelect();this._populateStateSelect()},setValues:function(a){e.superclass.setValues.call(this,a);this.get("useAddressForShipping")&&this.fire("shippingLocationChange")},_validateField:function(b){var c=e.superclass._validateField.call(this,b);if(c)return c;var c=this.get("contentBox").one(".country select").get("value"),
d=/^\d{5}(-\d{4})?$/;if(b.hasClass("zip")&&"United States"===c&&!d.test(b.one(".field-element").get("value").trim())||b.hasClass("email")&&!a.Squarespace.EmailUtils.isValid(b.one(".field-element").get("value")))return{type:this.getProperty("FIELD_ERROR_TYPES").VALIDATION,field:b}},_fetchAsyncValidatedErrors:function(){var b=this.getLocationForShipping();return"United States"!==b.country?new a.Promise(function(a){a([])}):!this._shouldValidateAddress()?new a.Promise(function(a){a([])}):new a.Promise(a.bind(function(c,
d){a.Data.get({url:"/api/shipping/address/validate",headers:{"Content-Type":"application/json"},data:{state:b.state,zip:b.zip},success:a.bind(function(a){a.stateOwnsZip?c([]):c([{type:this.getProperty("FIELD_ERROR_TYPES").CUSTOM,message:"ZIP Code does not belong to that State."}])},this)})},this))},_shouldValidateAddress:function(){throw"Implementation missing for _shouldValidateAddress";},_populateStateSelect:function(){var b=this.get("contentBox"),c=b.one(".state select");if(c){var d=c.get("value"),
g,f="",b=b.one(".country select").get("value"),b=a.Squarespace.Localities.countryCodeFromName(b);a.Object.each(a.Squarespace.Localities.COUNTRIES_TO_STATES[b],function(a,b){b===d&&(g=d);f+=this._createOptionString(b)},this);c.setHTML(f);g&&c.set("value",g)}},_populateCountrySelect:function(){var b="",c=this.get("countriesAllowed"),d=this.get("model").get("requiresShipping"),g=this.get("contentBox").one(".country select"),f=g.get("value"),e;d?0===c.length?b+=this._createOptionString("United States"):
a.Array.each(c,function(a){a===f&&(e=f);b+=this._createOptionString(a)},this):a.Object.each(a.Squarespace.Localities.COUNTRY_OPTIONS,function(a){a=a.title;"Not Specified"!==a&&(a===f&&(e=f),b+=this._createOptionString(a))},this);g.setHTML(b);e?g.set("value",e):(!d||-1!==c.indexOf("United States"))&&g.set("value","United States");this._updateStateFieldForCountry()},_updateStateFieldForCountry:function(){var b=this.get("contentBox"),c=b.one(".country select"),b=b.one(".state .field-element"),c=c.get("value"),
c=a.Squarespace.Localities.countryCodeFromName(c),d;a.Lang.isUndefined(a.Squarespace.Localities.COUNTRIES_TO_STATES[c])?b.test("input")||(d=a.Node.create('<input class="field-element state" placeholder="State" name="'+b.getAttribute("name")+'" />')):b.test("select")||(d=a.Node.create('<select class="field-element state required" name="'+b.getAttribute("name")+'"></select>'));d&&(d.plug(a.Squarespace.Plugin.PulseWarn,{iterations:1,useClass:!0,targetClass:"warn",interval:1300}),b.replace(d))},_createOptionString:function(a){return'<option value="'+
a+'">'+a+"</option>"}},{CSS_PREFIX:"sqs-checkout-form-address",ATTRS:{strings:{value:null},countriesAllowed:{value:[]},getCountriesAllowed:{value:function(){}},useAddressForShipping:{value:!1}}})},"1.0",{requires:["base","node","squarespace-localities","squarespace-util","squarespace-checkout-form-section"]});
YUI.add("squarespace-hb-money-string",function(a){a.Handlebars.registerHelper("money-string",function(e,b){return new a.Handlebars.SafeString(a.Squarespace.Commerce.moneyString(e))})},"1.0",{requires:["handlebars-base","squarespace-commerce-utils"]});
YUI.add("squarespace-plugin-numeric-formatter",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.NumericFormatter=a.Base.create("numericFormatter",a.Plugin.Base,[],{initializer:function(){a.Lang.isNumber(Number(this.get("host").get("value")))?this.set("data",Number(this.get("host").get("value"))):this.set("data",0);this.set("displayString",this._format(this.get("data")));this._bindUI();this._syncUI()},_format:function(a){return this.get("displayFormatter")(a)},_syncUI:function(){var e=
this.get("data"),b=this.get("displayString");this.get("hasFocus")?this.get("host").set("value",0<e?b:""):(b="",a.Lang.isNull(this.get("prefixUnit"))||(b+=this.get("prefixUnit")),b+=this._format(e),a.Lang.isNull(this.get("postfixUnit"))||(b+=" "+this.get("postfixUnit")),this.get("host").set("value",b))},_bindUI:function(){var a=this.get("host");this.on("displayStringChange",this._syncUI,this);a.on("valuechange",this._onValueChange,this);a.on("keydown",this._onKeyDown,this);a.on("focus",this._onFocus,
this);a.on("blur",this._onBlur,this)},_onFocus:function(){this.set("hasFocus",!0);this._syncUI();setTimeout(a.bind(function(){this.get("host").select()},this),0)},_onBlur:function(){this.set("hasFocus",!1);this.set("displayString",this._format(this.get("data")))},_onKeyDown:function(a){var b;b=this.get("host").get("value");-1<[9,13,8,46,37,39].indexOf(a.keyCode)||(b=96<=a.keyCode&&105>=a.keyCode?String.fromCharCode(a.keyCode-48):190===a.keyCode||110===a.keyCode?-1<b.indexOf(".")?"x":".":String.fromCharCode(a.keyCode),
isFinite(Number(b))||"."===b||(a.stopPropagation(),a.preventDefault()))},_onValueChange:function(){var a=this.get("host").get("value"),a=this._transformToData(a);this.set("data",a)},_displayFormatter:function(a){return a},_transformToData:function(e){var b;a.Lang.isUndefined(this.get("prefixUnit"))||(b=String(e).replace(RegExp(this.get("prefixUnit"))));a.Lang.isUndefined(this.get("postfixUnit"))||(b=String(e).replace(RegExp(this.get("postfixUnit"))));return Number(b)}},{NS:"numericFormatterPlugin",
ATTRS:{hasFocus:{value:!1},data:{value:null},displayString:{value:null},prefixUnit:{value:null},postfixUnit:{value:null},displayFormatter:{value:function(a){return a}}}})},"1.0",{requires:["plugin","squarespace-util"]});
YUI.add("squarespace-plugin-integer-restrictor",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.IntegerRestrictor=a.Base.create("integerRestrictor",a.Plugin.Base,[],{initializer:function(){this.get("host").on("keydown",function(a){var b=a.keyCode;-1!==[9,13,8,46,37,39].indexOf(b)||(48<=b&&57>=b||96<=b&&105>=b)||a.halt(!0)},this)}},{NS:"integerRestrictorPlugin"})},"1.0",{requires:["base","plugin","squarespace-ui-base"]});
YUI.add("squarespace-checkout-saved-shipping-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-saved-shipping.html"]=a(function(a,b,g,f,e){function k(a,b){return"\n      <div>Address same as billing.</div>\n    "}function m(a,b){var c,d;c="\n      <div>\n        ";(d=g.shippingFirstName)?d=d.call(a,{hash:{},data:b}):(d=a.shippingFirstName,d=typeof d===l?d.apply(a):d);c+=p(d)+"&nbsp;";(d=g.shippingLastName)?d=d.call(a,{hash:{},data:b}):(d=
a.shippingLastName,d=typeof d===l?d.apply(a):d);c+=p(d)+"\n      </div>\n\n      <div>";(d=g.email)?d=d.call(a,{hash:{},data:b}):(d=a.email,d=typeof d===l?d.apply(a):d);c+=p(d)+"</div>\n\n      <div>";(d=g.shippingAddress1)?d=d.call(a,{hash:{},data:b}):(d=a.shippingAddress1,d=typeof d===l?d.apply(a):d);c+=p(d)+"</div>\n      <div>";(d=g.shippingAddress2)?d=d.call(a,{hash:{},data:b}):(d=a.shippingAddress2,d=typeof d===l?d.apply(a):d);c+=p(d)+"</div>\n\n      <div>\n        ";if((d=g["if"].call(a,a.shippingCity,
{hash:{},inverse:t.noop,fn:t.program(5,u,b),data:b}))||0===d)c+=d;if((d=g["if"].call(a,a.shippingState,{hash:{},inverse:t.noop,fn:t.program(7,n,b),data:b}))||0===d)c+=d;if((d=g["if"].call(a,a.shippingZip,{hash:{},inverse:t.noop,fn:t.program(9,r,b),data:b}))||0===d)c+=d;c+="\n      </div>\n\n      <div>";(d=g.shippingCountry)?d=d.call(a,{hash:{},data:b}):(d=a.shippingCountry,d=typeof d===l?d.apply(a):d);return c+=p(d)+"</div>\n    "}function u(a,b){var d;(d=g.shippingCity)?d=d.call(a,{hash:{},data:b}):
(d=a.shippingCity,d=typeof d===l?d.apply(a):d);return p(d)}function n(a,b){var d,c;d=",&nbsp;";(c=g.shippingState)?c=c.call(a,{hash:{},data:b}):(c=a.shippingState,c=typeof c===l?c.apply(a):c);return d+=p(c)}function r(a,b){var d,c;d="&nbsp;&nbsp;";(c=g.shippingZip)?c=c.call(a,{hash:{},data:b}):(c=a.shippingZip,c=typeof c===l?c.apply(a):c);return d+=p(c)}this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);e=e||{};var s,l="function",p=this.escapeExpression,t=this,y=g.helperMissing;f=g.blockHelperMissing;
a='<div class="saved-fieldset">\n\n  ';s={hash:{},inverse:t.noop,fn:t.program(1,function(a,b){var d,c,f;d="\n\n    <div>";(c=g.shippingMethodTitle)?c=c.call(a,{hash:{},data:b}):(c=a.shippingMethodTitle,c=typeof c===l?c.apply(a):c);d+=p(c)+" (";f={hash:{},data:b};d+=p((c=g["money-string"]||a["money-string"],c?c.call(a,a.shippingMethodCost,f):y.call(a,"money-string",a.shippingMethodCost,f)))+")</div>\n\n    ";if((c=g["if"].call(a,a.shipToBilling,{hash:{},inverse:t.program(4,m,b),fn:t.program(2,k,b),
data:b}))||0===c)d+=c;return d+"\n\n  "},e),data:e};(e=g.requiresShipping)?e=e.call(b,s):(e=b.requiresShipping,e=typeof e===l?e.apply(b):e);g.requiresShipping||(e=f.call(b,e,s));if(e||0===e)a+=e;return a+"\n\n</div>\n"})})();a.Handlebars.registerPartial("checkout-saved-shipping.html".replace("/","."),e.templates["checkout-saved-shipping.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-template-integrated-shopping-cart",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.TemplateIntegratedShoppingCart=a.Base.create("templateIntegratedShoppingCart",a.Squarespace.Widgets.SSWidget,[],{bindUI:function(){e.superclass.bindUI.call(this);this.get("model").on("change",this.syncUI,this)},syncUI:function(){e.superclass.syncUI.call(this);var b=this.get("quantityEl"),c=this.get("subtotalEl"),d=this.get("model"),g=d.get("totalQuantity"),d=d.get("subtotalCents");
a.Lang.isValue(b)&&b.setContent(100<g?"100+":g);a.Lang.isValue(c)&&c.setContent(a.Squarespace.Commerce.moneyString(d))}},{HTML_PARSER:{quantityEl:".sqs-cart-quantity",subtotalEl:".sqs-cart-subtotal"},ATTRS:{quantityEl:{value:null,validator:a.Squarespace.AttrValidators.isNode,writeOnce:"initOnly"},subtotalEl:{value:null,validator:a.Squarespace.AttrValidators.isNode,writeOnce:"initOnly"},model:{value:null,validator:function(b){return a.instanceOf(b,a.Squarespace.Models.ShoppingCart)}}}})},"1.0",{requires:["base",
"node","squarespace-attr-validators","squarespace-commerce-utils","squarespace-models-shopping-cart"]});
YUI.add("squarespace-checkout-form-shipping-options",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutFormShippingOptions=a.Base.create("checkoutFormShippingOptions",a.Squarespace.Widgets.SSWidget,[],{renderUI:function(){e.superclass.renderUI.call(this);this._spinner=new a.Squarespace.Spinner({render:this.get("contentBox").one(".loading-spinner"),size:1<this.get("model").get("shippingOptions").length?35:15,color:"dark"})},bindUI:function(){e.superclass.bindUI.call(this);
var a=this.get("model"),c=this.get("contentBox");a.on("change",this.syncUI,this);a.on("recalculate-start",this._setLoadingState,this);a.on("recalculate-end",this._setLoadedState,this);this.on("shippingCountryChange",this.syncUI,this);c.delegate("click",function(d){a.updateShippingMethod(d.target.get("value"))},"input",this)},syncUI:function(){e.superclass.syncUI.call(this);var b=this.get("contentBox"),c=this.get("model"),d=c.get("shippingOptions"),g=(c=c.get("selectedShippingOption"))?c.id:null,c=
this._getWarnings(),f=b.one(".options-container");b.all(".shipping-option").remove(!0);b.toggleClass("empty",0===d.length);b.toggleClass("show-zip-warning",c.zip);b.toggleClass("show-zip-invalid-warning",c.zipInvalid);b.toggleClass("show-weight-missing-warning",c.weightMissing);b.toggleClass("show-service-unavailable-warning",c.serviceUnavailable);b.toggleClass("show-carrier-warning",c.carrier);a.Array.each(d,function(b,d){var c=b.id,e=b.priceRequestStatus!=a.Squarespace.ShippingPriceRequestStatus.SUCCESS,
n;b.rateType==a.Squarespace.ShippingRateTypes.USPS&&(n=a.Squarespace.Commerce.speedStringForShippingRate(b.rateType,b.serviceType));e=a.Squarespace.UITemplates.renderAsNodeOrDocFrag(this.getProperty("HANDLEBARS_SHIPPING_OPT_TEMPLATE"),{name:b.name,id:c,computedCost:b.computedCost,speed:n,showAlert:e});(g&&c===g||!g&&0===d)&&e.one("input").set("checked",!0);f.append(e)},this)},getSelectedOption:function(){var b=this.get("contentBox").one("input:checked");if(a.Lang.isValue(b)&&b.get("disabled"))return null;
if(b)return{value:b.get("value"),title:b.get("title"),cost:Number(b.getData("computed-cost"))}},setSelectedOption:function(a){this.get("contentBox").all("input").each(function(c){c.set("checked",c.get("value")===a)},this)},_setLoadingState:function(){var a=this.get("contentBox"),c=1<this.get("model").get("shippingOptions").length;this._spinner.set("size",c?35:15);a.all("input").setAttribute("disabled",!0);a.toggleClass("multiple-options",c);a.addClass("loading-options")},_setLoadedState:function(){a.later(350,
this,function(){var a=this.get("contentBox");a.removeClass("loading-options");a.all(".shipping-option").each(function(a){a.hasClass("disabled")||a.one("input").removeAttribute("disabled")},this)})},_getWarnings:function(){var b=this.get("model").get("shippingOptions"),c=a.Array.reduce(b,!1,function(b,d){return b||d.priceRequestStatus===a.Squarespace.ShippingPriceRequestStatus.DESTINATION_MISSING}),d=a.Array.reduce(b,!1,function(b,d){return b||d.priceRequestStatus===a.Squarespace.ShippingPriceRequestStatus.DESTINATION_INVALID}),
g=a.Array.reduce(b,!1,function(b,d){return b||d.priceRequestStatus===a.Squarespace.ShippingPriceRequestStatus.WEIGHT_MISSING}),f=a.Array.reduce(b,!1,function(b,d){return b||d.priceRequestStatus===a.Squarespace.ShippingPriceRequestStatus.SERVICE_UNAVAILABLE_FOR_PACKAGE}),b=a.Array.reduce(b,!1,function(b,d){return b||d.priceRequestStatus===a.Squarespace.ShippingPriceRequestStatus.CARRIER_UNAVAILABLE});return{zip:c,zipInvalid:d,weightMissing:g,serviceUnavailable:f,carrier:b}}},{CSS_PREFIX:"sqs-checkout-form-shipping-options",
HANDLEBARS_TEMPLATE:"checkout-form-shipping-options.html",HANDLEBARS_SHIPPING_OPT_TEMPLATE:"checkout-form-shipping-options-option.html",ATTRS:{model:{value:null,validator:function(b){return a.instanceOf(b,a.Squarespace.Models.ShoppingCart)}}}})},"1.0",{requires:"base node squarespace-ss-widget squarespace-models-shopping-cart squarespace-checkout-form-shipping-options-template squarespace-checkout-form-shipping-options-option-template squarespace-hb-money-string squarespace-spinner".split(" ")});
YUI.add("squarespace-panel",function(a){a.namespace("Squarespace").Panel=a.Base.create("panel",a.Panel,[a.WidgetParent,a.WidgetChild],{initializer:function(e){this.config=e||{};e=this.get("animDuration");0<e&&this.plug(a.Plugin.WidgetAnim,{duration:e});this.before("render",this._initPointer,this);this.after(["pointerChange","typeChange","alignChange"],this._initPointer,this);this.after("render",this.afterRender,this);this.set("alignOn",[{node:a.one(a.config.doc.body),eventName:"resize"}])},afterRender:function(){this.config.position&&
this.get("boundingBox").setStyle("position",this.config.position);this.show();this.config.align&&this.config.align.offset&&this.setPanelOffset(this.config.align.offset)},_initPointer:function(){var e=this.get("align");this.get("type");if(this.get("pointer")&&!this.pointer){if(e&&e.node&&a.one(e.node)&&"inline"!==this.get("type")){var b=this.get("boundingBox"),c=a.one(e.node).get("region");this.pointer=new a.Overlay({constrain:b,align:e,zIndex:2,render:b});e=this.getAxis(this.pointer);e.horizontal?
this.pointer.set("height",c.height):e.vertical&&this.pointer.set("width",c.width);c=this.get("animDuration");0<this.get("animDuration")&&this.plug(a.Plugin.WidgetAnim,{duration:c});this.pointer.get("boundingBox").addClass(this.getClassName("pointer"));this.after("xyChange",this.pointerOffset,this);this.pointerOffset();this.pointer.show()}}else!this.get("pointer")&&this.pointer&&this.pointer.destroy()},getAxis:function(a){var b=a.get("align").points[0].toLowerCase(),c=a.get("align").points[1].toLowerCase();
a="b"===b[0];var d="r"===b[0]||"r"===b[1],g="b"===c[0],f="r"===c[0]||"r"===c[1],f="l"===c[0]||"l"===c[1]||f,c="t"===c[0]||g;return{horizontal:("l"===b[0]||"l"===b[1]||d)&&f,vertical:("t"===b[0]||a)&&c}},setPanelOffset:function(a){this.move(this.get("boundingBox").getX()+a[0],this.get("boundingBox").getY()+a[1])},pointerOffset:function(e){e=this.get("xy");var b=a.one(this.get("align.node")).get("region"),c=this.get("boundingBox"),d=this.pointer.get("boundingBox"),g=this.getAxis(this),f="";["top","left",
"right","bottom"].forEach(function(a){c.removeClass(this.getClassName(a));d.removeClass(this.getClassName("pointer",a))},this);g.horizontal?f=e[0]>b[0]?"left":"right":g.vertical&&(f=e[1]>b[1]?"top":"bottom");c.addClass(this.getClassName(f));d.addClass(this.getClassName("pointer",f));this.pointer.align();"left"===f||"right"===f?d.setStyles({left:"left"===f?0:null,right:"right"===f?0:null}):d.setStyles({top:"top"===f?0:null,bottom:"bottom"===f?0:null})},destructor:function(){this.pointer&&this.pointer.destroy()}},
{CSS_PREFIX:"sqs-panel",ATTRS:{render:{value:!0},controls:{value:[],validator:a.Lang.isArray},node:{},type:{value:["popover"],setter:function(a){a="string"===typeof a?[a]:a;var b="";a.forEach(function(a){b+=this.getClassName("type-"+a)},this);this.get("boundingBox").addClass(b);"inline"===a&&this.set("align",{node:null,points:[null,null]});return a}},align:{value:{node:null,points:["tl","tr"]},broadcast:1},animDuration:{value:0.5},buttons:{value:{}},width:{value:260},modal:{value:!1},pointer:{value:!0,
lazyAdd:!1},constrain:{value:null},preventOverlap:{value:!0},visible:{value:!1}}})},"0.2.0",{requires:"node panel overlay widget-anim widget-child widget-parent".split(" ")});
YUI.add("widget-autohide",function(a,e){function b(b){a.after(this._bindUIAutohide,this,c);a.after(this._syncUIAutohide,this,d);this.get(g)&&(this._bindUIAutohide(),this._syncUIAutohide())}var c="bindUI",d="syncUI",g="rendered";b.ATTRS={hideOn:{validator:a.Lang.isArray,valueFn:function(){return[{node:a.one("document"),eventName:"key",keyCode:"esc"}]}}};b.prototype={_uiHandlesAutohide:null,destructor:function(){this._detachUIHandlesAutohide()},_bindUIAutohide:function(){this.after("visibleChange",
this._afterHostVisibleChangeAutohide);this.after("hideOnChange",this._afterHideOnChange)},_syncUIAutohide:function(){this._uiSetHostVisibleAutohide(this.get("visible"))},_uiSetHostVisibleAutohide:function(b){b?a.later(1,this,"_attachUIHandlesAutohide"):this._detachUIHandlesAutohide()},_attachUIHandlesAutohide:function(){if(!this._uiHandlesAutohide){for(var b=this.get("boundingBox"),d=a.bind(this.hide,this),c=[],g=this.get("hideOn"),e=0,n=void 0,r=void 0,s=void 0;e<g.length;e++)n=g[e].node,r=g[e].eventName,
s=g[e].keyCode,!n&&!s&&r?c.push(b.on(r,d)):n&&!s&&r?c.push(n.on(r,d)):n&&(s&&r)&&c.push(n.on(r,d,s));this._uiHandlesAutohide=c}},_detachUIHandlesAutohide:function(){a.each(this._uiHandlesAutohide,function(a){a.detach()});this._uiHandlesAutohide=null},_afterHostVisibleChangeAutohide:function(a){this._uiSetHostVisibleAutohide(a.newVal)},_afterHideOnChange:function(a){this._detachUIHandlesAutohide();this.get("visible")&&this._attachUIHandlesAutohide()}};a.WidgetAutohide=b},"3.10.1",{requires:["base-build",
"event-key","event-outside","widget"]});
YUI.add("squarespace-json-template",function(a){function e(a){return a.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}function b(a,b){var d=n[a+b];void 0===d&&(d="("+e(a)+"\\S.*?"+e(b)+"\n?)",d=RegExp(d,"g"));return d}function c(a,b){var d=[{context:a,index:-1}];return{PushSection:function(a){if(void 0===a||null===a)return null;a="@"==a?d[d.length-1].context:d[d.length-1].context[a]||null;d.push({context:a,index:-1});return a},Pop:function(){d.pop()},next:function(){var a=d[d.length-1];-1==a.index&&
(a={context:null,index:0},d.push(a));var b=d[d.length-2].context;if(a.index==b.length)d.pop();else return a.context=b[a.index++],!0},_Undefined:function(a){return void 0===b?null:b},_LookUpStack:function(a){for(var b=d.length-1;;){var c=d[b];if("@index"==a){if(-1!=c.index)return c.index}else if(c=c.context,"object"===typeof c&&(c=c[a],void 0!==c))return c;b--;if(-1>=b)return this._Undefined(a)}},get:function(a){if("@"==a)return d[d.length-1].context;var b=a.split("."),c=this._LookUpStack(b[0]);if(1<
b.length)for(var g=1;g<b.length;g++){if(null===c)return"[JSONT: Can't resolve '"+a+"'.]";c=c[b[g]];if(void 0===c)return this._Undefined(b[g])}return c}}}function d(a,b,d){for(var c=0;c<a.length;c++){var g=a[c];if("string"==typeof g)d(g);else(0,g[0])(g[1],b,d)}}function g(a,b,d){var c;c=b.get(a.name);for(var g=0;g<a.formatters.length;g++){var f=a.formatters[g];c=(0,f[0])(c,b,f[1])}d(c)}function f(a,b,c){var g=b.PushSection(a.section_name),f=!1;g&&(f=!0);g&&0===g.length&&(f=!1);f?(d(a.Statements(),
b,c),b.Pop()):(b.Pop(),d(a.Statements("or"),b,c))}function h(a,b,c){for(var g=b.get("@"),f=0;f<a.clauses.length;f++){var e=a.clauses[f],l=e[1];if((0,e[0][0])(g,b,e[0][1])){d(l,b,c);break}}}function k(a,b,c){var g=b.PushSection(a.section_name);if(g&&0<g.length){var g=g.length-1,f=a.Statements();a=a.Statements("alternate");for(var e=0;void 0!==b.next();e++)d(f,b,c),e!=g&&d(a,b,c)}else d(a.Statements("or"),b,c);b.Pop()}function m(d,c){function e(b){if(b.startsWith(u)){var d=c.partials[b.substr(u.length)];
if(d)return[function(b,c,g){return a.JSONTemplate.evaluateJsonTemplate(d,b)},null];throw{name:"BadPartialInclude",message:b.substr(u)+" is not a valid partial. Remember, loops are not supported (a partial include cannot be included inside itself)."};}var g=p.lookup(b);if(!g[0])throw{name:"BadFormatter",message:b+" is not a valid formatter"};return g}function n(a){var b=m.lookup(a);if(!b[0])throw{name:"BadPredicate",message:a+" is not a valid predicate"};return b}var p=new l([r(a.JSONTemplate.DEFAULT_FORMATTERS),
s(a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS)]),m=l([r(a.JSONTemplate.DEFAULT_PREDICATES),s(a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES)]),F=c.format_char||"|";if(":"!=F&&"|"!=F)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};var B=c.meta||"{}",C=B.length;if(1==C%2)throw{name:"ConfigurationError",message:B+" has an odd number of metacharacters"};for(var G=B.substring(0,C/2),B=B.substring(C/2,C),C=b(G,B),w=t({}),z=[w],I=G.length,v,q,E=0;;){v=C.exec(d);if(null===
v)break;else q=v[0];v.index>E&&(E=d.slice(E,v.index),w.Append(E));E=C.lastIndex;v=!1;"\n"==q.slice(-1)&&(q=q.slice(null,-1),v=!0);q=q.slice(I,-I);if("#"!=q.charAt(0)){if("."==q.charAt(0)){q=q.substring(1,q.length);var x={"meta-left":G,"meta-right":B,space:" ",tab:"\t",newline:"\n"}[q];if(void 0!==x){w.Append(x);continue}if(x=q.match(J)){q=x[3];x[1]?(v=k,q=y({section_name:q})):(v=f,q=t({section_name:q}));w.Append([v,q]);z.push(q);w=q;continue}var A;if(x=q.match(K)){v=(A=x[1])?n(A):null;w.NewOrClause(v);
continue}var x=!1,D=q.match(L);if(D){if(A=D[1],x=!0,-1==A.indexOf("?")){v=[function(a){return function(b,d){var c,g,f;if(-1!==a.indexOf(" || ")){c=a.split("||");for(f=0;f<c.length;f++)if(g=c[f].trim(),d.get(g))return!0;return!1}if(-1!==a.indexOf(" && ")){c=a.split(" && ");for(f=0;f<c.length;f++)if(g=c[f].trim(),!d.get(g))return!1;return!0}return d.get(a)}}(A),null];q=H();q.NewOrClause(v);w.Append([h,q]);z.push(q);w=q;continue}}else if("?"==q.charAt(q.length-1)||"?"==q.split(" ")[0].charAt(q.split(" ")[0].length-
1))A=q,x=!0;if(x){v=A?n(A):null;q=H();q.NewOrClause(v);w.Append([h,q]);z.push(q);w=q;continue}if("alternates with"==q){w.AlternatesWith();continue}if("end"==q){z.pop();if(0<z.length)w=z[z.length-1];else throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};continue}}D=q.split(F);if(1==D.length)x=[e("str")];else{x=[];for(q=1;q<D.length;q++)x.push(e(D[q]));q=D[0]}w.Append([g,{name:q,formatters:x}]);v&&w.Append("\n")}}w.Append(d.slice(E));if(1!==z.length)throw{name:"TemplateSyntaxError",
message:"Got too few {end} statements."};return w}a.namespace("JSONTemplate");var u="apply ",n={};a.JSONTemplate.DEFAULT_FORMATTERS=a.Squarespace.TEMPLATE_FORMATTERS;a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS=[].concat(a.Squarespace.TEMPLATE_PREFIX_FORMATTERS,[{name:"pluralize",func:function(a,b,d){switch(d.length){case 0:b="";d="s";break;case 1:b="";d=d[0];break;case 2:b=d[0];d=d[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"};}return 1==a?b:d}},{name:"encode-space",
func:function(a,b,d){return a.replace(/\s/g,"&nbsp;")}},{name:"truncate",func:function(a,b,d){b=d[0]||100;d=d[1]||"...";a&&a.length>b&&(a=a.substring(0,b),a=a.replace(/\w+$/,""),a+=d);return a}},{name:"date",func:function(b,d,c){var g=0,g=(new Date(b)).getTimezoneOffset();if(!a.Lang.isNumber(b))return"Invalid date.";if("undefined"!==typeof TimezoneJS){var f;try{f=new TimezoneJS.Date(b,d.get("website.timeZone"))}catch(e){return"Invalid Timezone"}g=(isNaN(f.getTimezoneOffset())?0:f.getTimezoneOffset())-
g}else d=-parseInt(d.get("website.timeZoneOffset"),10)/6E4,f=(new Date).getTimezoneOffset(),g=d-f;b=new Date(b-6E4*g);c=c.join(" ");return a.DataType.Date.format(b,{format:c})}},{name:"image",func:function(b,d,c){var g;b.mediaFocalPoint&&(g=b.mediaFocalPoint.x+","+b.mediaFocalPoint.y);return'<img class="'+(c[0]?c[0]:"thumb-image")+'" '+(b.title?'alt="'+a.Squarespace.Escaping.escapeForHtmlTag(b.title)+'" ':"")+' data-image="'+b.assetUrl+'" data-image-dimensions="'+b.originalSize+'" data-image-focal-point="'+
g+'"/>'}},{name:"timesince",func:function(b,d,c){if(!a.Lang.isNumber(b))return"Invalid date.";c.join(" ");return'<span class="timesince" data-date="'+b+'">'+a.Squarespace.DateUtils.humanizeDate(b)+"</span>"}},{name:"resizedHeightForWidth",func:function(a,b,d){b=a.split("x");if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);d=parseInt(d[0],10)/a;return parseInt(b*d,10)}},{name:"resizedWidthForHeight",func:function(a,b,d){b=a.split("x");
if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);d=parseInt(d[0],10)/b;return parseInt(a*d,10)}},{name:"squarespaceThumbnailForWidth",func:function(b,d,c){return a.Squarespace.Rendering.getSquarespaceSizeForWidth(parseInt(c[0],10))}},{name:"squarespaceThumbnailForHeight",func:function(b,d,c){d=b.split("x");if(2!=d.length)return"Invalid source parameter.  Pass in 'originalSize'.";b=parseInt(d[0],10);d=parseInt(d[1],10);c=parseInt(c[0],
10)/d;c=parseInt(b*c,10);return a.Squarespace.Rendering.getSquarespaceSizeForWidth(c)}},{name:"cycle",func:function(a,b,d){return d[(a-1)%d.length]}}]);var r=function(a){return{lookup:function(b){return[a[b]||null,null]}}},s=function(a){return{lookup:function(b){for(var d=0;d<a.length;d++){var c=a[d].name,g=a[d].func;if(b.slice(0,c.length)==c)return d=b.charAt(c.length),b=""===d?[]:b.split(d).slice(1),[g,b]}return[null,null]}}},l=function(a){return{lookup:function(b){for(var d=0;d<a.length;d++){var c=
a[d].lookup(b);if(c[0])return c}return[null,null]}}},p=function(a){var b={current_clause:[],Append:function(a){b.current_clause.push(a)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"};},NewOrClause:function(a){throw{name:"NotImplemented"};}};return b},t=function(a){var b=p(a);b.statements={"default":b.current_clause};b.section_name=a.section_name;b.Statements=function(a){return b.statements[a||"default"]||[]};
b.NewOrClause=function(a){if(a)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};b.current_clause=[];b.statements.or=b.current_clause};return b},y=function(a){var b=t(a);b.AlternatesWith=function(){b.current_clause=[];b.statements.alternate=b.current_clause};return b},H=function(a){var b=p(a);b.clauses=[];b.NewOrClause=function(a){a=a||[function(a){return!0},null];b.current_clause=[];b.clauses.push([a,b.current_clause])};return b},J=/(repeated)?\s*(section)\s+(\S+)?/,
K=/^or(?:[\s\-]+(.+))?/,L=/^if(?:[\s\-]+(.+))?/;a.JSONTemplate.Template=Class.create({initialize:function(a,b,d){a=this.removeMultilineComments(a);this._options=b||{};this._program=m(a,this._options)},removeMultilineComments:function(a){for(var b=a.search("{##"),d;0<=b;)d=a.substr(b),a=a.substr(0,b)+d.substr(d.search("##}")+3),b=a.search("{##");return a},render:function(a,b){var g=c(a,this._options.undefined_str);d(this._program.Statements(),g,b)},expand:function(a){var b=[];this.render(a,function(a){b.push(a)});
return b.join("")}});a.JSONTemplate.DEFAULT_PREDICATES=a.Squarespace.TEMPLATE_PREDICATES;a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES=a.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES;a.JSONTemplate.evaluateJsonTemplate=function(b,d,c){return"string"!=typeof b?"JSON Template Error: Processing failed because no input was provided. (type: "+typeof b+", template: "+JSON.stringify(b)+", dictionary: "+JSON.stringify(d)+", partials: "+JSON.stringify(c)+")":(new a.JSONTemplate.Template(b,{partials:c})).expand(d)}},
"1.0",{requires:"datatype-date-format squarespace-common squarespace-util squarespace-date-utils json squarespace-template-helpers".split(" ")});
YUI.add("squarespace-localities",function(a){a.namespace("Squarespace");a.Squarespace.Localities={COUNTRY_OPTIONS:{"":{title:"Not Specified",empty:!0},US:{title:"United States"},CA:{title:"Canada"},AF:{title:"Afghanistan"},AL:{title:"Albania"},DZ:{title:"Algeria"},AS:{title:"American Samoa"},AD:{title:"Andorra"},AO:{title:"Angola"},AI:{title:"Anguilla"},AQ:{title:"Antarctica"},AG:{title:"Antigua and Barbuda"},AR:{title:"Argentina"},AM:{title:"Armenia"},AW:{title:"Aruba"},AU:{title:"Australia"},AT:{title:"Austria"},
AX:{title:"Aland Islands"},AZ:{title:"Azerbaijan"},BS:{title:"Bahamas"},BH:{title:"Bahrain"},BD:{title:"Bangladesh"},BB:{title:"Barbados"},BY:{title:"Belarus"},BE:{title:"Belgium"},BZ:{title:"Belize"},BJ:{title:"Benin"},BM:{title:"Bermuda"},BT:{title:"Bhutan"},BO:{title:"Bolivia"},BA:{title:"Bosnia and Herzegovina"},BW:{title:"Botswana"},BV:{title:"Bouvet Island"},BR:{title:"Brazil"},IO:{title:"British Indian Ocean Territory"},BN:{title:"Brunei Darussalam"},BG:{title:"Bulgaria"},BF:{title:"Burkina Faso"},
BI:{title:"Burundi"},KH:{title:"Cambodia"},CI:{title:"Cote d'Ivoire"},CM:{title:"Cameroon"},CV:{title:"Cape Verde"},KY:{title:"Cayman Islands"},CF:{title:"Central African Republic"},TD:{title:"Chad"},CL:{title:"Chile"},CN:{title:"China"},CX:{title:"Christmas Island"},CC:{title:"Cocos (Keeling) Islands"},CO:{title:"Colombia"},KM:{title:"Comoros"},CG:{title:"Congo"},CD:{title:"Congo, Democratic Republic"},CK:{title:"Cook Islands"},CR:{title:"Costa Rica"},HR:{title:"Croatia"},CU:{title:"Cuba"},CY:{title:"Cyprus"},
CZ:{title:"Czech Republic"},DK:{title:"Denmark"},DJ:{title:"Djibouti"},DM:{title:"Dominica"},DO:{title:"Dominican Republic"},TL:{title:"Timor-Leste"},EC:{title:"Ecuador"},EG:{title:"Egypt"},SV:{title:"El Salvador"},GQ:{title:"Equatorial Guinea"},ER:{title:"Eritrea"},EE:{title:"Estonia"},ET:{title:"Ethiopia"},FK:{title:"Falkland Islands (Malvinas)"},FO:{title:"Faroe Islands"},FJ:{title:"Fiji"},FI:{title:"Finland"},FR:{title:"France"},GF:{title:"French Guiana"},PF:{title:"French Polynesia"},TF:{title:"French Southern Territories"},
GA:{title:"Gabon"},GM:{title:"Gambia"},GE:{title:"Georgia"},DE:{title:"Germany"},GH:{title:"Ghana"},GI:{title:"Gibraltar"},GR:{title:"Greece"},GL:{title:"Greenland"},GD:{title:"Grenada"},GG:{title:"Guernsey"},GP:{title:"Guadeloupe"},GU:{title:"Guam"},GT:{title:"Guatemala"},GN:{title:"Guinea"},GW:{title:"Guinea-Bissau"},GY:{title:"Guyana"},HT:{title:"Haiti"},HM:{title:"Heard and McDonald Islands"},HN:{title:"Honduras"},HK:{title:"Hong Kong"},HU:{title:"Hungary"},IS:{title:"Iceland"},IN:{title:"India"},
ID:{title:"Indonesia"},IR:{title:"Iran"},IQ:{title:"Iraq"},IE:{title:"Ireland"},IL:{title:"Israel"},IT:{title:"Italy"},JM:{title:"Jamaica"},JP:{title:"Japan"},JE:{title:"Jersey"},JO:{title:"Jordan"},KZ:{title:"Kazakhstan"},KE:{title:"Kenya"},KI:{title:"Kiribati"},KP:{title:"Korea, Democratic People's Republic"},KR:{title:"Korea (South)"},KV:{title:"Kosovo"},KW:{title:"Kuwait"},KG:{title:"Kyrgyzstan"},LA:{title:"Laos"},LV:{title:"Latvia"},LB:{title:"Lebanon"},LS:{title:"Lesotho"},LR:{title:"Liberia"},
LY:{title:"Libya"},LI:{title:"Liechtenstein"},LT:{title:"Lithuania"},LU:{title:"Luxembourg"},MO:{title:"Macau"},MK:{title:"Macedonia"},MG:{title:"Madagascar"},MW:{title:"Malawi"},MY:{title:"Malaysia"},MV:{title:"Maldives"},ML:{title:"Mali"},MT:{title:"Malta"},MH:{title:"Marshall Islands"},MQ:{title:"Martinique"},MR:{title:"Mauritania"},MU:{title:"Mauritius"},YT:{title:"Mayotte"},MX:{title:"Mexico"},FM:{title:"Micronesia"},MD:{title:"Moldova"},MC:{title:"Monaco"},MN:{title:"Mongolia"},ME:{title:"Montenegro"},
MS:{title:"Montserrat"},MA:{title:"Morocco"},MZ:{title:"Mozambique"},MM:{title:"Myanmar"},NA:{title:"Namibia"},NR:{title:"Nauru"},NP:{title:"Nepal"},NL:{title:"Netherlands"},AN:{title:"Netherlands Antilles"},NC:{title:"New Caledonia"},NZ:{title:"New Zealand"},NI:{title:"Nicaragua"},NE:{title:"Niger"},NG:{title:"Nigeria"},NU:{title:"Niue"},NF:{title:"Norfolk Island"},MP:{title:"Northern Mariana Islands"},NO:{title:"Norway"},OM:{title:"Oman"},PK:{title:"Pakistan"},PW:{title:"Palau"},PA:{title:"Panama"},
PG:{title:"Papua New Guinea"},PS:{title:"Palestine, State of"},PY:{title:"Paraguay"},PE:{title:"Peru"},PH:{title:"Philippines"},PN:{title:"Pitcairn"},PL:{title:"Poland"},PT:{title:"Portugal"},PR:{title:"Puerto Rico"},QA:{title:"Qatar"},RE:{title:"Reunion"},RO:{title:"Romania"},RU:{title:"Russian Federation"},RW:{title:"Rwanda"},GS:{title:"South Georgia and the South Sandwich Islands"},BL:{title:"Saint Barthelemy"},KN:{title:"Saint Kitts and Nevis"},LC:{title:"Saint Lucia"},VC:{title:"Saint Vincent and the Grenadines"},
WS:{title:"Samoa"},SM:{title:"San Marino"},ST:{title:"Sao Tome and Principe"},SA:{title:"Saudi Arabia"},SN:{title:"Senegal"},RS:{title:"Serbia"},SC:{title:"Seychelles"},SL:{title:"Sierra Leone"},SG:{title:"Singapore"},SK:{title:"Slovakia"},SI:{title:"Slovenia"},SB:{title:"Solomon Islands"},SO:{title:"Somalia"},ZA:{title:"South Africa"},ES:{title:"Spain"},LK:{title:"Sri Lanka"},SH:{title:"Saint Helena"},PM:{title:"Saint Pierre and Miquelon"},SD:{title:"Sudan"},SR:{title:"Suriname"},SJ:{title:"Svalbard and Jan Mayen Islands"},
SZ:{title:"Swaziland"},SE:{title:"Sweden"},CH:{title:"Switzerland"},SY:{title:"Syria"},TW:{title:"Taiwan"},TJ:{title:"Tajikistan"},TZ:{title:"Tanzania"},TH:{title:"Thailand"},TG:{title:"Togo"},TK:{title:"Tokelau"},TO:{title:"Tonga"},TT:{title:"Trinidad and Tobago"},TN:{title:"Tunisia"},TR:{title:"Turkey"},TM:{title:"Turkmenistan"},TC:{title:"Turks and Caicos Islands"},TV:{title:"Tuvalu"},UM:{title:"United States Minor Outlying Islands"},UG:{title:"Uganda"},UA:{title:"Ukraine"},AE:{title:"United Arab Emirates"},
GB:{title:"United Kingdom"},UY:{title:"Uruguay"},UZ:{title:"Uzbekistan"},VU:{title:"Vanuatu"},VA:{title:"Vatican City State (Holy See)"},VE:{title:"Venezuela"},VN:{title:"Viet Nam"},VG:{title:"Virgin Islands (British)"},VI:{title:"Virgin Islands (U.S.)"},WF:{title:"Wallis and Futuna Islands"},EH:{title:"Western Sahara"},YE:{title:"Yemen"},ZM:{title:"Zambia"},ZW:{title:"Zimbabwe"}},STATE_OPTIONS:{AL:{title:"Alabama"},AK:{title:"Alaska"},AZ:{title:"Arizona"},AR:{title:"Arkansas"},CA:{title:"California"},
CO:{title:"Colorado"},CT:{title:"Connecticut"},DE:{title:"Delaware"},FL:{title:"Florida"},GA:{title:"Georgia"},HI:{title:"Hawaii"},ID:{title:"Idaho"},IL:{title:"Illinois"},IN:{title:"Indiana"},IA:{title:"Iowa"},KS:{title:"Kansas"},KY:{title:"Kentucky"},LA:{title:"Louisiana"},ME:{title:"Maine"},MD:{title:"Maryland"},MA:{title:"Massachusetts"},MI:{title:"Michigan"},MN:{title:"Minnesota"},MS:{title:"Mississippi"},MO:{title:"Missouri"},MT:{title:"Montana"},NE:{title:"Nebraska"},NV:{title:"Nevada"},NH:{title:"New Hampshire"},
NJ:{title:"New Jersey"},NM:{title:"New Mexico"},NY:{title:"New York"},NC:{title:"North Carolina"},ND:{title:"North Dakota"},OH:{title:"Ohio"},OK:{title:"Oklahoma"},OR:{title:"Oregon"},PA:{title:"Pennsylvania"},RI:{title:"Rhode Island"},SC:{title:"South Carolina"},SD:{title:"South Dakota"},TN:{title:"Tennessee"},TX:{title:"Texas"},UT:{title:"Utah"},VT:{title:"Vermont"},VA:{title:"Virginia"},WA:{title:"Washington"},DC:{title:"Washington, District of Columbia"},WV:{title:"West Virginia"},WI:{title:"Wisconsin"},
WY:{title:"Wyoming"}}};a.Squarespace.Localities.COUNTRIES_TO_STATES={US:a.Squarespace.Localities.STATE_OPTIONS,CA:{ON:{title:"Ontario"},QC:{title:"Quebec"},NS:{title:"Nova Scotia"},NB:{title:"New Brunswick"},MB:{title:"Manitoba"},BC:{title:"British Columbia"},PE:{title:"Prince Edward Island"},SK:{title:"Saskatchewan"},AB:{title:"Alberta"},NL:{title:"Newfoundland and Labrador"},NT:{title:"Northwest Territories"},YT:{title:"Yukon"},NU:{title:"Nunavut"}}};a.Squarespace.Localities.countryCodeFromName=
function(b){for(var d in a.Squarespace.Localities.COUNTRY_OPTIONS)if(a.Squarespace.Localities.COUNTRY_OPTIONS[d].title==b)return d};var e=function(b){return a.Array.reduce(a.Object.keys(b).sort(),[],function(a,g){a.push({label:b[g].title,value:g});return a})},b=function(a){return a.sort(function(a,b){return a.label<b.label?-1:1})};a.Squarespace.Localities.getNewCountryOptions=function(){return b(e(a.Squarespace.Localities.COUNTRY_OPTIONS))};a.Squarespace.Localities.getNewStateOptionsForCountry=function(b){return e(a.Squarespace.Localities.COUNTRIES_TO_STATES[b])};
a.Squarespace.Localities.getAmericentricSortedCountryOptions=function(){var b=a.Array.filter(a.Squarespace.Localities.getNewCountryOptions(),function(a){return""!==a.value});b.sort(function(a,b){return"United States"===a.label?-1:"United States"===b.label||a.label>b.label?1:a.label<b.label?-1:0});return b}});
YUI.add("overlay",function(a,e){a.Overlay=a.Base.create("overlay",a.Widget,[a.WidgetStdMod,a.WidgetPosition,a.WidgetStack,a.WidgetPositionAlign,a.WidgetPositionConstrain])},"3.10.1",{requires:"widget widget-stdmod widget-position widget-position-align widget-stack widget-position-constrain".split(" "),skinnable:!0});
YUI.add("widget-stack",function(a,e){function b(b){this._stackNode=this.get(h);this._stackHandles={};a.after(this._renderUIStack,this,k);a.after(this._syncUIStack,this,u);a.after(this._bindUIStack,this,m)}var c=a.Lang,d=a.UA,g=a.Node,f=a.Widget,h="boundingBox",k="renderUI",m="bindUI",u="syncUI";b.ATTRS={shim:{value:6==d.ie},zIndex:{value:0,setter:"_setZIndex"}};b.HTML_PARSER={zIndex:function(a){return this._parseZIndex(a)}};b.SHIM_CLASS_NAME=f.getClassName("shim");b.STACKED_CLASS_NAME=f.getClassName("stacked");
b.SHIM_TEMPLATE='<iframe class="'+b.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';b.prototype={_syncUIStack:function(){this._uiSetShim(this.get("shim"));this._uiSetZIndex(this.get("zIndex"))},_bindUIStack:function(){this.after("shimChange",this._afterShimChange);this.after("zIndexChange",this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(b.STACKED_CLASS_NAME)},_parseZIndex:function(a){a=
!a.inDoc()||"static"===a.getStyle("position")?"auto":a.getComputedStyle("zIndex");return"auto"===a?null:a},_setZIndex:function(a){c.isString(a)&&(a=parseInt(a,10));c.isNumber(a)||(a=0);return a},_afterShimChange:function(a){this._uiSetShim(a.newVal)},_afterZIndexChange:function(a){this._uiSetZIndex(a.newVal)},_uiSetZIndex:function(a){this._stackNode.setStyle("zIndex",a)},_uiSetShim:function(a){a?(this.get("visible")?this._renderShim():this._renderShimDeferred(),6==d.ie&&this._addShimResizeHandlers()):
this._destroyShim()},_renderShimDeferred:function(){this._stackHandles.shimdeferred=this._stackHandles.shimdeferred||[];this._stackHandles.shimdeferred.push(this.on("visibleChange",function(a){a.newVal&&this._renderShim()}))},_addShimResizeHandlers:function(){this._stackHandles.shimresize=this._stackHandles.shimresize||[];var a=this.sizeShim,b=this._stackHandles.shimresize;b.push(this.after("visibleChange",a));b.push(this.after("widthChange",a));b.push(this.after("heightChange",a));b.push(this.after("contentUpdate",
a))},_detachStackHandles:function(a){a=this._stackHandles[a];var b;if(a&&0<a.length)for(;b=a.pop();)b.detach()},_renderShim:function(){var a=this._shimNode,b=this._stackNode;a||(a=this._shimNode=this._getShimTemplate(),b.insertBefore(a,b.get("firstChild")),this._detachStackHandles("shimdeferred"),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get("parentNode").removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles("shimdeferred"),this._detachStackHandles("shimresize"))},
sizeShim:function(){var a=this._shimNode,b=this._stackNode;a&&(6===d.ie&&this.get("visible"))&&(a.setStyle("width",b.get("offsetWidth")+"px"),a.setStyle("height",b.get("offsetHeight")+"px"))},_getShimTemplate:function(){return g.create(b.SHIM_TEMPLATE,this._stackNode.get("ownerDocument"))}};a.WidgetStack=b},"3.10.1",{requires:["base-build","widget"],skinnable:!0});
YUI.add("squarespace-checkout-saved-custom-form-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-saved-custom-form.html"]=a(function(a,b,g,f,e){this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);e=e||{};a='<div class="saved-fieldset">\n\n  ';if((b=g.each.call(b,b.fields,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var d,c;d="\n  <div>\n    ";if((c="function"===typeof a?a.apply(a):a)||0===c)d+=c;return d+"\n  </div> \n  "},
e),data:e}))||0===b)a+=b;return a+"\n\n</div>\n"})})();a.Handlebars.registerPartial("checkout-saved-custom-form.html".replace("/","."),e.templates["checkout-saved-custom-form.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-checkout-form-payment",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutFormPayment=a.Base.create("checkoutFormPayment",a.Squarespace.Widgets.CheckoutFormSection,[],{renderUI:function(){e.superclass.renderUI.call(this);var b=this.get("contentBox");this._fieldElements={cardHolderName:b.one('input[name="cardHolderName"]'),cardNumber:b.one("#card-number input"),cardExpiryMonth:b.one("#card-expiry-month select"),cardExpiryYear:b.one("#card-expiry-year select"),
cvc:b.one("#cvc input"),stripeToken:b.one('input[name="stripeToken"]')};a.Array.each(this.get("optionalHiddenFields"),function(c){var d=b.one('input[name="'+c+'"]');if(a.Lang.isValue(d))this._fieldElements[c]=d;else throw"Optional hidden field input element could not be found.";},this)},bindUI:function(){e.superclass.bindUI.call(this);this.after("inTestModeChange",this.syncUI,this);this._bindLockedToolTip()},syncUI:function(){e.superclass.syncUI.call(this);this._populateCardValues();this._toggleLockedFields()},
getValues:function(){return a.Array.hash(a.Object.keys(this._fieldElements),a.Array.map(a.Object.values(this._fieldElements),function(a){return a.get("value")}))},setValues:function(b){a.Object.each(b,function(a,b){var g=this._fieldElements[b];"select-one"===g.get("type")?g.one('option[value="'+a+'"]').set("selected",!0):g.set("value",a)},this)},_onContinue:function(){this.fire("continue")},_populateCardValues:function(){this.get("inTestMode")?this.setValues({cardNumber:"4242424242424242",cardExpiryMonth:"4",
cardExpiryYear:(new Date).getFullYear()+1,cvc:"323"}):this.setValues({cardNumber:"",cardExpiryMonth:(new Date).getMonth(),cardExpiryYear:(new Date).getFullYear(),cvc:""})},_toggleLockedFields:function(){var a=this.get("inTestMode"),c=this.get("contentBox"),d=this._fieldElements,g=this._fieldElements.cardNumber;c.one("#credit-card").toggleClass("locked",a);a?(g.setAttribute("readonly",!0),d.cardExpiryMonth.setAttribute("disabled","disabled"),d.cardExpiryYear.setAttribute("disabled","disabled"),d.cvc.setAttribute("readonly",
!0)):(g.removeAttribute("readonly"),d.cardExpiryMonth.removeAttribute("disabled"),d.cardExpiryYear.removeAttribute("disabled"),d.cvc.removeAttribute("readonly"))},_bindLockedToolTip:function(){var b=this._fieldElements.cardNumber,c=this.get("contentBox").one("#credit-card");b.on("click",function(){this.get("inTestMode")&&new a.Squarespace.Tourtip({title:"Store Not Live",body:'This store has not yet gone live. You may try the checkout process and place a test order. We have prefilled a "Test" credit card number for you.',
"align.node":c,hideIn:7E3})},this)},lock:function(){this.get("contentBox").one("#place-order-button").setContent(this.get("strings.pendingText")).set("disabled",!0)},unlock:function(){this.get("contentBox").one("#place-order-button").setContent(this.get("strings.submitText")).set("disabled",!1)}},{CSS_PREFIX:"sqs-checkout-form-payment",HANDLEBARS_TEMPLATE:"checkout-form-payment.html",ATTRS:{strings:{value:{submitText:"Place Order",pendingText:"Placing Order ..."}},optionalHiddenFields:{value:[]},
inTestMode:{validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:"base node squarespace-tourtip squarespace-checkout-form-section squarespace-hb-date-options squarespace-checkout-form-payment-template squarespace-attr-validators".split(" ")});
YUI.add("squarespace-checkout-form-billing-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-form-billing.html"]=a(function(a,b,g,f,e){this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);e=e||{};var k,m=this.escapeExpression;a='<div class="title">Billing Info<a class="edit-button">edit</a></div>\n\n<fieldset>\n\n  \x3c!-- First Name --\x3e\n  <div id="billing-first-name" data-label="First Name" class="field first-name required">\n    <label>First Name</label>\n    <input name="billingFirstName" class="field-element" placeholder="First Name"\n        x-autocompletetype="given-name" type="text" spellcheck="false" maxlength="30" />\n  </div>\n\n\n  \x3c!-- Last Name --\x3e\n  <div id="billing-last-name" data-label="Last Name" class="field last-name required">\n    <label>Last Name</label>\n    <input name="billingLastName" class="field-element" placeholder="Last Name"\n        x-autocompletetype="surname"a type="text" spellcheck="false" maxlength="30" />\n  </div>\n\n\n  \x3c!-- Email Address --\x3e\n  <div id="email" data-label="Email Address" class="field email required">\n    <label>Email Address</label>\n    <input name="email" class="field-element" placeholder="Email"\n        x-autocompletetype="email" type="text" spellcheck="false" maxlength="50" type="email" />\n  </div>\n\n\n  \x3c!-- Billing Address 1 --\x3e\n  <div id="billing-address-1" data-label="Address Line 1" class="field required">\n    <label>Address Line 1</label>\n    <input name="billingAddress1" class="field-element"\n        placeholder="Address Line 1" type="text" spellcheck="false" maxlength="50" />\n  </div>\n\n\n  \x3c!-- Billing Address 2 --\x3e\n  <div id="billing-address-2" data-label="Address Line 2" class="field">\n    <label>Address Line 2</label>\n    <input name="billingAddress2" class="field-element"\n        placeholder="Address Line 2" type="text" spellcheck="false" maxlength="50" />\n  </div>\n\n\n  \x3c!-- Country --\x3e\n  <div id="billing-country" data-label="Country" class="field country required">\n    <label>Country</label>\n    <select name="billingCountry" class="field-element" x-autocompletetype="country-name">\n    </select>\n  </div>\n\n\n  \x3c!-- City --\x3e\n  <div id="billing-city" data-label="City" class="field city required">\n    <label>City</label>\n    <input name="billingCity" class="field-element" placeholder="City" type="text"\n        spellcheck="false" maxlength="30" />\n  </div>\n\n\n  \x3c!-- State/Province --\x3e\n  <div id="billing-state" data-label="State/Province" class="field state required">\n    <label>State/Province</label>\n    <select name="billingState" class="field-element" x-autocompletetype="state">\n    </select>\n  </div>\n\n\n  \x3c!-- Zip Code --\x3e\n  <div id="billing-zip" data-label="Zip Code" class="field zip required">\n    <label>Zip / Postal</label>\n    <input name="billingZip" class="field-element" placeholder="Zip / Postal" type="text"\n        spellcheck="false" maxlength="10" />\n  </div>\n\n  <div style="clear:both;"></div>\n  <div id="phone" data-label="Phone Number" class="field phone">\n    <label>Phone Number</label>\n    <input name="phone" class="field-element" placeholder="Phone Number"\n        x-autocompletetype="phone" type="text" spellcheck="false" maxlength="20" type="tel" />\n  </div>\n\n  ';
if((f=g["if"].call(b,(k=b.optionalFields,null==k||!1===k?k:k.showNoteField),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var d,c;return d=""+('\n    \x3c!-- Note / Special Instructions (optional) --\x3e\n    <div style="clear:both;"></div>\n    <div id="note"  class="field note">\n      <label>'+m((c=(c=a.strings,null==c||!1===c?c:c.noteFieldLabel),"function"===typeof c?c.apply(a):c))+'</label>\n      <textarea name="note" placeholder="'+m((c=(c=a.strings,null==c||!1===c?c:c.noteFieldLabel),
"function"===typeof c?c.apply(a):c))+'" class="field-element"></textarea>\n    </div>\n  ')},e),data:e}))||0===f)a+=f;a+="\n\n  ";if((f=g["if"].call(b,(k=b.optionalFields,null==k||!1===k?k:k.showMessageField),{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return'\n    \x3c!-- Message (optional) --\x3e\n    <div style="clear:both;"></div>\n    <div id="note" class="field note">\n      <label>Message</label>\n      <textarea name="note" placeholder="Note / Special Instructions" class="field-element"></textarea>\n    </div>\n  '},
e),data:e}))||0===f)a+=f;a+="\n\n  ";if((f=g["if"].call(b,(k=b.optionalFields,null==k||!1===k?k:k.showMailingList),{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return'\n    \x3c!-- Mailchimp (optional) --\x3e\n    <div style="clear:both;"></div>\n    <div id="join-mailing-list" class="check-element active clear">Join our mailing list</div>\n    <input name="joinMailingList" value="true" type="hidden" />\n  '},e),data:e}))||0===f)a+=f;return a+'\n\n\n  \x3c!-- Continue --\x3e\n  <div class="btn-container">\n    <div class="button continue-button">Continue</div>\n  </div>\n\n</fieldset>\n'})})();
a.Handlebars.registerPartial("checkout-form-billing.html".replace("/","."),e.templates["checkout-form-billing.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-checkout-form-section",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.CheckoutFormSection=a.Base.create("checkoutFormSection",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("continue-clicked",{preventable:!0,defaultFn:this._onContinue})},renderUI:function(){e.superclass.renderUI.call(this);Modernizr&&!Modernizr.input.placeholder&&this.get("boundingBox").addClass("show-labels");this.get("contentBox").all(".field-element").plug(a.Squarespace.Plugin.PulseWarn,
{iterations:1,useClass:!0,targetClass:"warn",interval:1300});switch(this.get("state")){case "editing":this.setStateEditing();break;case "complete":this.setStateComplete();break;case "incomplete":this.setStateIncomplete()}},bindUI:function(){e.superclass.bindUI.call(this);if(a.Lang.isValue(this.get("model")))this.get("model").on("change",this.syncUI,this);var b=this.get("contentBox");b.one(".continue-button").on("click",function(){this.fire("continue-clicked")},this);b.one(".edit-button").on("click",
this._onEdit,this)},setStateEditing:function(){var a=this.get("boundingBox");this._removeSaved();a.removeClass("complete");a.removeClass("incomplete");a.addClass("editing");this.set("state","editing")},setStateComplete:function(){var a=this.get("boundingBox"),c=this.get("contentBox");a.removeClass("editing");a.removeClass("incomplete");a.addClass("complete");(a=c.one(".saved-fieldset"))&&a.remove(!0);this._renderSavedFieldset();this.set("state","complete")},_renderSavedFieldset:function(){var b=this.getProperty("HANDLEBARS_SAVED_FIELDSET_TEMPLATE");
b&&this.get("contentBox").append(a.Squarespace.UITemplates.render(b,this.getValues()))},setStateIncomplete:function(){var a=this.get("boundingBox");this._removeSaved();a.removeClass("editing");a.removeClass("complete");a.addClass("incomplete");this.set("state","incomplete")},getValues:function(){var a={};this.get("contentBox").all(".field").each(function(c){c=c.one(".field-element");var d=c.get("value").trim();""===d&&(d=null);a[c.get("name")]=d},this);return a},setValues:function(b){this.get("contentBox").all(".field-element").each(function(c){var d=
c.get("name");a.Object.hasKey(b,d)&&c.set("value",b[d])},this)},renderErrors:function(b){this._clearErrors();var c=[],d=[],g=[],f=[];a.Array.each(b,function(a){var b=this.getProperty("FIELD_ERROR_TYPES"),e=a.type,h=a.field;h&&this._renderFieldError(h);e===b.REQUIRED?c.push(h.getData("label")):e===b.VALIDATION?d.push(h.getData("label")):e===b.STRIPE?g.push(a.message):e===b.CUSTOM&&f.push(a.message)},this);var e=b="",k="",m="";0<c.length&&(b=a.Array.dedupe(c).join(", ")+" required. ");0<d.length&&(e=
a.Array.dedupe(d).join(", ")+" invalid.");0<g.length&&(k=a.Array.dedupe(g).join(". "));0<f.length&&(m=a.Array.dedupe(f).join(". "));b=a.Node.create('<div class="error-summary">'+b+e+k+m+"</div>");this.get("contentBox").one(".button").insert(b,"before")},_onContinue:function(){this.validate().then(a.bind(function(a){0<a.length?this.renderErrors(a):this.fire("continue")},this))},_onEdit:function(){this.fire("edit")},_fetchAsyncValidatedErrors:function(){return new a.Promise(function(a){a([])})},_getLocalErrors:function(){var a=
[];this.get("contentBox").all(".field").each(function(c){c.hasClass("required")&&(c=this._validateField(c))&&a.push(c)},this);return a},validate:function(){this._clearErrors();var b=this._getLocalErrors();return new a.Promise(a.bind(function(c){this._fetchAsyncValidatedErrors().then(a.bind(function(a){a=b.concat(a);c(a)},this))},this))},_validateField:function(a){var c=a.one(".field-element");c.get("name");if(""===c.get("value").trim())return{type:this.getProperty("FIELD_ERROR_TYPES").REQUIRED,field:a}},
_clearErrors:function(){var a=this.get("contentBox");a.all(".error-summary").remove(!0);a.all(".field").removeClass("error")},_renderFieldError:function(a){var c=a.one(".field-element");c.pulseWarn.warn();a.addClass("error");c.once(["click","change","focus"],function(){a.removeClass("error")},this)},_removeSaved:function(){var a=this.get("contentBox").one(".saved-fieldset");a&&a.remove(!0)}},{CSS_PREFIX:"sqs-checkout-form-section",FIELD_ERROR_TYPES:{REQUIRED:1,VALIDATION:2,STRIPE:3,CUSTOM:4},ATTRS:{model:{value:null,
validator:function(b){return a.instanceOf(b,a.Squarespace.Models.ShoppingCart)}},state:{value:"incomplete"}}})},"1.0",{requires:"node base thirdparty-modernizr squarespace-ss-widget squarespace-ui-templates squarespace-plugin-pulsewarn".split(" ")});
YUI.add("widget-stdmod",function(a,e){function b(b){this._stdModNode=this.get(h);a.before(this._renderUIStdMod,this,k);a.before(this._bindUIStdMod,this,m);a.before(this._syncUIStdMod,this,u)}var c=a.Lang,d=a.Node,g=a.UA,f=a.Widget,h="contentBox",k="renderUI",m="bindUI",u="syncUI",n=a.Widget.UI_SRC;b.HEADER="header";b.BODY="body";b.FOOTER="footer";b.AFTER="after";b.BEFORE="before";b.REPLACE="replace";var r=b.HEADER,s=b.BODY,l=b.FOOTER,p=r+"Content",t=l+"Content",y=s+"Content";b.ATTRS={headerContent:{value:null},
footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:b.BODY,validator:function(a){return this._validateFillHeight(a)}}};b.HTML_PARSER={headerContent:function(a){return this._parseStdModHTML(r)},bodyContent:function(a){return this._parseStdModHTML(s)},footerContent:function(a){return this._parseStdModHTML(l)}};b.SECTION_CLASS_NAMES={header:f.getClassName("hd"),body:f.getClassName("bd"),footer:f.getClassName("ft")};b.TEMPLATES={header:'<div class="'+b.SECTION_CLASS_NAMES[r]+'"></div>',
body:'<div class="'+b.SECTION_CLASS_NAMES[s]+'"></div>',footer:'<div class="'+b.SECTION_CLASS_NAMES[l]+'"></div>'};b.prototype={_syncUIStdMod:function(){var a=this._stdModParsed;(!a||!a[p])&&this._uiSetStdMod(r,this.get(p));(!a||!a[y])&&this._uiSetStdMod(s,this.get(y));(!a||!a[t])&&this._uiSetStdMod(l,this.get(t));this._uiSetFillHeight(this.get("fillHeight"))},_renderUIStdMod:function(){this._stdModNode.addClass(f.getClassName("stdmod"));this._renderStdModSections();this.after("headerContentChange",
this._afterHeaderChange);this.after("bodyContentChange",this._afterBodyChange);this.after("footerContentChange",this._afterFooterChange)},_renderStdModSections:function(){c.isValue(this.get(p))&&this._renderStdMod(r);c.isValue(this.get(y))&&this._renderStdMod(s);c.isValue(this.get(t))&&this._renderStdMod(l)},_bindUIStdMod:function(){this.after("fillHeightChange",this._afterFillHeightChange);this.after("heightChange",this._fillHeight);this.after("contentUpdate",this._fillHeight)},_afterHeaderChange:function(a){a.src!==
n&&this._uiSetStdMod(r,a.newVal,a.stdModPosition)},_afterBodyChange:function(a){a.src!==n&&this._uiSetStdMod(s,a.newVal,a.stdModPosition)},_afterFooterChange:function(a){a.src!==n&&this._uiSetStdMod(l,a.newVal,a.stdModPosition)},_afterFillHeightChange:function(a){this._uiSetFillHeight(a.newVal)},_validateFillHeight:function(a){return!a||a==b.BODY||a==b.HEADER||a==b.FOOTER},_uiSetFillHeight:function(a){a=this.getStdModNode(a);var b=this._currFillNode;b&&a!==b&&b.setStyle("height","");a&&(this._currFillNode=
a);this._fillHeight()},_fillHeight:function(){if(this.get("fillHeight")){var a=this.get("height");""!=a&&"auto"!=a&&this.fillHeight(this._currFillNode)}},_uiSetStdMod:function(a,b,d){if(c.isValue(b)){var g=this.getStdModNode(a,!0);this._addStdModContent(g,b,d);this.set(a+"Content",this._getStdModContent(a),{src:n})}else this._eraseStdMod(a);this.fire("contentUpdate")},_renderStdMod:function(a){var b=this.get(h),d=this._findStdModSection(a);d||(d=this._getStdModTemplate(a));this._insertStdModSection(b,
a,d);this[a+"Node"]=d;return this[a+"Node"]},_eraseStdMod:function(a){var b=this.getStdModNode(a);b&&(b.remove(!0),delete this[a+"Node"])},_insertStdModSection:function(a,b,d){var c=a.get("firstChild");b===l||!c?a.appendChild(d):b===r?a.insertBefore(d,c):(b=this[l+"Node"])?a.insertBefore(d,b):a.appendChild(d)},_getStdModTemplate:function(a){return d.create(b.TEMPLATES[a],this._stdModNode.get("ownerDocument"))},_addStdModContent:function(a,d,c){switch(c){case b.BEFORE:c=0;break;case b.AFTER:c=void 0;
break;default:c=b.REPLACE}a.insert(d,c)},_getPreciseHeight:function(a){var b=a?a.get("offsetHeight"):0;a&&a.hasMethod("getBoundingClientRect")&&(a=a.invoke("getBoundingClientRect"))&&(b=a.bottom-a.top);return b},_findStdModSection:function(a){return this.get(h).one("> ."+b.SECTION_CLASS_NAMES[a])},_parseStdModHTML:function(b){var d=this._findStdModSection(b);return d?(this._stdModParsed||(this._stdModParsed={},a.before(this._applyStdModParsedConfig,this,"_applyParsedConfig")),this._stdModParsed[b+
"Content"]=1,d.get("innerHTML")):null},_applyStdModParsedConfig:function(a,b,d){if(a=this._stdModParsed)a[p]=!(p in b)&&p in a,a[y]=!(y in b)&&y in a,a[t]=!(t in b)&&t in a},_getStdModContent:function(a){return this[a+"Node"]?this[a+"Node"].get("childNodes"):null},setStdModContent:function(a,b,d){this.set(a+"Content",b,{stdModPosition:d})},getStdModNode:function(a,b){var d=this[a+"Node"]||null;!d&&b&&(d=this._renderStdMod(a));return d},fillHeight:function(a){if(a){var b=this.get(h),d=[this.headerNode,
this.bodyNode,this.footerNode],f,e=0;f=0;for(var l=!1,t=0,p=d.length;t<p;t++)(f=d[t])&&(f!==a?e+=this._getPreciseHeight(f):l=!0);l&&((g.ie||g.opera)&&a.set("offsetHeight",0),b=b.get("offsetHeight")-parseInt(b.getComputedStyle("paddingTop"),10)-parseInt(b.getComputedStyle("paddingBottom"),10)-parseInt(b.getComputedStyle("borderBottomWidth"),10)-parseInt(b.getComputedStyle("borderTopWidth"),10),c.isNumber(b)&&(f=b-e,0<=f&&a.set("offsetHeight",f)))}}};a.WidgetStdMod=b},"3.10.1",{requires:["base-build",
"widget"]});
YUI.add("squarespace-table-shopping-cart",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.TableShoppingCart=a.Base.create("tableShoppingCart",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._getAdditionalFieldsFormTemplateSchema(function(a){this._additionalFieldsFormTemplate=a},this);this._additionalFieldsFormLightbox=new a.Squarespace.Widgets.FormLightbox;this._formWidget=null},destructor:function(){this._additionalFieldsFormLightbox.destroy();this._formWidget&&
this._formWidget.destroy()},renderUI:function(){e.superclass.renderUI.call(this);this._additionalFieldsFormLightbox.render(a.one("body"))},bindUI:function(){e.superclass.bindUI.call(this);this.get("model").on("change",this.syncUI,this);var b=this.get("contentBox");b.delegate("click",function(a){b.hasClass("loading-cart")||this._removeEntryRow(a.target.ancestor("tr"))},".remove-item",this);b.delegate("click",function(a){a.target.select()},".quantity input",this);var c=0,d;b.delegate("valuechange",
function(b){var f=b.currentTarget.get("parentNode");c+=1300;d&&d.stop();f.one("input").setStyle("opacity",0.3);setTimeout(a.bind(function(){d=new a.Anim({node:f.one("input"),to:{opacity:1},easing:a.Easing.easeOutSine,duration:0.5});d.run();setTimeout(a.bind(function(){c-=1300;0===c&&this._onQuantityChange(b)},this),1E3)},this),300)},".quantity input",this);b.delegate("click",this._onAdditionalFieldsEdit,".additional-fields",this);this._additionalFieldsFormLightbox.on("close",function(){this._formWidget&&
this._formWidget.destroy()},this)},syncUI:function(){e.superclass.syncUI.call(this);var b=this.get("model"),c=this.get("contentBox");c.one(".subtotal .price").setContent(a.Squarespace.Commerce.moneyString(b.get("subtotalCents")));c.one("tbody").empty();0===b.get("totalQuantity")?c.addClass("empty"):(c.removeClass("empty"),a.Array.each(b.get("entries"),function(a){0<a.quantity&&this._appendEntryRow(a)},this),this._focusedInputItemId&&(b=this._getEntryRowByItemId(this._focusedInputItemId))&&b.one(".quantity input").focus());
c.all(".cooldown").addClass("hidden")},showError:function(b,c){(new a.Squarespace.Widgets.ResponsiveAlert).show(b,c)},_appendEntryRow:function(b){var c=b.item,d=c.items,g=c.productType,f=g===a.Squarespace.ProductTypes.PHYSICAL,e=b.chosenVariant,k=a.Lang.isValue(e),m=a.Squarespace.UITemplates.renderAsNodeOrDocFrag(this.getProperty("HANDLEBARS_ITEM_TEMPLATE"),{isPhysicalProduct:f});m.setData("entry",b);m.setAttribute("data-item-id",c.id);k&&m.setAttribute("data-chosen-variant-sku",e.sku);c=m.one(".item-image");
d=a.Lang.isValue(d)&&0<d.length?d[0].assetUrl.replace("http://","https://")+"?format=100w":"/universal/images-v6/configuration/template-no-image.png";c.append('<img src="'+d+'" />');d=m.one(".item-desc");c=this.get("linkItems")?'<a href="'+b.item.fullUrl+'">'+b.item.title+"</a>":"<div>"+b.item.title+"</div>";d.append(c);var u;k?u='<div class="variant-info">'+a.Squarespace.Commerce.variantFormat(e)+"</div>":g===a.Squarespace.ProductTypes.DIGITAL&&(u='<div class="variant-info">Digital Download</div>');
u&&d.append(u);b.additionalFields&&d.append('<div class="additional-fields">Edit Details</div>');g=b.quantity;f&&(f=m.one(".quantity input"),f.setAttrs({maxlength:4,size:String(g).length,value:g}),f.plug(a.Squarespace.Plugin.IntegerRestrictor));m.one(".price").setContent(a.Squarespace.Commerce.moneyString(g*b.purchasePriceCents));this.get("contentBox").one("tbody").append(m)},_removeEntryRow:function(b){b.plug(a.Squarespace.Animations.Fadeable,{duration:0.25});b.once("hidden",function(){this._updateEntryQuantity(b.getData("entry"),
0)},this);b.hide()},_getEntryRowByItemId:function(a){var c;this.get("contentBox").all("tbody tr").each(function(d){d.getData("entry").itemId===a&&(c=d)},this);return c},_onQuantityChange:function(b){var c=b.target;b=c.get("value");var d=c.ancestor("tr"),g=d.getData("entry"),f=Number(b),e=g.quantity;this._focusedInputItemId=g.itemId;""===b||f===e||(0===f?(new a.Squarespace.ConfirmationDialog({onSuccess:function(){this._removeEntryRow(d)},onCancel:function(){c.set("value",e)},scope:this})).show("Remove Item",
"You have set this item's quantity to 0. This will remove it from your cart. Would you like to continue?"):this._updateEntryQuantity(g,f,e,c))},_onAdditionalFieldsEdit:function(b){if(this._additionalFieldsFormTemplate&&!this.get("contentBox").hasClass("loading-cart")){var c=b.target.ancestor("tr").getData("entry"),d=this._formWidget=new a.Squarespace.Widgets.AsyncForm({form:c.item.additionalFieldsForm,formTemplate:this._additionalFieldsFormTemplate,formSubmitButtonText:"Save",formData:a.JSON.parse(c.additionalFields),
formName:"Product Details",showTitle:!0});d.on("submission",function(a){d.setStateSaving();this.get("model").update(c,null,a.data,function(a,b){d.setStateEditing();this._additionalFieldsFormLightbox.close()},this)},this);this._additionalFieldsFormLightbox.set("content",d);this._additionalFieldsFormLightbox.open()}},_updateEntryQuantity:function(a,c,d,g){this.get("model").update(a,c,null,function(a){a&&(this.showError("Unable to Update Quantity",a),g&&g.inDoc()&&g.set("value",d))},this)},_getAdditionalFieldsFormTemplateSchema:function(b,
c){a.Data.get({url:"/api/template/GetTemplateSchema",data:{componentType:"widget",type:a.Squarespace.WidgetTypes.FORM},success:function(a){b.call(c||this,a)}},this)}},{ATTRS:{model:{value:null,validator:function(b){return a.instanceOf(b,a.Squarespace.Models.ShoppingCart)}},linkItems:{value:!1}}})},"1.0",{requires:"base node anim squarespace-enum squarespace-animations squarespace-commerce-utils squarespace-ui-base squarespace-ui-templates squarespace-models-shopping-cart squarespace-plugin-integer-restrictor squarespace-responsive-confirmation-dialog squarespace-form-lightbox squarespace-async-form".split(" ")});
YUI.add("squarespace-commerce-analytics",function(a){var e=new a.Base.create("commerceTrack",a.Base,[],{itemViewed:function(a){this.fire("commerce-item-viewed",a)},itemAdded:function(a){this.fire("commerce-item-added",a)},itemRemoved:function(a){this.fire("commerce-item-removed",a)},itemModified:function(a){this.fire("commerce-item-modified",a)},checkoutStarted:function(a){this.fire("commerce-checkout-started",a)},checkoutConfirmed:function(a){this.fire("commerce-checkout-confirmed",a)},contributionConfirmed:function(a){this.fire("commerce-contribution-confirmed",
a)}},{ATTRS:{}});a.namespace("Squarespace").CommerceAnalytics=new e;var b=a.Base.create("commerceAnalytics",a.Base,[],{initializer:function(){a.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this);a.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this);a.Squarespace.CommerceAnalytics.on("commerce-item-removed",this._getProtectedTracker("onItemRemoved"),this);a.Squarespace.CommerceAnalytics.on("commerce-item-modified",
this._getProtectedTracker("onItemModified"),this);a.Squarespace.CommerceAnalytics.on("commerce-checkout-started",this._getProtectedTracker("onCheckoutStarted"),this);a.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this);a.Squarespace.CommerceAnalytics.on("commerce-contribution-confirmed",this._getProtectedTracker("onContributionConfirmed"),this);this._setCartMode()},_setCartMode:function(){var a=!0;try{a=Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.testModeOn}catch(b){}this.cartMode=
a?"test":"live"},_getProtectedTracker:function(a){return function(b){try{this[a].call(this,b)}catch(c){}}},onItemViewed:function(a){},onItemAdded:function(a){},onItemRemoved:function(a){},onItemModified:function(a){},onCheckoutStarted:function(a){},onCheckoutConfirmed:function(a){},onContributionConfirmed:function(a){}},{ATTRS:{}}),e=a.Base.create("commerceAnalyticsInternal",b,[],{_createCartData:function(a){return{CartOrderId:a.id,CartSubtotal:a.subtotalCents/100,CartTax:a.taxCents/100,CartCurrency:"USD",
CartMode:this.cartMode}},_createProductData:function(b){var c=b.productType;return{ProductId:b.itemId,ProductName:b.title,ProductType:c===a.Squarespace.ProductTypes.PHYSICAL?"PHYSICAL":c===a.Squarespace.ProductTypes.DIGITAL?"DIGITAL":"SERVICE",ProductSKU:b.chosenVariant?b.chosenVariant.sku:"",ProductPrice:b.purchasePriceCents/100,ProductQuantity:b.quantity}},_getItemVariantPrice:function(b){return a.Object.hasKey(b,"onSale")&&b.onSale?(a.Object.hasKey(b,"salePrice")?b.salePrice:b.salePriceCents)/
100:(a.Object.hasKey(b,"price")?b.price:b.priceCents)/100},_getItemPrice:function(b){var c=0;a.Object.hasKey(b,"variants")&&0<b.variants.length?(a.Array.each(b.variants,function(a){c+=this._getItemVariantPrice(a)},this),c/=b.variants.length):c=this._getItemVariantPrice(b);return c},_createItemData:function(a){return{ProductId:a.id,ProductName:a.title}},_createItemAddedData:function(b){return a.merge(this._createCartData(b.shoppingCart),this._createProductData(b.newlyAdded))},_createItemRemovedData:function(b){return a.merge(this._createCartData(b.shoppingCart),
this._createProductData(b.updatedEntry))},_createItemModifiedData:function(b){return a.merge(this._createCartData(b.shoppingCart),this._createProductData(b.updatedEntry))},_createItemCheckoutStartedData:function(b,c){return a.merge(this._createCartData(b),this._createProductData(c))},_createItemCheckoutCompletedData:function(b,c){return a.merge(this._createCartData(b),this._createProductData(c))},_track:function(b,c){a.Squarespace.Analytics.trackInternal(b,c)},onItemViewed:function(a){this._track("shopper_product_viewed",
this._createItemData(a))}},{ATTRS:{}}),c=a.Base.create("commerceAnalyticsMixpanel",e,[],{_track:function(b,c){a.Squarespace.Analytics.track(b,c)},onItemViewed:function(a){this._track("shopper_product_viewed",this._createItemData(a))},onItemAdded:function(a){this._track("shopper_product_added",this._createItemAddedData(a))},onItemRemoved:function(a){this._track("shopper_product_removed",this._createItemRemovedData(a))},onItemModified:function(a){this._track("shopper_product_modified",this._createItemModifiedData(a))},
onCheckoutStarted:function(b){a.each(b.entries,function(a){this._track("shopper_product_checkout_started",this._createItemCheckoutStartedData(b,a))},this)},onCheckoutConfirmed:function(b){a.each(b.purchasedCart.entries,function(a){this._track("shopper_product_purchased",this._createItemCheckoutCompletedData(b.purchasedCart,a))},this);this._track("shopper_order_submitted",{CartOrderId:b.purchasedCart.id,CartCurrency:"USD",CartGrandTotal:b.purchasedCart.grandTotalCents/100,CartSubtotal:b.purchasedCart.subtotalCents/
100,CartTax:b.purchasedCart.taxCents/100,CartShipping:b.purchasedCart.shippingCostCents/100,CartTotalQuantity:b.purchasedCart.totalQuantity,CartMode:this.cartMode})},onContributionConfirmed:function(a){this._track("donation_submitted",{Currency:"USD",Total:a.amountCents/100,CartMode:this.cartMode})}},{ATTRS:{}}),b=a.Base.create("commerceAnalyticsGoogle",b,[],{onCheckoutConfirmed:function(b){_gaq&&(_gaq.push(["_addTrans",b.id,"",b.purchasedCart.subtotalCents/100,b.purchasedCart.taxCents/100,b.purchasedCart.shippingCostCents/
100,b.customer.billingAddress.city,b.customer.billingAddress.state,b.customer.billingAddress.country]),a.each(b.purchasedCart.entries,function(a){_gaq.push(["_addItem",b.id,a.chosenVariant?a.chosenVariant.sku:"digital",a.title,"",a.purchasePriceCents/100,a.quantity])}),_gaq.push(["_trackTrans"]))}},{ATTRS:{}});new e;new c;new b;a.Lang.isObject(Static)&&a.Object.hasKey(Static,"SQUARESPACE_CONTEXT")&&a.Object.hasKey(Static.SQUARESPACE_CONTEXT,"item")&&Static.SQUARESPACE_CONTEXT.item.recordType===a.Squarespace.ContentConstants.STORE_ITEM&&
a.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)},"1.0",{requires:["event-custom","node","base","squarespace-enum","squarespace-util"]});
YUI.add("squarespace-plugin-money-formatter",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.MoneyFormatter=a.Base.create("moneyFormatter",a.Squarespace.Plugin.NumericFormatter,[],{_transformToData:function(e){return Number(a.Squarespace.Utils.convertToCents(e))}},{NS:"moneyFormatterPlugin",ATTRS:{prefixUnit:{valueFn:function(){return a.Squarespace.Commerce.currencySymbol()}},displayFormatter:{value:a.Squarespace.Commerce.moneyFormat}}})},"1.0",{requires:["plugin","squarespace-util",
"squarespace-commerce-utils","squarespace-plugin-numeric-formatter"]});
YUI.add("squarespace-checkout-saved-billing-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-saved-billing.html"]=a(function(a,b,g,f,e){this.compilerInfo=[4,">= 1.0.0"];g=this.merge(g,a.helpers);e=e||{};var k=this.escapeExpression;a='<div class="saved-fieldset">\n\n  <div>\n    ';(f=g.billingFirstName)?f=f.call(b,{hash:{},data:e}):(f=b.billingFirstName,f="function"===typeof f?f.apply(b):f);a+=k(f)+"&nbsp;";(f=g.billingLastName)?f=f.call(b,
{hash:{},data:e}):(f=b.billingLastName,f="function"===typeof f?f.apply(b):f);a+=k(f)+"\n  </div>\n\n  <div>";(f=g.email)?f=f.call(b,{hash:{},data:e}):(f=b.email,f="function"===typeof f?f.apply(b):f);a+=k(f)+"</div>\n\n  <div>";(f=g.billingAddress1)?f=f.call(b,{hash:{},data:e}):(f=b.billingAddress1,f="function"===typeof f?f.apply(b):f);a+=k(f)+"</div>\n  <div>";(f=g.billingAddress2)?f=f.call(b,{hash:{},data:e}):(f=b.billingAddress2,f="function"===typeof f?f.apply(b):f);a+=k(f)+"</div>\n\n  <div>\n    ";
if((f=g["if"].call(b,b.billingCity,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c;(c=g.billingCity)?c=c.call(a,{hash:{},data:b}):(c=a.billingCity,c="function"===typeof c?c.apply(a):c);return k(c)},e),data:e}))||0===f)a+=f;if((f=g["if"].call(b,b.billingState,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,d;c=",&nbsp;";(d=g.billingState)?d=d.call(a,{hash:{},data:b}):(d=a.billingState,d="function"===typeof d?d.apply(a):d);return c+=k(d)},e),data:e}))||0===f)a+=f;if((f=
g["if"].call(b,b.billingZip,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d;c="&nbsp;&nbsp;";(d=g.billingZip)?d=d.call(a,{hash:{},data:b}):(d=a.billingZip,d="function"===typeof d?d.apply(a):d);return c+=k(d)},e),data:e}))||0===f)a+=f;a+="\n  </div>\n\n  <div>";(f=g.billingCountry)?f=f.call(b,{hash:{},data:e}):(f=b.billingCountry,f="function"===typeof f?f.apply(b):f);a+=k(f)+"</div>\n\n  ";if((f=g["if"].call(b,b.phone,{hash:{},inverse:this.noop,fn:this.program(7,function(a,b){var c,
d;c="\n    <div>";(d=g.phone)?d=d.call(a,{hash:{},data:b}):(d=a.phone,d="function"===typeof d?d.apply(a):d);return c+=k(d)+"</div>\n  "},e),data:e}))||0===f)a+=f;a+="\n\n  ";if((f=g["if"].call(b,b.note,{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){var c,d;c="\n    <br />\n    <div>";(d=g.note)?d=d.call(a,{hash:{},data:b}):(d=a.note,d="function"===typeof d?d.apply(a):d);return c+=k(d)+"</div>\n  "},e),data:e}))||0===f)a+=f;return a+"\n\n</div>\n"})})();a.Handlebars.registerPartial("checkout-saved-billing.html".replace("/",
"."),e.templates["checkout-saved-billing.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-pill-shopping-cart",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.PillShoppingCart=a.Base.create("pillShoppingCart",a.Squarespace.Widgets.SSWidget,[],{renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").plug(a.Squarespace.Animations.Scalable,{duration:0.25});this._hide(!0);this.get("contentBox").addClass(this.get("useLightCart")?"light":"dark")},bindUI:function(){e.superclass.bindUI.call(this);this.get("model").on("change",
this.syncUI,this);this.get("contentBox").on("click",function(){window.location="/commerce/show-cart"})},syncUI:function(){e.superclass.syncUI.call(this);var b=this.get("model"),c=b.get("totalQuantity"),d=this.get("contentBox"),g=function(){d.one(".total-quantity").setContent(100<c?"100+":c);d.one(".suffix").setContent(1===c?"item":"items");d.one(".subtotal .price").setContent(a.Squarespace.Commerce.moneyString(b.get("subtotalCents")))};0<c?(g(),this._show()):(this._hide(),g())},_show:function(){var b=
this.get("boundingBox");if(b.hasClass("sqs-scalable-hidden"))b.show();else{var c=a.Easing.easeOutStrong,d=new a.Anim({node:b,to:{opacity:0.7},duration:0.2,easing:c}),e=new a.Anim({node:b,to:{opacity:1},duration:0.5,easing:c});d.on("end",function(){e.run()});d.run()}},_hide:function(a){var c=this.get("boundingBox");c.hasClass("sqs-scalable-hidden")||c.hide(a)}},{CSS_PREFIX:"sqs-pill-shopping-cart",HANDLEBARS_TEMPLATE:"pill-shopping-cart.html",ATTRS:{model:{value:null,validator:function(b){return a.instanceOf(b,
a.Squarespace.Models.ShoppingCart)}},useLightCart:{value:!1}}})},"1.0",{requires:"base node cookie squarespace-ss-widget squarespace-commerce-utils squarespace-animations squarespace-models-shopping-cart squarespace-pill-shopping-cart-template".split(" ")});
YUI.add("squarespace-checkout-form-shipping-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-form-shipping.html"]=a(function(a,b,e,f,h){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);h=h||{};var k;f=e.blockHelperMissing;a='<div class="title">Shipping Options<a class="edit-button">edit</a></div>\n\n<fieldset>\n\n\n  \x3c!-- Ship to Billing Address --\x3e\n  <div id="ship-to-billing" class="check-element';k={hash:{},inverse:this.program(1,
function(a,b){return" active"},h),fn:this.noop,data:h};(h=e.useAddressForShipping)?h=h.call(b,k):(h=b.useAddressForShipping,h="function"===typeof h?h.apply(b):h);e.useAddressForShipping||(h=f.call(b,h,k));if(h||0===h)a+=h;return a+'">\n    Shipping Address same as Billing\n  </div>\n  <input name="shipToBilling" value="true" type="hidden" />\n\n\n  \x3c!-- Shipping Address --\x3e\n  <div id="shipping-address-wrapper" class="hidden">\n\n\n    \x3c!-- First Name --\x3e\n    <div id="shipping-first-name" data-label="First Name" class="field first-name required">\n      <label>First Name</label>\n      <input name="shippingFirstName" class="field-element"\n          placeholder="First Name" x-autocompletetype="given-name" type="text" spellcheck="false" maxlength="30" />\n    </div>\n\n\n    \x3c!-- Last Name --\x3e\n    <div id="shipping-last-name" data-label="Last Name" class="field last-name required">\n      <label>Last Name</label>\n      <input name="shippingLastName" class="field-element" placeholder="Last Name"\n          x-autocompletetype="surname" type="text" spellcheck="false" maxlength="30" />\n    </div>\n\n\n    \x3c!-- Shipping Address 1 --\x3e\n    <div id="shipping-address-1" data-label="Address Line 1" class="field address required">\n      <label>Address Line 1</label>\n      <input name="shippingAddress1" class="field-element" type="text" \n          x-autocompletetype="address-line1" placeholder="Street Address 1" spellcheck="false" maxlength="50" />\n    </div>\n\n\n    \x3c!-- Shipping Address 2 --\x3e\n    <div id="shipping-address-2" data-label="Address Line 2" class="field address">\n      <label>Address Line 2</label>\n      <input name="shippingAddress2" class="field-element" type="text"\n          placeholder="Street Address 2" x-autocompletetype="address-line2" spellcheck="false" maxlength="50" />\n    </div>\n\n\n    \x3c!-- Country --\x3e\n    <div id="shipping-country" data-label="Country" class="field country required">\n      <label>Country</label>\n      <select name="shippingCountry" class="field-element"\n          x-autocompletetype="country-name">\n      </select>\n    </div>\n\n\n    \x3c!-- City --\x3e\n    <div id="shipping-city" data-label="City" class="field city required">\n      <label>City</label>\n      <input name="shippingCity" class="field-element" placeholder="City"\n          x-autocompletetype="city" type="text" spellcheck="false" maxlength="30" />\n    </div>\n\n\n    \x3c!-- State/Province --\x3e\n    <div id="shipping-state" data-label="State/Province" class="field state required">\n      <label>State/Province</label>\n      <select name="shippingState" class="field-element"\n          x-autocompletetype="state">\n      </select>\n    </div>\n\n\n    \x3c!-- Zip Code --\x3e\n    <div id="shipping-zip" data-label="Zip Code" class="field zip required">\n      <label>Zip / Postal</label>\n      <input name="shippingZip" class="field-element"\n          x-autocompletetype="postal-code" placeholder="Zip / Postal" type="text" spellcheck="false" maxlength="10" />\n    </div>\n\n  </div> \x3c!-- end #shipping-address --\x3e\n\n\n  <div class="subtitle">Select a Shipping Method</div>\n\n\n  \x3c!-- Shipping Options --\x3e\n  <div id="shipping-options"></div>\n\n\n  \x3c!-- Continue --\x3e\n  <div class = "btn-container">\n    <div class="button continue-button">Continue</div>\n  </div>\n\n </fieldset>\n'})})();
a.Handlebars.registerPartial("checkout-form-shipping.html".replace("/","."),e.templates["checkout-form-shipping.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-contribution-summary-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["contribution-summary.html"]=a(function(a,b,e,f,h){function k(a,b){var c,d;c="\n<p>\n  ";(d=e.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===s?d.apply(a):d);return c+=l(d)+"\n</p>\n"}function m(a,b){var c,d;c='\n      <div class="suggested-contributions">\n        ';if((d=e.each.call(a,a.suggestedContributions,{hash:{},inverse:p.noop,
fn:p.program(5,u,b),data:b}))||0===d)c+=d;return c+'\n\n        <div class="option">\n          <input type="radio" name="contribution" id="other" value="other" />\n          <label for="other">Other \n            &nbsp;<input type="text" placeholder="Enter Other Amount" name="contributionAmount" />\n          </label>\n          <br />\n        </div>\n      </div>\n    '}function u(a,b){var c,d;c='\n          <div class="option">\n            <input type="radio" name="contribution" id="';(d=e.amountCents)?
d=d.call(a,{hash:{},data:b}):(d=a.amountCents,d=typeof d===s?d.apply(a):d);c+=l(d)+'" value="';(d=e.amountCents)?d=d.call(a,{hash:{},data:b}):(d=a.amountCents,d=typeof d===s?d.apply(a):d);c+=l(d)+'" />\n            <label for="';(d=e.amountCents)?d=d.call(a,{hash:{},data:b}):(d=a.amountCents,d=typeof d===s?d.apply(a):d);c+=l(d)+'"><span class="sqs-money-native">';(d=e.amountDollars)?d=d.call(a,{hash:{},data:b}):(d=a.amountDollars,d=typeof d===s?d.apply(a):d);c+=l(d)+"</span>&nbsp;";if((d=e["if"].call(a,
a.label,{hash:{},inverse:p.noop,fn:p.program(6,n,b),data:b}))||0===d)c+=d;return c+"</label><br />\n          </div>\n        "}function n(a,b){var c,d;c="(";(d=e.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===s?d.apply(a):d);return c+=l(d)+")"}function r(a,b){return'\n    \n      <input type="text" placeholder="Enter Other Amount" name="contributionAmount" /><br />\n    '}this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);h=h||{};a="";var s="function",l=this.escapeExpression,
p=this;if((b=e["with"].call(b,b.donatePage,{hash:{},inverse:p.noop,fn:p.program(1,function(a,b){var c,d;c='\n\n<div class="title">Your Contribution<a class="edit-button">edit</a></div>\n\n<fieldset>\n\n';if((d=e["if"].call(a,a.description,{hash:{},inverse:p.noop,fn:p.program(2,k,b),data:b}))||0===d)c+=d;c+='\n\n<div class="choices">\n\n  <div class="title prompt"></div>\n  <div class="contribution-option-list">\n\n    \n    ';if((d=e["if"].call(a,a.suggestedContributions,{hash:{},inverse:p.program(8,
r,b),fn:p.program(4,m,b),data:b}))||0===d)c+=d;return c+'\n\n  </div>\n\n</div>\n\n\n\x3c!-- Continue --\x3e\n<div class="btn-container">\n  <div class="button continue-button">Continue</div>\n</div>\n\n</fieldset>\n'},h),data:h}))||0===b)a+=b;return a+"\n"})})();a.Handlebars.registerPartial("contribution-summary.html".replace("/","."),e.templates["contribution-summary.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-pill-shopping-cart-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["pill-shopping-cart.html"]=a(function(a,b,e,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(e,a.helpers);return'<div class="icon"></div>\n\n<div class="details">\n  Cart&nbsp;-&nbsp;\n    <span class="total-quantity"></span>\n    <span class="suffix"></span>\n</div>\n\n<span class="subtotal">\n  <span class="price"></span>\n</span>\n'})})();a.Handlebars.registerPartial("pill-shopping-cart.html".replace("/",
"."),e.templates["pill-shopping-cart.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-tourtip",function(a){a.mix(a.Node.DOM_EVENTS,{DOMNodeRemoved:!0});a.namespace("Squarespace").Tourtip=a.Base.create("tourtip",a.Widget,[],{initializer:function(e){var b={type:"tooltip",bodyContent:this._getContent(),zIndex:5E4};config=a.merge(b,e);if(config["align.node"]&&!a.one(config["align.node"])||config.align&&config.align.node&&!a.one(config.align.node))console.warn("The node specified as a target for the tooltip is missing: "+(config["align.node"]||config.align.node));else{this.alignNode=
a.one(config["align.node"]||(config.align?config.align.node:null));this.panel=new a.Squarespace.Panel(config);this.after("titleChange",this._setContent,this,this._getContent);this.after("bodyChange",this._setContent,this,this._getContent);this.after("iconChange",this._setContent,this,this._getContent);if(this.alignNode)this.alignNode.on("DOMNodeRemoved",this.hide,this);this.panel.on("click",this.hide,this);!a.Lang.isUndefined(config.hideIn)&&0<config.hideIn&&a.later(config.hideIn,this,this.hide)}},
hide:function(e){this.hidden||(e&&e.preventDefault(),this.hidden=!0,this.panel&&(e=new a.Anim({node:this.panel.get("boundingBox"),to:{opacity:0},duration:0.15}),e.on("end",function(){this.destroyer();this.fire("hidden")},this),e.run()))},_getContent:function(){var e=this.get("title"),b=this.get("body"),c=this.get("icon"),c=a.Node.create('<div class="'+this.getClassName()+" "+this.getClassName(c)+'"></div>');e&&c.append('<div class="'+this.getClassName("title")+'">'+e+"</div>");e=a.Node.create('<div class="'+
this.getClassName("body")+'"></div>');e.setContent(b);c.append(e);return c},_setContent:function(a){this.panel.set("bodyContent",a)},destroyer:function(){this.panel.destroy()}},{CSS_PREFIX:"sqs-tourtip",NAME:"tip",ATTRS:{icon:{value:"open",validator:function(a){return"info"===a||"question"===a||"okay"===a||"alert"===a||"open"===a}},title:{},body:{},direction:{value:"below"}}})},"0.1.0",{requires:["node","squarespace-panel"]});
YUI.add("squarespace-plugin-pulsewarn",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.PulseWarn=a.Base.create("pulseWarn",a.Plugin.Base,[],{initializer:function(e){this.config=e;this.set("color",e.color);this.set("useClass",e.useClass);this.set("targetClass",e.targetClass);this.set("iterations",e.iterations);a.Lang.isUndefined(e.interval)||this.set("interval",e.interval);this._timer=null},warn:function(){var e=this.get("host"),b=this.get("iterations"),c=e.getStyle("backgroundColor"),
d=this.get("color");a.Lang.isNull(this._timer)||(this._timer.cancel(),this._timer=null);if(this.get("useClass")){var g=this.get("targetClass"),c=this.get("interval");this.fire("start");e.addClass(g);this._timer=a.later(c,this,function(){0===b?(e.removeClass(g),this.fire("stop"),this._timer.cancel(),this._timer=null):(e.hasClass(g)?e.removeClass(g):e.addClass(g),b--)},{},!0)}else{var f=new a.Anim({node:e,to:{backgroundColor:d,opacity:0.8},easing:this.get("easingUp"),duration:this.get("duration")}),
h=new a.Anim({node:e,to:{backgroundColor:c,opacity:1},easing:this.get("easingDown"),duration:this.get("duration")});f.on("end",function(){0<b&&h.run();b--});h.on("end",function(){0<b?f.run():this.fire("stop")},this);this.fire("start");f.run()}}},{NS:"pulseWarn",ATTRS:{useClass:{value:!1},iterations:{value:3},color:{value:"#c1b12e"},interval:{value:2E3},duration:{value:0.7},easingUp:{value:a.Easing.easeInSine},easingDown:{value:a.Easing.easeOutSine}}})},"1.0",{requires:["base","plugin","anim"]});
YUI.add("squarespace-product-utils",function(a){a.Squarespace.ProductUtils={initializeVariantDropdowns:function(){a.all(".product-variants[data-variants]").each(function(e){var b=JSON.parse(e.getAttribute("data-variants")),c=e.all("select"),d=e.siblings(".product-price").item(0),g;d&&(g=d.getHTML());a.Squarespace.ProductUtils._checkVariantStockAndPrice(e,b,c,d,g);c.detach("change");c.each(function(f){f.after("change",function(f){a.Squarespace.ProductUtils._checkVariantStockAndPrice(e,b,c,d,g)},this)},
this)},this)},_checkVariantStockAndPrice:function(e,b,c,d,g){e.removeAttribute("data-unselected-options");e.removeAttribute("data-selected-variant");e.removeAttribute("data-variant-in-stock");var f=e.one(".variant-out-of-stock");f&&f.remove();var h=[],f=null,k=!1,m={};c.each(function(a){var b=a.get("value");a=a.getAttribute("data-variant-option-name");"none"!=b?m[a]=b:h.push(a)},this);if(0===h.length){for(c=0;c<b.length;c++){g=b[c];var u=!0,n;for(n in m)if(m[n]!=g.attributes[n]){u=!1;break}if(u){f=
g;if(g.unlimited||0<g.qtyInStock)k=!0;break}}!f&&d?d.set("text","Unavailable"):d&&(f.onSale?(d.setHTML(a.Squarespace.Commerce.moneyString(f.salePrice)),d.append(a.Node.create('<span> </span><span class="original-price">'+a.Squarespace.Commerce.moneyString(f.price)+"</span>"))):d.setHTML(a.Squarespace.Commerce.moneyString(f.price)));f&&!k&&e.append(a.Node.create('<div class="variant-out-of-stock">Out of stock.</div>'))}else d&&d.getHTML()!==g&&d.setHTML(g);e.setAttribute("data-unselected-options",
JSON.stringify(h));f&&e.setAttribute("data-selected-variant",JSON.stringify(f));k&&e.setAttribute("data-variant-in-stock",k)}}},"1.0",{requires:["base","node","squarespace-commerce-utils"]});
YUI.add("squarespace-checkout-form-shipping-options-option-template",function(a){var e=a.Handlebars;(function(){var a=e.template;(e.templates=e.templates||{})["checkout-form-shipping-options-option.html"]=a(function(a,b,e,f,h){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);h=h||{};var k=this.escapeExpression,m=e.helperMissing;a='<div class="shipping-option ';if((f=e["if"].call(b,b.showAlert,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"disabled"},h),data:h}))||0===
f)a+=f;a+='">\n\n  <div class="option">\n\n    <label class="shipping-option-label">\n\n      <input type="radio" value="';(f=e.id)?f=f.call(b,{hash:{},data:h}):(f=b.id,f="function"===typeof f?f.apply(b):f);a+=k(f)+'" title="';(f=e.name)?f=f.call(b,{hash:{},data:h}):(f=b.name,f="function"===typeof f?f.apply(b):f);a+=k(f)+'" data-computed-cost="';(f=e.computedCost)?f=f.call(b,{hash:{},data:h}):(f=b.computedCost,f="function"===typeof f?f.apply(b):f);a+=k(f)+'"\n          name="selectedShippingOption" ';
if((f=e["if"].call(b,b.showAlert,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return'disabled="true"'},h),data:h}))||0===f)a+=f;a+=' />\n      <span class="option-name">';(f=e.name)?f=f.call(b,{hash:{},data:h}):(f=b.name,f="function"===typeof f?f.apply(b):f);a+=k(f)+" ";if((f=e["if"].call(b,b.speed,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d;c="(";(d=e.speed)?d=d.call(a,{hash:{},data:b}):(d=a.speed,d="function"===typeof d?d.apply(a):d);return c+=k(d)+")"},h),data:h}))||
0===f)a+=f;h={hash:{},data:h};return a=a+'</span>\n\n      <div class="shipping-failure">\n        <img src="/universal/images-v6/dialog/tiny-alert-inverted.png" />\n      </div>\n\n      <span class="cost">&mdash;&nbsp;<b>'+(k((f=e["money-string"]||b["money-string"],f?f.call(b,b.computedCost,h):m.call(b,"money-string",b.computedCost,h)))+"</b></span>\n\n    </label>\n\n  </div>\n\n</div>")})})();a.Handlebars.registerPartial("checkout-form-shipping-options-option.html".replace("/","."),e.templates["checkout-form-shipping-options-option.html"])},
"1.0",{requires:["handlebars-base"]});
YUI.add("widget-child",function(a,e){function b(){a.after(this._syncUIChild,this,"syncUI");a.after(this._bindUIChild,this,"bindUI")}var c=a.Lang;b.ATTRS={selected:{value:0,validator:c.isNumber},index:{readOnly:!0,getter:function(){var a=this.get("parent"),b=-1;a&&(b=a.indexOf(this));return b}},parent:{readOnly:!0},depth:{readOnly:!0,getter:function(){for(var a=this.get("parent"),b=this.get("root"),c=-1;a;){c+=1;if(a==b)break;a=a.get("parent")}return c}},root:{readOnly:!0,getter:function(){var b=function(c){var e=
c.get("parent"),h=c.ROOT_TYPE,k=e;h&&(k=e&&a.instanceOf(e,h));return k?b(e):c};return b(this)}}};b.prototype={ROOT_TYPE:null,_getUIEventNode:function(){var a=this.get("root"),b;a&&(b=a.get("boundingBox"));return b},next:function(a){var b=this.get("parent"),c;b&&(c=b.item(this.get("index")+1));!c&&a&&(c=b.item(0));return c},previous:function(a){var b=this.get("parent"),c=this.get("index"),e;b&&0<c&&(e=b.item([c-1]));!e&&a&&(e=b.item(b.size()-1));return e},remove:function(b){var e,f;c.isNumber(b)?f=
a.WidgetParent.prototype.remove.apply(this,arguments):(e=this.get("parent"))&&(f=e.remove(this.get("index")));return f},isRoot:function(){return this==this.get("root")},ancestor:function(a){var b=this.get("root"),c;if(this.get("depth")>a)for(c=this.get("parent");c!=b&&c.get("depth")>a;)c=c.get("parent");return c},_uiSetChildSelected:function(a){var b=this.get("boundingBox"),c=this.getClassName("selected");0===a?b.removeClass(c):b.addClass(c)},_afterChildSelectedChange:function(a){this._uiSetChildSelected(a.newVal)},
_syncUIChild:function(){this._uiSetChildSelected(this.get("selected"))},_bindUIChild:function(){this.after("selectedChange",this._afterChildSelectedChange)}};a.WidgetChild=b},"3.10.1",{requires:["base-build","widget"]});
YUI.add("panel",function(a,e){var b=a.ClassNameManager.getClassName;a.Panel=a.Base.create("panel",a.Widget,[a.WidgetPosition,a.WidgetStdMod,a.WidgetAutohide,a.WidgetButtons,a.WidgetModality,a.WidgetPositionAlign,a.WidgetPositionConstrain,a.WidgetStack],{BUTTONS:{close:{label:"Close",action:"hide",section:"header",template:'<button type="button" />',classNames:b("button","close")}}},{ATTRS:{buttons:{value:["close"]}}})},"3.10.1",{requires:"widget widget-autohide widget-buttons widget-modality widget-position widget-position-align widget-position-constrain widget-stack widget-stdmod".split(" "),
skinnable:!0});
YUI.add("widget-anim",function(a,e){function b(a){b.superclass.constructor.apply(this,arguments)}b.NS="anim";b.NAME="pluginWidgetAnim";b.ANIMATIONS={fadeIn:function(){var b=this.get("host"),d=b.get("boundingBox"),e=new a.Anim({node:d,to:{opacity:1},duration:this.get("duration")});b.get("visible")||d.setStyle("opacity",0);e.on("destroy",function(){this.get("node").setStyle("opacity",a.UA.ie?1:"")});return e},fadeOut:function(){return new a.Anim({node:this.get("host").get("boundingBox"),to:{opacity:0},
duration:this.get("duration")})}};b.ATTRS={duration:{value:0.2},animShow:{valueFn:b.ANIMATIONS.fadeIn},animHide:{valueFn:b.ANIMATIONS.fadeOut}};a.extend(b,a.Plugin.Base,{initializer:function(a){this._bindAnimShow();this._bindAnimHide();this.after("animShowChange",this._bindAnimShow);this.after("animHideChange",this._bindAnimHide);this.beforeHostMethod("_uiSetVisible",this._uiAnimSetVisible)},destructor:function(){this.get("animShow").destroy();this.get("animHide").destroy()},_uiAnimSetVisible:function(b){if(this.get("host").get("rendered"))return b?
(this.get("animHide").stop(),this.get("animShow").run()):(this.get("animShow").stop(),this.get("animHide").run()),new a.Do.Prevent},_uiSetVisible:function(a){var b=this.get("host"),e=b.getClassName("hidden");b.get("boundingBox").toggleClass(e,!a)},_bindAnimShow:function(){this.get("animShow").on("start",a.bind(function(){this._uiSetVisible(!0)},this))},_bindAnimHide:function(){this.get("animHide").after("end",a.bind(function(){this._uiSetVisible(!1)},this))}});a.namespace("Plugin").WidgetAnim=b},
"3.10.1",{requires:["anim-base","plugin","widget"]});
YUI.add("widget-buttons",function(a,e){function b(){this._stdModNode||a.error("WidgetStdMod must be added to a Widget before WidgetButtons.");this._buttonsHandles={}}var c=a.Array,d=a.Lang,g=a.Object,f=a.Plugin.Button,h=a.Widget,k=a.WidgetStdMod,m=a.ClassNameManager.getClassName,u=d.isArray,n=d.isNumber,r=d.isString,s=d.isValue;b.ATTRS={buttons:{getter:"_getButtons",setter:"_setButtons",value:{}},defaultButton:{readOnly:!0,value:null}};b.CLASS_NAMES={button:m("button"),buttons:h.getClassName("buttons"),
primary:m("button","primary")};b.HTML_PARSER={buttons:function(a){return this._parseButtons(a)}};b.NON_BUTTON_NODE_CFG="action classNames context events isDefault section".split(" ");b.prototype={BUTTONS:{},BUTTONS_TEMPLATE:"<span />",DEFAULT_BUTTONS_SECTION:k.FOOTER,initializer:function(){this._mapButtons(this.get("buttons"));this._updateDefaultButton();this.after({buttonsChange:a.bind("_afterButtonsChange",this),defaultButtonChange:a.bind("_afterDefaultButtonChange",this)});a.after(this._bindUIButtons,
this,"bindUI");a.after(this._syncUIButtons,this,"syncUI")},destructor:function(){g.each(this._buttonsHandles,function(a){a.detach()});delete this._buttonsHandles;delete this._buttonsMap;delete this._defaultButton},addButton:function(a,b,d){var e=this.get("buttons"),f;a.getDOMNode||(a=this._mergeButtonConfig(a),b||(b=a.section));b||(b=this.DEFAULT_BUTTONS_SECTION);f=e[b]||(e[b]=[]);n(d)||(d=f.length);f.splice(d,0,a);d=c.indexOf(f,a);this.set("buttons",e,{button:a,section:b,index:d,src:"add"});return this},
getButton:function(a,b){if(s(a)){var c=this._buttonsMap;b||(b=this.DEFAULT_BUTTONS_SECTION);return n(a)?(c=this.get("buttons"),c[b]&&c[b][a]):1<arguments.length?c[b+":"+a]:c[a]}},removeButton:function(a,b){if(!s(a))return this;var d=this.get("buttons"),e;n(a)?(b||(b=this.DEFAULT_BUTTONS_SECTION),e=a,a=d[b][e]):(r(a)&&(a=this.getButton.apply(this,arguments)),g.some(d,function(d,f){e=c.indexOf(d,a);if(-1<e)return b=f,!0}));a&&-1<e&&(d[b].splice(e,1),this.set("buttons",d,{button:a,section:b,index:e,
src:"remove"}));return this},_bindUIButtons:function(){var b=a.bind("_afterContentChangeButtons",this);this.after({visibleChange:a.bind("_afterVisibleChangeButtons",this),headerContentChange:b,bodyContentChange:b,footerContentChange:b})},_createButton:function(d){var e,g,h,k;if(d.getDOMNode)return a.one(d.getDOMNode()).plug(f);e=a.merge({context:this,events:"click",label:d.value},d);d=a.merge(e);g=b.NON_BUTTON_NODE_CFG;h=0;for(k=g.length;h<k;h+=1)delete d[g[h]];d=f.createNode(d);h=e.context;g=e.action;
r(g)&&(g=a.bind(g,h));g=d.on(e.events,g,h);this._buttonsHandles[a.stamp(d,!0)]=g;d.setData("name",this._getButtonName(e));d.setData("default",this._getButtonDefault(e));c.each(c(e.classNames),d.addClass,d);return d},_getButtonContainer:function(c,d){var e=k.SECTION_CLASS_NAMES[c],f=b.CLASS_NAMES.buttons,e=this.get("contentBox").one("."+e+" ."+f);!e&&d&&(e=a.Node.create(this.BUTTONS_TEMPLATE),e.addClass(f));return e},_getButtonDefault:function(a){a=a.getDOMNode?a.getData("default"):a.isDefault;return r(a)?
"true"===a.toLowerCase():!!a},_getButtonName:function(a){return a.getDOMNode?a.getData("name")||a.get("name"):a&&(a.name||a.type)},_getButtons:function(a){var b={};g.each(a,function(a,c){b[c]=a.concat()});return b},_mapButton:function(a,b){var c=this._buttonsMap,d=this._getButtonName(a),e=this._getButtonDefault(a);d&&(c[d]=a,c[b+":"+d]=a);e&&(this._defaultButton=a)},_mapButtons:function(a){this._buttonsMap={};this._defaultButton=null;g.each(a,function(a,b){var c,d;c=0;for(d=a.length;c<d;c+=1)this._mapButton(a[c],
b)},this)},_mergeButtonConfig:function(b){var c,d;b=r(b)?{name:b}:a.merge(b);b.srcNode&&(c=b.srcNode,d=c.get("tagName").toLowerCase(),d=c.get("input"===d?"value":"text"),c={disabled:!!c.get("disabled"),isDefault:this._getButtonDefault(c),name:this._getButtonName(c)},d&&(c.label=d),a.mix(b,c,!1,null,0,!0));c=this._getButtonName(b);(c=this.BUTTONS&&this.BUTTONS[c])&&a.mix(b,c,!1,null,0,!0);return b},_parseButtons:function(a){var d="."+b.CLASS_NAMES.button,e=null;c.each(["header","body","footer"],function(a){var b=
this._getButtonContainer(a),b=b&&b.all(d),c;b&&!b.isEmpty()&&(c=[],b.each(function(a){c.push({srcNode:a})}),e||(e={}),e[a]=c)},this);return e},_setButtons:function(a){function b(a,e){if(u(a)){var f,g,h,l;f=0;for(g=a.length;f<g;f+=1)h=a[f],l=e,h.getDOMNode||(h=this._mergeButtonConfig(h),l||(l=h.section)),h=this._createButton(h),l||(l=c),(d[l]||(d[l]=[])).push(h)}}var c=this.DEFAULT_BUTTONS_SECTION,d={};u(a)?b.call(this,a):g.each(a,b,this);return d},_syncUIButtons:function(){this._uiSetButtons(this.get("buttons"));
this._uiSetDefaultButton(this.get("defaultButton"));this._uiSetVisibleButtons(this.get("visible"))},_uiInsertButton:function(a,c,d){var e=b.CLASS_NAMES.button,f=this._getButtonContainer(c,!0),e=f.all("."+e);f.insertBefore(a,e.item(d));this.setStdModContent(c,f,"after")},_uiRemoveButton:function(c,d,e){var f=a.stamp(c,this),g=this._buttonsHandles,h=g[f];h&&h.detach();delete g[f];c.remove();e||(e={});e.preserveContent||(c=this._getButtonContainer(d),e=b.CLASS_NAMES.button,c&&c.all("."+e).isEmpty()&&
(c.remove(),this._updateContentButtons(d)))},_uiSetButtons:function(a){var d=b.CLASS_NAMES.button;c.each(["header","body","footer"],function(b){var c=a[b]||[],e=c.length,f=this._getButtonContainer(b,e),g=!1,h,k,m,n;if(f){h=f.all("."+d);for(k=0;k<e;k+=1)m=c[k],n=h.indexOf(m),-1<n?(h.splice(n,1),n!==k&&(f.insertBefore(m,k+1),g=!0)):(f.appendChild(m),g=!0);h.each(function(a){this._uiRemoveButton(a,b,{preserveContent:!0});g=!0},this);0===e?(f.remove(),this._updateContentButtons(b)):g&&this.setStdModContent(b,
f,"after")}},this)},_uiSetDefaultButton:function(a,c){var d=b.CLASS_NAMES.primary;a&&a.addClass(d);c&&c.removeClass(d)},_uiSetVisibleButtons:function(a){a&&(a=this.get("defaultButton"))&&a.focus()},_unMapButton:function(a,b){var c=this._buttonsMap,d=this._getButtonName(a);d&&(c[d]===a&&delete c[d],d=b+":"+d,c[d]===a&&delete c[d]);this._defaultButton===a&&(this._defaultButton=null)},_updateDefaultButton:function(){var a=this._defaultButton;this.get("defaultButton")!==a&&this._set("defaultButton",a)},
_updateContentButtons:function(a){var b=this.getStdModNode(a).get("childNodes");this.set(a+"Content",b.isEmpty()?null:b,{src:"buttons"})},_afterButtonsChange:function(a){var b=a.newVal,c=a.section,d=a.index,e=a.src;"add"===e?(a=b[c][d],this._mapButton(a,c),this._updateDefaultButton(),this._uiInsertButton(a,c,d)):"remove"===e?(a=a.button,this._unMapButton(a,c),this._updateDefaultButton(),this._uiRemoveButton(a,c)):(this._mapButtons(b),this._updateDefaultButton(),this._uiSetButtons(b))},_afterContentChangeButtons:function(a){var b=
a.src;a=a.stdModPosition;(!a||a===k.REPLACE)&&("buttons"!==b&&b!==h.UI_SRC)&&this._uiSetButtons(this.get("buttons"))},_afterDefaultButtonChange:function(a){this._uiSetDefaultButton(a.newVal,a.prevVal)},_afterVisibleChangeButtons:function(a){this._uiSetVisibleButtons(a.newVal)}};a.WidgetButtons=b},"3.10.1",{requires:["button-plugin","cssbutton","widget-stdmod"]});SQUARESPACE_ROLLUPS.push("squarespace-commerce");
